/*! baqend 2.14.0 | Copyright (c) 2015 Baqend GmbH | MIT */

!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).DB=t()}(function(){var D={};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return D.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},D.createClass=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t},D.defaults=function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t},D.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):D.defaults(t,e))},D.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(h)return h(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){"use strict";var r=t(68),i=(o.prototype.clear=function(){this.read.clear(),this.write.clear()},o.prototype.copy=function(t){return this.read.copy(t.read),this.write.copy(t.write),this},o.prototype.isPublicReadAllowed=function(){return this.read.isPublicAllowed()},o.prototype.setPublicReadAllowed=function(){return this.read.setPublicAllowed()},o.prototype.isReadAllowed=function(t){return this.read.isAllowed(t)},o.prototype.isReadDenied=function(t){return this.read.isDenied(t)},o.prototype.allowReadAccess=function(){return r.prototype.allowAccess.apply(this.read,arguments),this},o.prototype.denyReadAccess=function(){return r.prototype.denyAccess.apply(this.read,arguments),this},o.prototype.deleteReadAccess=function(){return r.prototype.deleteAccess.apply(this.read,arguments),this},o.prototype.isPublicWriteAllowed=function(){return this.write.isPublicAllowed()},o.prototype.setPublicWriteAllowed=function(){return this.write.setPublicAllowed()},o.prototype.isWriteAllowed=function(t){return this.write.isAllowed(t)},o.prototype.isWriteDenied=function(t){return this.write.isDenied(t)},o.prototype.allowWriteAccess=function(){return r.prototype.allowAccess.apply(this.write,arguments),this},o.prototype.denyWriteAccess=function(){return r.prototype.denyAccess.apply(this.write,arguments),this},o.prototype.deleteWriteAccess=function(){return r.prototype.deleteAccess.apply(this.write,arguments),this},o.prototype.toJSON=function(){return{read:this.read.toJSON(),write:this.write.toJSON()}},o.prototype.fromJSON=function(t){this.read.fromJSON(t.read||{}),this.write.fromJSON(t.write||{})},o);function o(t){D.classCallCheck(this,o),this.read=new r(t),this.write=new r(t)}e.exports=i},{68:68}],2:[function(t,e,n){"use strict";var r,u=t(35),c=t(33),i=t(19),a=t(76),o=t(62),s=t(18),f=t(66),h=t(25),l=t(21),p=t(74),d=h.StatusCode,y="/db/",g=(r=a.Lockable,D.inherits(v,r),D.createClass(v,[{key:"isOpen",get:function(){return!!this.connection}},{key:"token",get:function(){return this.tokenStorage.token},set:function(t){this.tokenStorage.update(t)}},{key:"isCachingDisabled",get:function(){return!this.bloomFilter}},{key:"isDeviceRegistered",get:function(){return!!this.deviceMe}}]),v.prototype.connected=function(t,e,n){this.connection=t,this.tokenStorage=n,this.bloomFilterRefresh=this.entityManagerFactory.staleness,this.entities={},this.File=i.FileFactory.create(this),this._createObjectFactory(this.metamodel.embeddables),this._createObjectFactory(this.metamodel.entities),this.transaction={},this.modules=new a.Modules(this,t),e&&(e.device&&this.updateDevice(e.device),e.user&&n.token&&this._updateUser(e.user,!0),0<this.bloomFilterRefresh&&e.bloomFilter&&a.atob&&!a.isNode&&this.updateBloomFilter(e.bloomFilter))},v.prototype._createObjectFactory=function(t){var r=this;Object.keys(t).forEach(function(t){var e=r.metamodel.managedType(t),n=e.name;r[n]?(e.typeConstructor=r[n],Object.defineProperty(r,n,{value:e.createObjectFactory(r)})):Object.defineProperty(r,n,{get:function(){return Object.defineProperty(this,n,{value:e.createObjectFactory(this)}),this[n]},set:function(t){e.typeConstructor=t},configurable:!0})},this)},v.prototype.send=function(t,e){var n=this,r=t;r.tokenStorage=this.tokenStorage;var i=this.connection.send(r);return e||(i=i.catch(function(t){throw t.status===d.BAD_CREDENTIALS&&n._logout(),t})),i},v.prototype.getReference=function(t,e){var n,r,i=void 0,o=void 0;e?(n=e,o=this.metamodel.entity(t),i=0===n.indexOf(y)?n:o.ref+"/"+encodeURIComponent(n)):o="string"==typeof t?(-1!==(r=t.indexOf("/",y.length))&&(i=t),this.metamodel.entity(-1===r?t:i.substring(0,r))):this.metamodel.entity(t);var s,a=this.entities[i];return a||(a=o.create(),s=f.get(a),i&&(s.id=i),s.setUnavailable(),this._attach(a)),a},v.prototype.createQueryBuilder=function(t){return new o.Builder(this,t)},v.prototype.clear=function(){this.entities={}},v.prototype.close=function(){return this.connection=null,this.clear()},v.prototype.contains=function(t){return!!t&&this.entities[t.id]===t},v.prototype.containsById=function(t){return!(!t||!this.entities[t.id])},v.prototype.detach=function(t){var e=this;return f.get(t).withLock(function(){return e.removeReference(t),Promise.resolve(t)})},v.prototype.resolveDepth=function(t,e){var n=this;if(!e||!e.depth)return Promise.resolve(t);e.resolved=e.resolved||[];var r=[],i=Object.assign({},e,{depth:!0===e.depth||e.depth-1});return this.getSubEntities(t,1).forEach(function(t){null!==t&&-1===e.resolved.indexOf(t)&&(e.resolved.push(t),r.push(n.load(t.id,null,i)))}),Promise.all(r).then(function(){return t})},v.prototype.load=function(e,n,t){var r=this,i=t||{},o=this.getReference(e,n),s=f.get(o);if(!i.refresh&&i.local&&s.isAvailable)return this.resolveDepth(o,i);var a=new u.GetObject(s.bucket,s.key);return this.ensureCacheHeader(o.id,a,i.refresh),this.send(a).then(function(t){return o.version>t.entity.version?(i.refresh=!0,r.load(e,n,i)):(r.addToWhiteList(t.entity.id),t.status!==d.NOT_MODIFIED&&s.setJson(t.entity,{persisting:!0}),r.resolveDepth(o,i))},function(t){if(t.status===d.OBJECT_NOT_FOUND)return r.removeReference(o),s.setRemoved(),null;throw t})},v.prototype.insert=function(e,t){var n=this,r=t||{},i=void 0;return this._save(e,r,function(t,e){if(t.version)throw new c.PersistentError("Existing objects can't be inserted.");return i=!t.id,new u.CreateObject(t.bucket,e)}).then(function(t){return i&&n._attach(e),t})},v.prototype.update=function(t,e){var n=e||{};return this._save(t,n,function(t,e){if(!t.version)throw new c.PersistentError("New objects can't be inserted.");return n.force?(delete e.version,new u.ReplaceObject(t.bucket,t.key,e).ifMatch("*")):new u.ReplaceObject(t.bucket,t.key,e).ifMatch(t.version)})},v.prototype.save=function(t,e,n){function r(t,e){if(i.force){if(!t.id)throw new c.PersistentError("New special objects can't be forcedly saved.");return delete e.version,new u.ReplaceObject(t.bucket,t.key,e)}return t.version?new u.ReplaceObject(t.bucket,t.key,e).ifMatch(t.version):new u.CreateObject(t.bucket,e)}var i=e||{};return n?this._locklessSave(t,i,r):this._save(t,i,r)},v.prototype.optimisticSave=function(t,e){var n=this;return f.get(t).withLock(function(){return n._optimisticSave(t,e)})},v.prototype._optimisticSave=function(e,n){var r=this,t=!1,i=Promise.resolve(n(e,function(){t=!0}));return t?Promise.resolve(e):i.then(function(){return r.save(e,{},!0).catch(function(t){if(412===t.status)return r.refresh(e,{}).then(function(){return r._optimisticSave(e,n)});throw t})})},v.prototype._locklessSave=function(e,n,r){var i=this;this.attach(e);var o=f.get(e),s=void 0,t=void 0;o.isAvailable&&(t=o.getJson({persisting:!0})),s=o.isDirty?(n.refresh||o.setPersistent(),[this.send(r(o,t)).then(function(t){return o.id&&o.id!==t.entity.id&&(i.removeReference(e),o.id=t.entity.id,i._attach(e)),o.setJson(t.entity,{persisting:n.refresh,onlyMetadata:!n.refresh}),e},function(t){if(t.status===d.OBJECT_NOT_FOUND)return i.removeReference(e),o.setRemoved(),null;throw o.setDirty(),t})]):[Promise.resolve(e)];var a=Object.assign({},n);return a.depth=0,this.getSubEntities(e,n.depth).forEach(function(t){s.push(i._save(t,a,r))}),Promise.all(s).then(function(){return e})},v.prototype._save=function(t,e,n){var r=this;this.ensureBloomFilterFreshness();var i=f.get(t);return i.version&&this.addToBlackList(t.id),i.withLock(function(){return r._locklessSave(t,e,n)})},v.prototype.getSubEntities=function(t,e,n,r){var i=n||[];if(!e)return i;for(var o=r||t,s=f.get(t).type.references(),a=s.next();!a.done;a=s.next())for(var u=a.value,c=this.getSubEntitiesByPath(t,u.path),h=0,l=c.length;h<l;h+=1){var p=c[h];-1===i.indexOf(p)&&p!==o&&(i.push(p),i=this.getSubEntities(p,!0===e?e:e-1,i,o))}return i},v.prototype.getSubEntitiesByPath=function(t,e){var u=this,n=[t];return e.forEach(function(s){var a=[];n.forEach(function(t){var e=t[s];if(e){var n=u.metamodel.managedType(t.constructor).getAttribute(s);if(n.isCollection)for(var r=e.entries(),i=r.next();!i.done;i=r.next()){var o=i.value;a.push(o[1]),n.keyType&&n.keyType.isEntity&&a.push(o[0])}else a.push(e)}}),n=a}),n},v.prototype.delete=function(r,t){var i=this,o=t||{};this.attach(r);var s=f.get(r);return s.withLock(function(){if(!s.version&&!o.force)throw new c.IllegalEntityError(r);var t=new u.DeleteObject(s.bucket,s.key);i.addToBlackList(r.id),o.force||t.ifMatch(s.version);var e=[i.send(t).then(function(){return i.removeReference(r),s.setRemoved(),r})],n=Object.assign({},o);return n.depth=0,i.getSubEntities(r,o.depth).forEach(function(t){e.push(i.delete(t,n))}),Promise.all(e).then(function(){return r})})},v.prototype.flush=function(){},v.prototype.persist=function(t){this.attach(t)},v.prototype.refresh=function(t,e){var n=e||{};return n.refresh=!0,this.load(t.id,null,n)},v.prototype.attach=function(t){if(!this.contains(t)){if(!this.metamodel.entity(t.constructor))throw new c.IllegalEntityError(t);if(this.containsById(t))throw new c.EntityExistsError(t);this._attach(t)}},v.prototype._attach=function(t){var e=f.get(t);if(e.isAttached){if(e.db!==this)throw new c.EntityExistsError(t)}else e.db=this;e.id||"User"!==e.type.name&&"Role"!==e.type.name&&"logs.AppLog"!==e.type.name&&(e.id=y+e.type.name+"/"+a.uuid()),e.id&&(this.entities[e.id]=t)},v.prototype.removeReference=function(t){var e=f.get(t);if(!e)throw new c.IllegalEntityError(t);delete this.entities[e.id]},v.prototype.register=function(e,n,r){var i=this,o=r>s.LoginOption.NO_LOGIN;if(this.me&&o)throw new c.PersistentError("User is already logged in.");return this.withLock(function(){var t=new u.Register({user:e,password:n,login:o});return i._userRequest(t,r)})},v.prototype.login=function(e,n,r){var i=this;if(this.me)throw new c.PersistentError("User is already logged in.");return this.withLock(function(){var t=new u.Login({username:e,password:n});return i._userRequest(t,r)})},v.prototype.logout=function(){var t=this;return this.withLock(function(){return t.send(new u.Logout).then(t._logout.bind(t))})},v.prototype.loginWithOAuth=function(t,e,n){if(this.me)throw new c.PersistentError("User is already logged in.");var r=Object.assign({title:"Login with "+t,timeout:3e5,state:{},loginOption:!0},n);r.redirect&&Object.assign(r.state,{redirect:r.redirect,loginOption:r.loginOption});var i=void 0;if(!h[t+"OAuth"])throw new Error("OAuth provider "+t+" not supported.");(i=new h[t+"OAuth"](e,r.scope,JSON.stringify(r.state))).addRedirectOrigin(this.connection.origin+this.connection.basePath),r.path&&i.path(r.path);var o={width:r.width,height:r.height};if(r.redirect){var s=-1!==document.URL.indexOf("http://")||-1!==document.URL.indexOf("https://");return this.openOAuthWindow(i.request.path,s?"_self":"_system",o),new Promise(function(){})}var a=this._userRequest(i,r.loginOption);return this.openOAuthWindow(i.request.path,r.title,o),new Promise(function(t,e){var n=setTimeout(function(){e(new c.PersistentError("OAuth login timeout."))},r.timeout);a.then(t,e).then(function(){clearTimeout(n)})})},v.prototype.openOAuthWindow=function(t,e,n){var r=Object.keys(n).filter(function(t){return void 0!==n[t]}).map(function(t){return t+"="+n[t]}).join(",");open(t,e,r)},v.prototype.renew=function(e){var n=this;return this.withLock(function(){var t=new u.Me;return n._userRequest(t,e)})},v.prototype.newPassword=function(e,n,r){var i=this;return this.withLock(function(){var t=new u.NewPassword({username:e,password:n,newPassword:r});return i.send(t,!0).then(function(t){return i._updateUser(t.entity)})})},v.prototype.newPasswordWithToken=function(t,e,n){var r=this;return this.withLock(function(){return r._userRequest(new u.NewPassword({token:t,newPassword:e}),n)})},v.prototype.resetPassword=function(t){return this.send(new u.ResetPassword({username:t}))},v.prototype.changeUsername=function(t,e,n){return this.send(new u.ChangeUsername({username:t,newUsername:e,password:n}))},v.prototype._updateUser=function(t,e){var n=this.getReference(t.id);return f.get(n).setJson(t,{persisting:!0}),e&&(this.me=n),n},v.prototype._logout=function(){this.me=null,this.token=null},v.prototype._userRequest=function(t,e){var n=this,r=void 0===e||e,i=r>s.LoginOption.NO_LOGIN;return i&&(this.tokenStorage.temporary=r<s.LoginOption.PERSIST_LOGIN),this.send(t,!i).then(function(t){return t.entity?n._updateUser(t.entity,i):null},function(t){if(t.status===d.OBJECT_NOT_FOUND)return i&&n._logout(),null;throw t})},v.prototype.registerDevice=function(t,e,n){var r=this,i=new u.DeviceRegister({devicetype:t,subscription:e,device:n});return i.withCredentials=!0,this.send(i).then(function(t){return r.updateDevice(t.entity)})},v.prototype.updateDevice=function(t){var e=this.getReference(t.id);return f.get(e).setJson(t,{persisting:!0}),this.deviceMe=e},v.prototype.checkDeviceRegistration=function(){var e=this;return this.send(new u.DeviceRegistered).then(function(){return e.isDeviceRegistered=!0},function(t){if(t.status===d.OBJECT_NOT_FOUND)return e.isDeviceRegistered=!1;throw t})},v.prototype.pushDevice=function(t){return this.send(new u.DevicePush(t))},v.prototype.validate=function(t){for(var e=f.get(t).type,n=new a.ValidationResult,r=e.attributes(),i=r.next();!i.done;i=r.next()){var o=new a.Validator(i.value.name,t);n.fields[o.key]=o}var s=e.validationCode;return s&&s(n.fields),n},v.prototype.addToWhiteList=function(t){this.isCachingDisabled||(this.bloomFilter.contains(t)&&this.cacheWhiteList.add(t),this.cacheBlackList.delete(t))},v.prototype.addToBlackList=function(t){this.isCachingDisabled||(this.bloomFilter.contains(t)||this.cacheBlackList.add(t),this.cacheWhiteList.delete(t))},v.prototype.refreshBloomFilter=function(){var e=this;if(this.isCachingDisabled)return Promise.resolve();var t=new u.GetBloomFilter;return t.noCache(),this.send(t).then(function(t){return e.updateBloomFilter(t.entity),e.bloomFilter})},v.prototype.updateBloomFilter=function(t){this.bloomFilter=new l(t),this.cacheWhiteList=new Set,this.cacheBlackList=new Set},v.prototype.ensureBloomFilterFreshness=function(){var t,e,n=this;this.isCachingDisabled||(t=(new Date).getTime(),e=1e3*this.bloomFilterRefresh,this.bloomFilterLock.isReady&&t-this.bloomFilter.creation>e&&this.bloomFilterLock.withLock(function(){return n.refreshBloomFilter()}))},v.prototype.mustRevalidate=function(t){return!a.isNode&&(this.ensureBloomFilterFreshness(),this.isCachingDisabled||!this.bloomFilterLock.isReady||!this.cacheWhiteList.has(t)&&(this.cacheBlackList.has(t)||this.bloomFilter.contains(t)))},v.prototype.ensureCacheHeader=function(t,e,n){(n||this.mustRevalidate(t))&&e.noCache()},v.prototype.createURL=function(t,e){var n=this.connection.basePath+t,r=!1;return e&&this.me?(n=this.tokenStorage.signPath(n),r=!0):n=n.split("/").map(encodeURIComponent).join("/"),this.mustRevalidate(t)&&(n=n+(r?"&":"?")+"BCB"),this.connection.origin+n},v.prototype.requestAPIToken=function(t,e){var n=this._getUserReference(t,e),r=new u.UserToken(n.key);return this.send(r).then(function(t){return t.entity})},v.prototype.revokeAllTokens=function(t,e){var n=this._getUserReference(t,e),r=new u.RevokeUserToken(n.key);return this.send(r)},v.prototype._getUserReference=function(t,e){return"string"==typeof e?this.getReference(t,e):e},v);function v(t){D.classCallCheck(this,v);var e=D.possibleConstructorReturn(this,r.call(this));return e.log=a.Logger.create(e),e.connection=null,e.entities=null,e.entityManagerFactory=t,e.metamodel=t.metamodel,e.code=t.code,e.modules=null,e.me=null,e.deviceMe=null,e.tokenStorage=null,e.bloomFilter=null,e.cacheWhiteList=null,e.cacheBlackList=null,e.bloomFilterRefresh=60,e.bloomFilterLock=new a.Lockable,e}g.prototype.List=Array,g.prototype.Set=Set,g.prototype.Map=Map,g.prototype.GeoPoint=t(4),p(g.prototype,"_connector","connection"),p(g.prototype,"_entities","entities"),p(g.prototype,"_bloomFilterLock","bloomFilterLock"),e.exports=g},{18:18,19:19,21:21,25:25,33:33,35:35,4:4,62:62,66:66,74:74,76:76}],3:[function(t,e,n){"use strict";var o,s=t(35),r=t(51),a=t(76),i=t(74),u=t(23),c=t(2),h=Symbol("Connected"),l=(o=a.Lockable,D.inherits(p,o),p.prototype.configure=function(t){if(this.connection)throw new Error("The EntityManagerFactory can only be configured before is is connected.");t.tokenStorage&&(this.tokenStorage=t.tokenStorage),t.tokenStorageFactory&&(this.tokenStorageFactory=t.tokenStorageFactory),void 0!==t.staleness&&(this.staleness=t.staleness)},p.prototype.connect=function(t,e,n,r){if(this.connection)throw new Error("The EntityManagerFactory is already connected.");return Object(e)instanceof Boolean?this.connect(t,0,e,n):(this.connection=u.create(t,e,n,r),this[h](),this.ready())},p.prototype.createMetamodel=function(){return new r.Metamodel(this)},p.prototype.createEntityManager=function(t){var e=this,n=new c(this);return this.isReady?n.connected(this.connection,this.connectData,t?this.tokenStorage:new a.TokenStorage(this.connection.origin)):n.withLock(function(){return e.ready().then(function(){n.connected(e.connection,e.connectData,t?e.tokenStorage:new a.TokenStorage(e.connection.origin))})},!0),n},p.prototype.send=function(t){return t.tokenStorage||(t.tokenStorage=this.tokenStorage),this.connection.send(t)},p);function p(t){D.classCallCheck(this,p);var e=D.possibleConstructorReturn(this,o.call(this)),n=Object(t)instanceof String?{host:t}:t||{};e.connection=null,e.metamodel=e.createMetamodel(),e.code=new a.Code(e.metamodel,e),e.tokenStorageFactory=a.TokenStorage.WEB_STORAGE||a.TokenStorage.GLOBAL,e.configure(n);var r=!0,i=new Promise(function(t){e[h]=t});return n.host?e.connect(n.host,n.port,n.secure,n.basePath):r=!1,e.tokenStorage||(r=!1,i=i.then(function(){return e.tokenStorageFactory.create(e.connection.origin)}).then(function(t){e.tokenStorage=t})),n.schema?(e.connectData=n,e.metamodel.init(n.schema)):(r=!1,i=i.then(function(){var t=new s.Connect;return t.withCredentials=!0,0===e.staleness&&t.noCache(),e.send(t)}).then(function(t){e.connectData=t.entity,void 0===e.staleness&&(e.staleness=e.connectData.bloomFilterRefresh||60),e.metamodel.isInitialized||e.metamodel.init(e.connectData.schema),e.tokenStorage.update(e.connectData.token)})),r||e.withLock(function(){return i},!0),e}i(l.prototype,"_connector","connection"),i(l.prototype,"_connected",h),e.exports=l},{2:2,23:23,35:35,51:51,74:74,76:76}],4:[function(t,e,n){"use strict";var r=(o.current=function(){return new Promise(function(e,n){navigator||n(new Error("This seems not to be a browser context.")),navigator.geolocation||n(new Error("This browser does not support geolocation.")),navigator.geolocation.getCurrentPosition(function(t){e(new o(t.coords.latitude,t.coords.longitude))},function(t){n(t)})})},o.prototype.kilometersTo=function(t){return Number((o.EARTH_RADIUS_IN_KILOMETERS*this.radiansTo(t)).toFixed(3))},o.prototype.milesTo=function(t){return Number((o.EARTH_RADIUS_IN_MILES*this.radiansTo(t)).toFixed(3))},o.prototype.radiansTo=function(t){var e=this.latitude*o.DEG_TO_RAD,n=t.latitude*o.DEG_TO_RAD,r=(t.longitude-this.longitude)*o.DEG_TO_RAD;return Math.acos(Math.sin(e)*Math.sin(n)+Math.cos(e)*Math.cos(n)*Math.cos(r))},o.prototype.toString=function(){return this.latitude+";"+this.longitude},o.prototype.toJSON=function(){return{latitude:this.latitude,longitude:this.longitude}},o);function o(t,e){D.classCallCheck(this,o);var n,r=void 0,i=void 0;if(i=Object(t)instanceof String?(n=t.indexOf(";"),r=t.substring(0,n),t.substring(n+1)):Object(t)instanceof Number?(r=t,e):Object(t)instanceof Array?(r=t[0],t[1]):t instanceof Object?(r=t.latitude,t.longitude):r=0,this.longitude=i,this.latitude=r,this.latitude<-90||90<this.latitude)throw new Error("Latitude "+this.latitude+" is not in bound of -90 <= latitude <= 90");if(this.longitude<-180||180<this.longitude)throw new Error("Longitude "+this.longitude+" is not in bound of -180 <= longitude <= 180")}r.DEG_TO_RAD=Math.PI/180,r.EARTH_RADIUS_IN_KILOMETERS=6371,r.EARTH_RADIUS_IN_MILES=3956,e.exports=r},{}],5:[function(t,e,n){"use strict";var r=t(3),i=t(2);i.prototype.binding=t(19),i.prototype.connector=t(27),i.prototype.error=t(33),i.prototype.message=t(35),i.prototype.metamodel=t(51),i.prototype.util=t(76),i.prototype.caching=t(22),i.prototype.query=t(62),i.prototype.partialupdate=t(55),i.prototype.EntityManager=t(2),i.prototype.EntityManagerFactory=t(3),i.prototype.Acl=t(1);var o=new r,s=o.createEntityManager(!0);s.configure=function(t){return o.configure(t),this},s.connect=function(t,e,n,r){return e instanceof Function?this.connect(t,void 0,e,n):(o.connect(t,e),this.ready(n,r))},(n=s).db=s,n.default=s,e.exports=n},{1:1,19:19,2:2,22:22,27:27,3:3,33:33,35:35,51:51,55:55,62:62,76:76}],6:[function(t,e,n){"use strict";var r=(i.prototype.getValue=function(t,e){return t[e.name]},i.prototype.setValue=function(t,e,n){t[e.name]=n},i);function i(){D.classCallCheck(this,i)}e.exports=r},{}],7:[function(t,e,n){"use strict";var r=t(10),i=t(35),o=r.extend({get me(){return this.db.deviceMe},get isRegistered(){return this.db.isDeviceRegistered},loadWebPushKey:function(){var t=new i.VAPIDPublicKey;return t.responseType("arraybuffer"),this.db.send(t).then(function(t){return t.entity})},register:function(t,e,n,r,i){if(n instanceof Function)return this.register(t,e,null,n,r);var o="string"==typeof e?{token:e}:e;return this.db.registerDevice(t,o,n).then(r,i)},push:function(t,e,n){return this.db.pushDevice(t).then(e,n)}});o.PushMessage=t(69),e.exports=o},{10:10,35:35,69:69}],8:[function(t,e,n){"use strict";var r=Symbol("BaqendId"),i=Symbol("BaqendType"),o=(s.prototype.createProxy=function(t){return n=t,D.inherits(e,n),e;function e(){return D.classCallCheck(this,e),D.possibleConstructorReturn(this,n.apply(this,arguments))}var n},s.getBaqendType=function(t){return t[i]},s.getIdentifier=function(t){return t[r]},s.setIdentifier=function(t,e){t[r]=e},s.prototype.enhance=function(t,e){if(e[i]!==t){if(Object.prototype.hasOwnProperty.call(e,i))throw new Error("Type is already used by a different manager");e[i]=t,s.setIdentifier(e,t.ref),this.enhancePrototype(e.prototype,t)}},s.prototype.enhancePrototype=function(e,t){var n=this;e.toString===Object.prototype.toString&&Object.defineProperty(e,"toString",{value:function(){return this._metadata.id||this._metadata.bucket},enumerable:!1}),t.superType&&"Object"===t.superType.name&&t.superType.declaredAttributes.forEach(function(t){t.isMetadata||n.enhanceProperty(e,t)}),t.declaredAttributes.forEach(function(t){n.enhanceProperty(e,t)})},s.prototype.enhanceProperty=function(t,e){var n="$"+e.name;Object.defineProperty(t,e.name,{get:function(){var t=this._metadata;return t.readAccess(),t[n]},set:function(t){var e=this._metadata;e.writeAccess(),e[n]=t},configurable:!0,enumerable:!0})},s);function s(){D.classCallCheck(this,s)}e.exports=o},{}],9:[function(t,e,n){"use strict";var r,i=t(14),o=t(52),s=(r=i,D.inherits(a,r),a);function a(){return D.classCallCheck(this,a),D.possibleConstructorReturn(this,r.apply(this,arguments))}Object.defineProperties(s.prototype,{id:{get:function(){return this._metadata.id},set:function(t){if(this._metadata.id)throw new Error("The id can't be set twice: "+t);0===(t+"").indexOf("/db/"+this._metadata.bucket+"/")?this._metadata.id=t:this.key=t},enumerable:!0},key:{get:function(){return this._metadata.key},set:function(t){this._metadata.key=t}},version:{get:function(){return this._metadata.version},enumerable:!0},acl:{get:function(){return this._metadata.acl},enumerable:!0},ready:{value:function(t){return this._metadata.ready(t)}},attach:{value:function(t){t.attach(this)}},save:{value:function(t,e,n){return t instanceof Function?this.save({},t,e):this._metadata.db.save(this,t).then(e,n)}},insert:{value:function(t,e,n){return t instanceof Function?this.insert({},t,e):this._metadata.db.insert(this,t).then(e,n)}},update:{value:function(t,e,n){return t instanceof Function?this.update({},t,e):this._metadata.db.update(this,t).then(e,n)}},load:{value:function(t,e,n){if(t instanceof Function)return this.load({},t,e);var r=t||{};return r.local=!0,this._metadata.db.load(this.id,null,r).then(e,n)}},delete:{value:function(t,e,n){return t instanceof Function?this.delete({},t,e):this._metadata.db.delete(this,t).then(e,n)}},optimisticSave:{value:function(t,e,n){return this._metadata.db.optimisticSave(this,t).then(e,n)}},attr:{value:function(){throw new Error("Attr is not yet implemented.")}},validate:{value:function(){return this._metadata.db.validate(this)}},partialUpdate:{value:function(t){return new o(this,t)}},getReferencing:{value:function(t){var o=this,s=this._metadata.db,e=this._metadata.type.getReferencing(s,t),n=Array.from(e).map(function(t){var e=t[0],n=s.createQueryBuilder(e.typeConstructor),r=t[1],i=[];return r.forEach(function(t){i.push(n.equal(t,o))}),(1===i.length?i[0]:n.or(i)).resultList()});return Promise.all(n).then(function(t){return t.filter(function(t){return!!t.length})}).then(function(t){return[].concat.apply([],t)})}},toJSON:{value:function(t){var e=t;return"boolean"==typeof e&&(e={excludeMetadata:e}),"object"!==(void 0===e?"undefined":D.typeof(e))&&(e={}),this._metadata.getJson(e)}}}),e.exports=s},{14:14,52:52}],10:[function(t,e,n){"use strict";var r=t(15).extend({load:function(t,e,n,r){return e instanceof Function?this.load(t,{},e,n):this.db.load(this.managedType.typeConstructor,t,e).then(n,r)},ref:function(t){return this.db.getReference(this.managedType.ref,t)},fromJSON:function(t){var e=this.ref(t.id);return this.managedType.fromJsonValue(null,t,e)},find:function(){return this.db.createQueryBuilder(this.managedType.typeConstructor)},partialUpdate:function(t,e){return this.ref(t).partialUpdate(e)}});e.exports=r},{15:15}],11:[function(t,e,n){"use strict";var r=t(74);function i(t){for(var e=1,n=arguments.length;e<n;e+=1)for(var r=arguments[e],i=Object.getOwnPropertyNames(r),o=0,s=i.length;o<s;o+=1){var a=i[o];Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))}return t}var o=i({extend:function(t){return i({},this,t)},create:function(t){var e=function(t){return e.newInstance(arguments)};return i(e,this),e.prototype=t.prototype,e.type=t,e},new:function(){return this.newInstance(arguments)},newInstance:function(t){if(!t||0===t.length)return new this.type;var e=[null];return Array.prototype.push.apply(e,t),new(Function.prototype.bind.apply(this.type,e))}});r(o,"_type","type"),e.exports=o},{74:74}],12:[function(t,e,n){"use strict";var r=t(33),i=t(1),o=t(78).uuid,a=t(35),u=t(25).StatusCode,s=t(74),c=t(20).trailingSlashIt,h="/file".length,l=Symbol("Id"),p=Symbol("Metadata"),f=Symbol("Data"),d=(D.createClass(y,[{key:"id",get:function(){return this[l]}},{key:"url",get:function(){if(this.isFolder)throw new Error("Url can not be created for folders.");return this.db.createURL(this.id,"www"!==this.bucket)}},{key:"name",get:function(){return this.id.substring(this.id.lastIndexOf("/",this.id.length-2)+1)}},{key:"mimeType",get:function(){if(this.isFolder)throw new Error("A folder has no mimeType");return this.checkAvailable(),this[p].mimeType}},{key:"acl",get:function(){return this.checkAvailable(),this[p].acl}},{key:"lastModified",get:function(){if(this.isFolder)throw new Error("A folder has no lastModified");return this.checkAvailable(),this[p].lastModified}},{key:"createdAt",get:function(){if(this.isFolder)throw new Error("A folder has no creation date");return this.checkAvailable(),this[p].createdAt}},{key:"eTag",get:function(){if(this.isFolder)throw new Error("A folder has no eTag");return this.checkAvailable(),this[p].eTag}},{key:"headers",get:function(){if(this.isFolder)throw new Error("A folder has no custom headers");return this.checkAvailable(),this[p].headers}},{key:"size",get:function(){if(this.isFolder)throw new Error("A folder has no size");return this.checkAvailable(),this[p].size}},{key:"bucket",get:function(){return this.id.substring(h+1,this.id.indexOf("/",h+1))}},{key:"key",get:function(){return this.id.substring(this.id.indexOf("/",h+1)+1)}},{key:"path",get:function(){return this.id.substring(h)}},{key:"parent",get:function(){return this.id.substring(h,this.id.lastIndexOf("/",this.id.length-2))}},{key:"isMetadataLoaded",get:function(){return!!this[p]}}]),y.parseETag=function(t){if(!t)return null;var e=t.match(/^(?:[wW]\/)?["'](.*)["']$/);return e?e[1]:null},y.prototype.upload=function(t,e,n){var r=this,i=t||{};if(this.isFolder)throw new Error("A folder cannot be uploaded");this.setDataOptions(i);var o=new a.UploadFile(this.bucket,this.key).entity(this[f].data,this[f].type),s=this[p];return s&&(o.acl(s.acl),o.contentLength(s.size),o.mimeType(s.mimeType),o.customHeaders(s.headers)),o.progress(i.progress),this.conditional(o,i),this.db.addToBlackList(this.id),this.db.send(o).then(function(t){return r[f]=null,r.fromJSON(t.entity),r}).then(e,n)},y.prototype.download=function(t,e,n){var r=this,i=t||{};if(this.isFolder)throw new Error("A folder cannot be downloaded");var o=i.type||"blob",s=new a.DownloadFile(this.bucket,this.key).responseType(o);return this.db.ensureCacheHeader(this.id,s,i.refresh),this.db.send(s).then(function(t){return r.db.addToWhiteList(r.id),r.fromHeaders(t.headers),t.entity},function(t){if(t.status===u.OBJECT_NOT_FOUND)return null;throw t}).then(e,n)},y.prototype.delete=function(t,e,n){var r=this,i=t||{},o=new a.DeleteFile(this.bucket,this.key);return this.conditional(o,i),this.isFolder||this.db.addToBlackList(this.id),this.db.send(o).then(function(t){return r.isFolder?t.entity.map(function(t){return r.db.File(t)}):r}).then(e,n)},y.prototype.createIdFromOptions=function(t){var e=void 0;if(t.path)e=t.path;else{var n=c(t.parent||"/www");if(n.length<3)throw new Error("Invalid parent name: "+n);e=n+(t.name||t.data&&t.data.name||o())}if("/"!==e.charAt(0)&&(e="/"+e),-1!==e.indexOf("//")||e.length<3)throw new Error("Invalid path: "+e);return"/file"+e},y.prototype.conditional=function(t,e){var n;e.force||((n=this[p])&&(n.lastModified||n.eTag)?(t.ifUnmodifiedSince(n.lastModified),t.ifMatch(n.eTag)):t.ifNoneMatch("*"))},y.prototype.loadMetadata=function(t,e,n){var r=this,i=t||{};if(this.isFolder)throw new Error("A folder has no matadata.");var o=new a.GetFileMetadata(this.bucket,this.key);return this.db.ensureCacheHeader(this.id,o,i.refresh),this.db.send(o).then(function(t){return r.fromHeaders(t.headers),r},function(t){if(t.status===u.OBJECT_NOT_FOUND)return null;throw t}).then(e,n)},y.prototype.saveMetadata=function(t,e,n){var r=this,i=t||{},o=this.toJSON(),s=new a.UpdateFileMetadata(this.bucket,this.key).entity(o);return this.conditional(s,i),this.db.send(s).then(function(t){return r.fromJSON(t.entity),r}).then(e,n)},y.prototype.setDataOptions=function(t){var e,n=t.data,r=t.type;n&&(this[f]={type:r,data:n},e=this.guessMimeType(t),this.fromJSON(Object.assign({},t,{mimeType:e})))},y.prototype.guessMimeType=function(t){var e=t.mimeType;return e||("undefined"!=typeof Blob&&t.data instanceof Blob?t.data.type:"data-url"!==t.type?null:t.data.match(/^data:(.+?)(;base64)?,.*$/)[1])},y.prototype.fromHeaders=function(t){this.fromJSON({eTag:y.parseETag(t.etag),lastModified:t["last-modified"],createdAt:t["baqend-created-at"],mimeType:t["content-type"],acl:t["baqend-acl"]&&JSON.parse(t["baqend-acl"]),size:+t["baqend-size"],headers:t["baqend-custom-headers"]&&JSON.parse(t["baqend-custom-headers"])})},y.prototype.fromJSON=function(t){if(t.id&&this.id!==t.id)throw new Error("This file id "+this.id+" does not match the given json id "+t.id);var e=this[p]||{},n=void 0;t.acl instanceof i?n=t.acl:(n=e.acl||new i,t.acl&&n.fromJSON(t.acl)),this[p]=Object.assign({},this[p],{mimeType:t.mimeType,lastModified:t.lastModified&&new Date(t.lastModified)||e.lastModified,createdAt:t.createdAt&&new Date(t.createdAt)||e.createdAt,eTag:t.eTag||e.eTag,acl:n,size:"number"==typeof t.size?t.size:t.contentLength,headers:t.headers||e.headers||{}})},y.prototype.toJSON=function(){this.checkAvailable();var t=this[p];return{id:this.id,mimeType:t.mimeType,eTag:t.eTag,acl:t.acl.toJSON(),size:t.size,lastModified:t.lastModified&&t.lastModified.toISOString(),createdAt:t.createdAt&&t.createdAt.toISOString(),headers:t.headers}},y.prototype.checkAvailable=function(){if(!this.isMetadataLoaded)throw new r.PersistentError("The file metadata of "+this.id+" is not available.")},y);function y(t){D.classCallCheck(this,y);var e="string"==typeof t?{id:t}:t||{};if(e.id){if(-1===e.id.indexOf("/","/file/".length)||0!==e.id.indexOf("/file/"))throw new Error("Invalid file reference "+e.id);this[l]=e.id}else this[l]=this.createIdFromOptions(e);this.setDataOptions(e),this.isFolder="/"===this.id.charAt(this.id.length-1)}s(d.prototype,"_db","db"),s(d.prototype,"_conditional","conditional"),s(d.prototype,"_setMetadata","setDataOptions"),s(d.prototype,"_checkAvailable","checkAvailable"),e.exports=d},{1:1,20:20,25:25,33:33,35:35,74:74,78:78}],13:[function(t,e,n){"use strict";var r=t(11),i=t(12),h=t(20).trailingSlashIt,l=t(35),o=t(68),s=t(25).StatusCode,a=t(74),u=r.extend({create:function(t){var e=r.create.call(this,i);return e.db=t,e},newInstance:function(t){var e=r.newInstance.call(this,t);return e.db=this.db,e},fromJSON:function(t){var e=this.newInstance([t.id]);return e.fromJSON(t),e},saveMetadata:function(t,e,n,r){var i=new l.SetFileBucketMetadata(t,e);return this.db.send(i).then(n,r)},loadMetadata:function(t,e,n,r){var i=new l.GetFileBucketMetadata(t);return this.db.send(i).then(function(e){var n={};return o.BASE_PERMISSIONS.forEach(function(t){n[t]=o.fromJSON(e.entity[t]||{})}),n},function(t){if(t.status===s.OBJECT_NOT_FOUND)return null;throw t}).then(n,r)},listBuckets:function(t,e){var n=this;return this.db.send(new l.ListBuckets).then(function(t){return t.entity.map(function(t){return n.new(t+"/")})}).then(t,e)},listFiles:function(t,e,n,r,i){var o,s=this,a=void 0,u=(a=Object(t)instanceof String?(o=h(t),this.new({path:o})):t).key,c=a.bucket;return this.db.send(new l.ListFiles(c,u,e?e.key:null,n)).then(function(t){return t.entity.map(function(t){return s.new(t)})}).then(r,i)}});a(u,"_db","db"),e.exports=u},{11:11,12:12,20:20,25:25,35:35,68:68,74:74}],14:[function(t,e,n){"use strict";var r=t(8),i=t(66),o=(s.init=function(t,e){var n=r.getBaqendType(t.constructor);n&&Object.defineProperty(t,"_metadata",{value:i.create(n,t),configurable:!0}),e&&Object.assign(t,e)},s.extend=function(t){return t.prototype=Object.create(this.prototype,{constructor:{value:t,configurable:!0,writable:!0}}),t.extend=s.extend,t},s);function s(t){D.classCallCheck(this,s),s.init(this,t)}Object.defineProperties(o.prototype,{toJSON:{value:function(){return this._metadata.type.toJsonValue(this._metadata,this,{})}}}),e.exports=o},{66:66,8:8}],15:[function(t,e,n){"use strict";var r=t(11),i=t(74),o=r.extend({create:function(t,e){var n=r.create.call(this,t.typeConstructor);return n.methods=n.prototype,n.managedType=t,n.db=e,n},newInstance:function(t){var e=r.newInstance.call(this,t);return e._metadata.db=this.db,e},fromJSON:function(t){var e=this.newInstance(),n=e._metadata;return this.managedType.fromJsonValue(n,t,e,{})},addMethods:function(t){Object.assign(this.methods,t)},addMethod:function(t,e){this.methods[t]=e}});i(o,"_db","db"),i(o,"_managedType","managedType"),e.exports=o},{11:11,74:74}],16:[function(t,e,n){"use strict";var r,i=t(9),o=t(17),s=(r=i,D.inherits(a,r),a);function a(){return D.classCallCheck(this,a),D.possibleConstructorReturn(this,r.apply(this,arguments))}Object.defineProperties(s.prototype,{hasUser:{value:function(t){return this.users&&this.users.has(t)}},addUser:{value:function(t){if(!(t instanceof o))throw new Error("Only user instances can be added to a role.");this.users||(this.users=new Set),this.users.add(t)}},removeUser:{value:function(t){if(!(t instanceof o))throw new Error("Only user instances can be removed from a role.");this.users&&this.users.delete(t)}}}),e.exports=s},{17:17,9:9}],17:[function(t,e,n){"use strict";var r,i=t(9),o=(r=i,D.inherits(s,r),s);function s(){return D.classCallCheck(this,s),D.possibleConstructorReturn(this,r.apply(this,arguments))}Object.defineProperties(o.prototype,{newPassword:{value:function(t,e,n,r){return this._metadata.db.newPassword(this.username,t,e).then(n,r)}},changeUsername:{value:function(t,e,n,r){return this._metadata.db.changeUsername(this.username,t,e).then(n,r)}},requestAPIToken:{value:function(t,e){return this._metadata.db.requestAPIToken(this.constructor,this).then(t,e)}}}),e.exports=o},{9:9}],18:[function(t,e,n){"use strict";var a=t(10).extend({get me(){return this.db.me},register:function(t,e,n,r,i){if(n instanceof Function)return this.register(t,e,!0,n,r);var o="string"==typeof t?this.fromJSON({username:t}):t;return this.db.register(o,e,void 0===n||n).then(r,i)},login:function(t,e,n,r,i){return n instanceof Function?this.login(t,e,!0,n,r):this.db.login(t,e,void 0===n||n).then(r,i)},loginWithToken:function(t,e,n,r){return e instanceof Function?this.loginWithToken(t,!0,e,n):(this.db.token=t,this.db.renew(e).then(n,r))},logout:function(t,e){return this.db.logout().then(t,e)},newPassword:function(t,e,n,r,i){if("string"==typeof n)return this.db.newPassword(t,e,n).then(r,i);var o=arguments,s=o[0],a=o[1],u=o[2],c=o[3],h=o[4];return u instanceof Function&&(h=c,c=u,u=!0),this.db.newPasswordWithToken(s,a,u).then(c,h)},resetPassword:function(t,e,n){return this.db.resetPassword(t).then(e,n)},changeUsername:function(t,e,n,r,i){return this.db.changeUsername(t,e,n,r,i)},requestAPIToken:function(t,e,n){return this.db.requestAPIToken(this.managedType.typeConstructor,t).then(e,n)},revokeAllTokens:function(t,e,n){return this.db.revokeAllTokens(this.managedType.typeConstructor,t).then(e,n)}});a.LoginOption={NO_LOGIN:-1,SESSION_LOGIN:0,PERSIST_LOGIN:1},a.DefaultOptions={google:{width:585,height:545,scope:"email"},facebook:{width:1140,height:640,scope:"email"},github:{width:1040,height:580,scope:"user:email"},twitter:{width:740,height:730},linkedin:{width:630,height:530,scope:"r_liteprofile"},salesforce:{width:585,height:545,scope:"email"}},["Google","Facebook","GitHub","Twitter","LinkedIn","Salesforce"].forEach(function(o){var s="loginWith"+o;a[s]=function(t,e,n,r){if(e instanceof Function)return this[s](t,{},e,n);var i=Object.assign({},a.DefaultOptions[o.toLowerCase()],e||{});return this.db.loginWithOAuth(o,t,i).then(n,r)}}),e.exports=a},{10:10}],19:[function(t,e,n){"use strict";n.trailingSlashIt=t(20),n.Accessor=t(6),n.Enhancer=t(8),n.Factory=t(11),n.ManagedFactory=t(15),n.EntityFactory=t(10),n.UserFactory=t(18),n.DeviceFactory=t(7),n.FileFactory=t(13),n.Managed=t(14),n.Entity=t(9),n.Role=t(16),n.User=t(17),n.File=t(12)},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,20:20,6:6,7:7,8:8,9:9}],20:[function(t,e,n){"use strict";n.trailingSlashIt=function(t){return"/"!==t.charAt(t.length-1)?t+"/":t}},{}],21:[function(t,e,n){"use strict";var r=t(73).atob,i=(a.prototype.contains=function(t){for(var e=a.getHashes(t,this.bits,this.hashes),n=0,r=e.length;n<r;n+=1)if(!this.isSet(e[n]))return!1;return!0},a.prototype.isSet=function(t){var e=Math.floor(t/8),n=1<<t%8;return 0!=(this.bytes.charCodeAt(e)&n)},a.getHashes=function(t,e,n){for(var r=new Array(this.hashes),i=a.murmur3(0,t),o=a.murmur3(i,t),s=0;s<n;s+=1)r[s]=(i+s*o)%e;return r},a.murmur3=function(t,e){for(var n=3&e.length,r=e.length-n,i=3432918353,o=461845907,s=void 0,a=void 0,u=void 0,c=void 0,s=t,c=0;c<r;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(c+=1))<<8|(255&e.charCodeAt(c+=1))<<16|(255&e.charCodeAt(c+=1))<<24,c+=1,s=27492+(65535&(a=5*(65535&(s=(s^=u=(65535&(u=(u=(65535&u)*i+(((u>>>16)*i&65535)<<16)&4294967295)<<15|u>>>17))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<13|s>>>19))+((5*(s>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:s^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(c)))*i+(((u>>>16)*i&65535)<<16)&4294967295)<<15|u>>>17))*o+(((u>>>16)*o&65535)<<16)&4294967295}return s^=e.length,s=2246822507*(65535&(s^=s>>>16))+((2246822507*(s>>>16)&65535)<<16)&4294967295,s=3266489909*(65535&(s^=s>>>13))+((3266489909*(s>>>16)&65535)<<16)&4294967295,(s^=s>>>16)>>>0},a);function a(t){D.classCallCheck(this,a),this.bytes=r(t.b),this.bits=t.m,this.hashes=t.h,this.creation=Date.now()}e.exports=i},{73:73}],22:[function(t,e,n){"use strict";n.BloomFilter=t(21)},{21:21}],23:[function(t,e,n){"use strict";var i=t(31),r=(f.create=function(t,e,n,r){var i=t,o=e,s=n,a=r;if("undefined"!=typeof location&&(i||(i=location.hostname,o=Number(location.port)),void 0===s&&(s="https:"===location.protocol)),s=!!s,void 0===a&&(a=f.DEFAULT_BASE_PATH),-1!==i.indexOf("/")){var u=/^(https?):\/\/([^/:]+|\[[^\]]+\])(:(\d*))?(\/\w+)?\/?$/.exec(i);if(!u)throw new Error("The connection uri host "+i+" seems not to be valid");s="https"===u[1],i=u[2].replace(/(\[|])/g,""),o=u[4],a=u[5]||""}else"localhost"!==i&&/^[a-z0-9-]*$/.test(i)&&(i+=f.HTTP_DOMAIN);o=o||(s?443:80);var c=f.toUri(i,o,s,a),h=this.connections[c];if(!h){for(var l=this.connectors.length-1;0<=l;--l){var p=this.connectors[l];if(p.isUsable&&p.isUsable(i,o,s,a)){h=new p(i,o,s,a);break}}if(!h)throw new Error("No connector is usable for the requested connection.");this.connections[c]=h}return h},f.toUri=function(t,e,n,r){var i=(n?"https://":"http://")+(-1!==t.indexOf(":")?"["+t+"]":t);return i+=n&&443!==e||!n&&80!==e?":"+e:"",i+=r},f.prototype.send=function(e){var n=this,r={status:0};return new Promise(function(t){n.prepareRequest(e),n.doSend(e,e.request,t)}).then(function(t){r=t}).then(function(){return n.prepareResponse(e,r)}).then(function(){return e.doReceive(r),r}).catch(function(t){throw r.entity=null,i.of(t)})},f.prototype.prepareRequest=function(t){var e;t.mimeType()||("json"===(e=t.request.type)?t.mimeType("application/json;charset=utf-8"):"text"===e&&t.mimeType("text/plain;charset=utf-8")),this.toFormat(t);var n,r,i=void 0;switch(t.responseType()){case"json":i="application/json";break;case"text":i="text/*";break;default:i="application/json,text/*;q=0.5,*/*;q=0.1"}t.accept()||t.accept(i),!this.gzip||(n=t.ifNoneMatch())&&'""'!==n&&"*"!==n&&t.ifNoneMatch(n.slice(0,-1)+'--gzip"'),"/connect"===t.request.path?(t.request.path=t.tokenStorage.signPath(this.basePath+t.request.path).substring(this.basePath.length),t.cacheControl()&&(t.request.path+=(t.tokenStorage.token?"&":"?")+"BCB")):!t.tokenStorage||(r=t.tokenStorage.token)&&t.header("authorization","BAT "+r)},f.prototype.toFormat=function(){},f.prototype.prepareResponse=function(e,n){var r=this;n.status=1223===n.status?204:n.status;var t,i,o=void 0,s=n.headers||{},a=204===n.status?null:n.entity;return a&&((o=e.responseType())&&!(400<=n.status)||(t=s["content-type"]||s["Content-Type"])&&-1<t.indexOf("application/json")&&(o="json")),s.etag&&(s.etag=s.etag.replace("--gzip","")),!e.tokenStorage||(i=s["baqend-authorization-token"]||s["Baqend-Authorization-Token"])&&e.tokenStorage.update(i),new Promise(function(t){t(a&&r.fromFormat(n,a,o))}).then(function(t){n.entity=t,-1!==e.request.path.indexOf("/connect")&&t&&(r.gzip=!!t.gzip)},function(t){throw new Error("Response was not valid "+o+": "+t.message)})},f.prototype.fromFormat=function(){},f);function f(t,e,n,r){D.classCallCheck(this,f),this.host=t,this.port=e,this.secure=n,this.basePath=r,this.origin=f.toUri(t,e,n,"")}Object.assign(r,{DEFAULT_BASE_PATH:"/v1",HTTP_DOMAIN:".app.baqend.com",RESPONSE_HEADERS:["baqend-authorization-token","content-type","baqend-size","baqend-acl","etag","last-modified","baqend-created-at","baqend-custom-headers"],connectors:[],connections:{},gzip:!1}),e.exports=r},{31:31}],24:[function(t,e,n){"use strict";var s,a=t(23),r=t(26),i=(s=r,D.inherits(o,s),o.isUsable=function(t,e,n){if("undefined"==typeof location||"undefined"==typeof document)return!1;var r="https:"===location.protocol;return location.hostname!==t||(location.port||(r?443:80))!==e||r!==n},o.prototype.load=function(t){this.iframe=document.createElement("iframe"),this.iframe.src=this.origin+this.basePath+t,this.iframe.setAttribute("style",o.style),document.body.appendChild(this.iframe),this.queue=[],this.iframe.addEventListener("load",this.onLoad.bind(this),!1)},o.prototype.onLoad=function(){for(var t=this.queue,e=0;e<t.length;e+=1)this.postMessage(t[e]);this.queue=null},o.prototype.doSend=function(t,e,n){var r,i,o=this;t.isBinary?s.prototype.doSend.call(this,t,e,n):(this.iframe||(this.load(t.request.path),t.request.path="/connect"),r={mid:this.mid+=1,method:e.method,path:e.path,headers:e.headers,entity:e.entity,responseHeaders:a.RESPONSE_HEADERS},this.messages[r.mid]=n,i=JSON.stringify(r),this.queue?this.queue.push(i):this.postMessage(i),this.connected||setTimeout(function(){o.messages[r.mid]&&(delete o.messages[r.mid],n({status:0,error:new Error("Connection refused.")}))},1e4))},o.prototype.postMessage=function(t){this.iframe.contentWindow.postMessage(t,this.origin)},o.prototype.doReceive=function(t){var e,n;t.origin===this.origin&&"{"===t.data[0]&&(e=JSON.parse(t.data),(n=this.messages[e.mid])&&(delete this.messages[e.mid],this.connected=!0,n({status:e.status,headers:e.headers,entity:e.entity})))},o);function o(t,e,n,r){D.classCallCheck(this,o);var i=D.possibleConstructorReturn(this,s.call(this,t,e,n,r));return i.mid=0,i.messages={},i.doReceive=i.doReceive.bind(i),addEventListener("message",i.doReceive,!1),i}i.style="width:1px;height:1px;position:absolute;top:-10px;left:-10px;",a.connectors.push(i),e.exports=i},{23:23,26:26}],25:[function(t,e,n){"use strict";var r=t(28),i="undefined"==typeof navigator||"undefined"!=typeof chrome&&/google/i.test(navigator.vendor)||/cros i686/i.test(navigator.platform),o=Symbol("ResponseType"),s=(u.create=function(t){var e,n=t.path.split("?"),r=n[0].split(/[:*]\w*/),i=[];return n[1]&&n[1].split("&").forEach(function(t){var e=t.split("=");i.push(e[0])}),t.dynamic=-1!==t.path.indexOf("*"),t.path=r,t.query=i,e=u,D.inherits(o,e),D.createClass(o,[{key:"spec",get:function(){return t}}]),o;function o(){return D.classCallCheck(this,o),D.possibleConstructorReturn(this,e.apply(this,arguments))}},u.createExternal=function(t,e){t.path=[t.path];var n,r=(n=u,D.inherits(i,n),D.createClass(i,[{key:"spec",get:function(){return t}}]),i);function i(){return D.classCallCheck(this,i),D.possibleConstructorReturn(this,n.apply(this,arguments))}return Object.assign(r.prototype,e),r},D.createClass(u,[{key:"isBinary",get:function(){return this.request.type in u.BINARY||this[o]in u.BINARY}}]),u.prototype.path=function(t){if(void 0===t)return this.request.path;var e=this.request.path.indexOf("?")+1;return this.request.path=t+(0<e?(-1<t.indexOf("?")?"&":"?")+this.request.path.substring(e):""),this},u.prototype.header=function(t,e){return void 0!==e?(this.request.headers[t]=e,this):this.request.headers[t]},u.prototype.entity=function(t,e){var n=(n=e)||("string"==typeof t?/^data:(.+?)(;base64)?,.*$/.test(t)?"data-url":"text":"undefined"!=typeof Blob&&t instanceof Blob?"blob":"undefined"!=typeof Buffer&&t instanceof Buffer?"buffer":"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?"arraybuffer":"undefined"!=typeof FormData&&t instanceof FormData?"form":"json");return this.request.type=n,this.request.entity=t,this},u.prototype.mimeType=function(t){return this.header("content-type",t)},u.prototype.contentLength=function(t){return this.header("content-length",t)},u.prototype.ifMatch=function(t){return this.header("If-Match",this.formatETag(t))},u.prototype.ifNoneMatch=function(t){return this.header("If-None-Match",this.formatETag(t))},u.prototype.ifUnmodifiedSince=function(t){return this.header("if-unmodified-since",t&&t.toUTCString().replace("UTC","GMT"))},u.prototype.noCache=function(){return i||this.ifMatch("").ifNoneMatch("-"),this.cacheControl("max-age=0, no-cache")},u.prototype.cacheControl=function(t){return this.header("cache-control",t)},u.prototype.acl=function(t){return this.header("baqend-acl",t&&JSON.stringify(t))},u.prototype.customHeaders=function(t){return this.header("baqend-custom-headers",t&&JSON.stringify(t))},u.prototype.accept=function(t){return this.header("accept",t)},u.prototype.responseType=function(t){return void 0!==t?(this[o]=t,this):this[o]},u.prototype.progress=function(t){return void 0!==t?(this.progressCallback=t,this):this.progressCallback},u.prototype.addQueryString=function(e){var n,r=this;return Object(e)instanceof String?this.request.path+=e:e&&(n=0<=this.request.path.indexOf("?")?"&":"?",Object.keys(e).forEach(function(t){r.request.path+=n+t+"="+encodeURIComponent(e[t]),n="&"})),this},u.prototype.formatETag=function(t){var e=t;return e&&"*"!==e&&-1===(e=""+e).indexOf('"')&&(e='"'+e+'"'),e},u.prototype.doReceive=function(t){if(-1===this.spec.status.indexOf(t.status))throw new r(this,t)},u);function u(){D.classCallCheck(this,u),this.withCredentials=!1,this.tokenStorage=null,this.progressCallback=null;var t=arguments,e=0,n=this.spec.path;if(Object(n)instanceof Array){n=this.spec.path[0];for(var r=this.spec.path.length,i=1;i<r;i+=1)this.spec.dynamic&&r-1===i?n+=t[e].split("/").map(encodeURIComponent).join("/"):n+=encodeURIComponent(t[e])+this.spec.path[i],e+=1}for(var o="",s=0;s<this.spec.query.length;s+=1){var a=t[e];e+=1,null!=a&&(o+=o||-1!==n.indexOf("?")?"&":"?",o+=this.spec.query[s]+"="+encodeURIComponent(a))}this.request={method:this.spec.method,path:n+o,entity:null,headers:{}},t[e]&&this.entity(t[e],"json"),this.responseType("json")}Object.assign(s,{StatusCode:{NOT_MODIFIED:304,BAD_CREDENTIALS:460,BUCKET_NOT_FOUND:461,INVALID_PERMISSION_MODIFICATION:462,INVALID_TYPE_VALUE:463,OBJECT_NOT_FOUND:404,OBJECT_OUT_OF_DATE:412,PERMISSION_DENIED:466,QUERY_DISPOSED:467,QUERY_NOT_SUPPORTED:468,SCHEMA_NOT_COMPATIBLE:469,SCHEMA_STILL_EXISTS:470,SYNTAX_ERROR:471,TRANSACTION_INACTIVE:472,TYPE_ALREADY_EXISTS:473,TYPE_STILL_REFERENCED:474,SCRIPT_ABORTION:475},BINARY:{blob:!0,buffer:!0,stream:!0,arraybuffer:!0,"data-url":!0,base64:!0},GoogleOAuth:s.createExternal({method:"OAUTH",path:"https://accounts.google.com/o/oauth2/auth?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/google"})}}),FacebookOAuth:s.createExternal({method:"OAUTH",path:"https://www.facebook.com/v7.0/dialog/oauth?response_type=code",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/facebook"})}}),GitHubOAuth:s.createExternal({method:"OAUTH",path:"https://github.com/login/oauth/authorize?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/github"})}}),LinkedInOAuth:s.createExternal({method:"OAUTH",path:"https://www.linkedin.com/oauth/v2/authorization?response_type=code",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/linkedin"})}}),TwitterOAuth:s.createExternal({method:"OAUTH",path:"",query:[],status:[200]},{addRedirectOrigin:function(t){this.request.path=t+"/db/User/OAuth1/twitter"}}),SalesforceOAuth:s.createExternal({method:"OAUTH",path:"",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/salesforce"})}})}),e.exports=s},{28:28}],26:[function(t,e,n){"use strict";var r,f=t(23),i=(r=f,D.inherits(o,r),o.isUsable=function(){return"undefined"!=typeof XMLHttpRequest},o.prototype.doSend=function(t,e,n){var r=this;if("OAUTH"===e.method){this.oAuthHandle&&this.oAuthHandle({status:409,entity:'{"message": "A new OAuth request was sent."}'}),localStorage.removeItem("oauth-response");var i=function(t){"oauth-response"===t.key&&r.oAuthHandle(JSON.parse(t.newValue))};return this.oAuthHandle=function(t){n(t),localStorage.removeItem("oauth-response"),removeEventListener("storage",i,!1)},void addEventListener("storage",i,!1)}var o=new XMLHttpRequest,s=this.origin+this.basePath+e.path;o.onreadystatechange=function(){var e;o.responseType&&2===o.readyState&&400<=o.status&&(o.responseType="text"),4===o.readyState&&(e={headers:{},status:o.status,entity:o.response||o.responseText},f.RESPONSE_HEADERS.forEach(function(t){e.headers[t]=o.getResponseHeader(t)}),n(e))},o.upload&&t.progress()&&(o.upload.onprogress=t.progress()),o.open(e.method,s,!0);for(var a=e.entity,u=e.headers,c=Object.keys(u),h=0,l=c.length;h<l;h+=1){var p=c[h];o.setRequestHeader(p,u[p])}switch(o.withCredentials=t.withCredentials,t.responseType()){case"arraybuffer":o.responseType="arraybuffer";break;case"blob":case"data-url":case"base64":o.responseType="blob"}o.send(a)},o.prototype.fromFormat=function(t,e,n){if("json"===n)return JSON.parse(e);if("data-url"!==n&&"base64"!==n)return e;var r=new FileReader;return r.readAsDataURL(e),new Promise(function(t,e){r.onload=t,r.onerror=e}).then(function(){var t=r.result;return"base64"===n&&(t=t.substring(t.indexOf(",")+1)),t})},o.prototype.toFormat=function(t){if(o=t.request.type){var e=t.request.entity,n=t.mimeType();switch(o){case"blob":n=n||e.type;break;case"arraybuffer":case"form":break;case"data-url":var r=e.match(/^data:(.+?)(;base64)?,(.*)$/),i=r[2],e=r[3],o="blob",n=n||r[1];if(!i){e=decodeURIComponent(e);break}case"base64":for(var s=atob(e),a=s.length,u=new Uint8Array(a),c=0;c<a;c+=1)u[c]=s.charCodeAt(c);o="blob",e=new Blob([u],{type:n});break;case"json":"string"!=typeof e&&(e=JSON.stringify(e));break;case"text":break;default:throw new Error("Supported request format:"+o)}t.entity(e,o).mimeType(n)}},o);function o(){return D.classCallCheck(this,o),D.possibleConstructorReturn(this,r.apply(this,arguments))}f.connectors.push(i),e.exports=i},{23:23}],27:[function(t,e,n){"use strict";n.Message=t(25),n.Connector=t(23),n.FetchConnector=t(79),n.XMLHttpConnector=t(26),n.IFrameConnector=t(24),n.NodeConnector=t(79)},{23:23,24:24,25:25,26:26,79:79}],28:[function(t,e,n){"use strict";var h,r=t(31),i=(h=r,D.inherits(l,h),l);function l(t,e){D.classCallCheck(this,l);var n=e.entity||e.error||{},r=0===e.status?"Request":"Response",i=n.message||"Handling the "+r+" for "+t.request.method+" "+t.request.path,o=D.possibleConstructorReturn(this,h.call(this,i,n));o.name=n.className||"CommunicationError",o.reason=n.reason||"Communication failed",o.status=e.status,n.data&&(o.data=n.data);for(var s=n;s&&s.stackTrace;){o.stack+="\nServerside Caused by: "+s.className+" "+s.message;for(var a=s.stackTrace,u=0;u<a.length;u+=1){var c=a[u];o.stack+="\n    at "+c.className+"."+c.methodName,o.stack+=" ("+c.fileName+":"+c.lineNumber+")"}s=s.cause}return o}e.exports=i},{31:31}],29:[function(t,e,n){"use strict";var r,i=t(31),o=(r=i,D.inherits(s,r),s);function s(t){D.classCallCheck(this,s);var e=D.possibleConstructorReturn(this,r.call(this,"The entity "+t+" is managed by a different db."));return e.entity=t,e}e.exports=o},{31:31}],30:[function(t,e,n){"use strict";var r,i=t(31),o=(r=i,D.inherits(s,r),s);function s(t){D.classCallCheck(this,s);var e=D.possibleConstructorReturn(this,r.call(this,"Entity "+t+" is not a valid entity"));return e.entity=t,e}e.exports=o},{31:31}],31:[function(t,e,n){"use strict";function r(t,e){Object.prototype.hasOwnProperty.call(Error,"captureStackTrace")?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t||"An unexpected persistent error occured.",this.name=this.constructor.name,e&&(this.cause=e).stack&&(this.stack+="\nCaused By: "+e.stack)}r.of=function(t){return t instanceof r?t:new r(null,t)},r.prototype=Object.create(Error.prototype,{constructor:{value:r,enumerable:!1,configurable:!0}}),e.exports=r},{}],32:[function(t,e,n){"use strict";var r,i=t(31),o=(r=i,D.inherits(s,r),s);function s(t){return D.classCallCheck(this,s),D.possibleConstructorReturn(this,r.call(this,"The transaction has been rollbacked",t))}e.exports=o},{31:31}],33:[function(t,e,n){"use strict";n.CommunicationError=t(28),n.IllegalEntityError=t(30),n.EntityExistsError=t(29),n.PersistentError=t(31),n.RollbackError=t(32)},{28:28,29:29,30:30,31:31,32:32}],34:[function(t,e,n){"use strict";t(178),e.exports=t(5)},{178:178,5:5}],35:[function(t,e,n){"use strict";var r=t(25);n.ListAllResources=r.create({method:"GET",path:"/",status:[200]}),n.ApiVersion=r.create({method:"GET",path:"/version",status:[200]}),n.Specification=r.create({method:"GET",path:"/spec",status:[200]}),n.GetBloomFilter=r.create({method:"GET",path:"/bloomfilter",status:[200]}),n.DeleteBloomFilter=r.create({method:"DELETE",path:"/bloomfilter",status:[204]}),n.GetOrestesConfig=r.create({method:"GET",path:"/config",status:[200]}),n.UpdateOrestesConfig=r.create({method:"PUT",path:"/config",status:[200,202]}),n.Connect=r.create({method:"GET",path:"/connect",status:[200]}),n.Status=r.create({method:"GET",path:"/status",status:[200]}),n.EventsUrl=r.create({method:"GET",path:"/events-url",status:[200]}),n.BannedIp=r.create({method:"GET",path:"/banned/:ip",status:[204]}),n.Banned=r.create({method:"GET",path:"/banned",status:[]}),n.Unban=r.create({method:"DELETE",path:"/banned",status:[204]}),n.UnbanIp=r.create({method:"DELETE",path:"/banned/:ip",status:[204]}),n.GetBucketNames=r.create({method:"GET",path:"/db",status:[200]}),n.GetBucketIds=r.create({method:"GET",path:"/db/:bucket/ids?start=0&count=-1",status:[200]}),n.ExportBucket=r.create({method:"GET",path:"/db/:bucket",status:[200]}),n.ImportBucket=r.create({method:"PUT",path:"/db/:bucket",status:[200]}),n.TruncateBucket=r.create({method:"DELETE",path:"/db/:bucket",status:[200]}),n.CreateObject=r.create({method:"POST",path:"/db/:bucket",status:[201,202]}),n.GetObject=r.create({method:"GET",path:"/db/:bucket/:oid",status:[200,304]}),n.ReplaceObject=r.create({method:"PUT",path:"/db/:bucket/:oid",status:[200,202]}),n.DeleteObject=r.create({method:"DELETE",path:"/db/:bucket/:oid",status:[202,204]}),n.GetAllSchemas=r.create({method:"GET",path:"/schema",status:[200]}),n.UpdateAllSchemas=r.create({method:"POST",path:"/schema",status:[200]}),n.ReplaceAllSchemas=r.create({method:"PUT",path:"/schema",status:[200]}),n.GetSchema=r.create({method:"GET",path:"/schema/:bucket",status:[200]}),n.UpdateSchema=r.create({method:"POST",path:"/schema/:bucket",status:[200]}),n.ReplaceSchema=r.create({method:"PUT",path:"/schema/:bucket",status:[200]}),n.DeleteSchema=r.create({method:"DELETE",path:"/schema/:bucket",status:[204]}),n.AdhocQuery=r.create({method:"GET",path:"/db/:bucket/query?q&start=0&count=-1&sort=&eager=&hinted=",status:[200]}),n.AdhocQueryPOST=r.create({method:"POST",path:"/db/:bucket/query?start=0&count=-1&sort=",status:[200]}),n.AdhocCountQuery=r.create({method:"GET",path:"/db/:bucket/count?q",status:[200]}),n.AdhocCountQueryPOST=r.create({method:"POST",path:"/db/:bucket/count",status:[200]}),n.ListQueryResources=r.create({method:"GET",path:"/query",status:[200]}),n.CreateQuery=r.create({method:"POST",path:"/query",status:[201]}),n.ListThisQueryResources=r.create({method:"GET",path:"/query/:qid",status:[200]}),n.GetQueryCode=r.create({method:"GET",path:"/query/:qid/source",status:[200]}),n.RunQuery=r.create({method:"GET",path:"/query/:qid/result?start=0&count=-1",status:[200]}),n.GetQueryParameters=r.create({method:"GET",path:"/query/:qid/parameters",status:[200]}),n.NewTransaction=r.create({method:"POST",path:"/transaction",status:[201]}),n.CommitTransaction=r.create({method:"PUT",path:"/transaction/:tid/committed",status:[200]}),n.UpdatePartially=r.create({method:"POST",path:"/db/:bucket/:oid",status:[200]}),n.UpdateField=r.create({method:"POST",path:"/db/:bucket/:oid/:field",status:[200]}),n.Login=r.create({method:"POST",path:"/db/User/login",status:[200]}),n.Register=r.create({method:"POST",path:"/db/User/register",status:[200,204]}),n.Me=r.create({method:"GET",path:"/db/User/me",status:[200]}),n.ValidateUser=r.create({method:"GET",path:"/db/User/validate",status:[200]}),n.Logout=r.create({method:"GET",path:"/db/User/logout",status:[204]}),n.NewPassword=r.create({method:"POST",path:"/db/User/password",status:[200]}),n.ResetPassword=r.create({method:"POST",path:"/db/User/reset",status:[200]}),n.Verify=r.create({method:"GET",path:"/db/User/verify?token=",status:[204]}),n.ChangeUsername=r.create({method:"POST",path:"/db/User/changeUsername",status:[204]}),n.VerifyUsername=r.create({method:"GET",path:"/db/User/verifyUsername?token=",status:[204]}),n.OAuth2=r.create({method:"GET",path:"/db/User/OAuth/:provider?state=&code=&oauth_verifier=&oauth_token=&error_description=",status:[200]}),n.OAuth1=r.create({method:"GET",path:"/db/User/OAuth1/:provider",status:[200]}),n.UserToken=r.create({method:"POST",path:"/db/User/:oid/token",status:[200]}),n.RevokeUserToken=r.create({method:"DELETE",path:"/db/User/:oid/token",status:[204]}),n.GetBaqendCode=r.create({method:"GET",path:"/code/:bucket/:type",status:[200]}),n.SetBaqendCode=r.create({method:"PUT",path:"/code/:bucket/:type",status:[200,202]}),n.DeleteBaqendCode=r.create({method:"DELETE",path:"/code/:bucket/:type",status:[202,204]}),n.PostBaqendModule=r.create({method:"POST",path:"/code/:bucket",status:[200,204]}),n.GetBaqendModule=r.create({method:"GET",path:"/code/:bucket",status:[200,204]}),n.GetAllModules=r.create({method:"GET",path:"/code",status:[200]}),n.ListFiles=r.create({method:"GET",path:"/file/:bucket/ids?path=/&start=&count=-1&deep=false",status:[200]}),n.ListBuckets=r.create({method:"GET",path:"/file/buckets",status:[200]}),n.DownloadArchive=r.create({method:"GET",path:"/file",status:[200]}),n.UploadPatchArchive=r.create({method:"POST",path:"/file",status:[200]}),n.GetFileBucketMetadata=r.create({method:"GET",path:"/file/:bucket",status:[200]}),n.SetFileBucketMetadata=r.create({method:"PUT",path:"/file/:bucket",status:[204]}),n.DeleteFileBucket=r.create({method:"DELETE",path:"/file/:bucket",status:[204]}),n.CreateFile=r.create({method:"POST",path:"/file/:bucket",status:[200]}),n.DownloadFile=r.create({method:"GET",path:"/file/:bucket/*oid",status:[200,304]}),n.UploadFile=r.create({method:"PUT",path:"/file/:bucket/*oid",status:[200]}),n.GetFileMetadata=r.create({method:"HEAD",path:"/file/:bucket/*oid",status:[200]}),n.UpdateFileMetadata=r.create({method:"POST",path:"/file/:bucket/*oid",status:[200]}),n.DeleteFile=r.create({method:"DELETE",path:"/file/:bucket/*oid",status:[200,204]}),n.CreateManifest=r.create({method:"POST",path:"/pwa/manifest",status:[202]}),n.DownloadAsset=r.create({method:"GET",path:"/asset/*url",status:[200,304]}),n.RevalidateAssets=r.create({method:"POST",path:"/asset/revalidate",status:[202]}),n.GetRevalidationStatus=r.create({method:"GET",path:"/asset/revalidate/:id",status:[200,202]}),n.ListIndexes=r.create({method:"GET",path:"/index/:bucket",status:[200]}),n.CreateDropIndex=r.create({method:"POST",path:"/index/:bucket",status:[202]}),n.DropAllIndexes=r.create({method:"DELETE",path:"/index/:bucket",status:[202]}),n.DeviceRegister=r.create({method:"POST",path:"/db/Device/register",status:[200]}),n.DevicePush=r.create({method:"POST",path:"/db/Device/push",status:[204]}),n.DeviceRegistered=r.create({method:"GET",path:"/db/Device/registered",status:[200]}),n.VAPIDKeys=r.create({method:"POST",path:"/config/VAPIDKeys",status:[200]}),n.VAPIDPublicKey=r.create({method:"GET",path:"/config/VAPIDPublicKey",status:[200]}),n.GCMAKey=r.create({method:"POST",path:"/config/GCMKey",status:[204]}),n.UploadAPNSCertificate=r.create({method:"POST",path:"/config/APNSCert",status:[204]})},{25:25}],36:[function(t,e,n){"use strict";var r=t(6),i=(D.createClass(o,[{key:"persistentAttributeType",get:function(){return-1}},{key:"isAssociation",get:function(){return this.persistentAttributeType>o.PersistentAttributeType.EMBEDDED}},{key:"isCollection",get:function(){return this.persistentAttributeType===o.PersistentAttributeType.ELEMENT_COLLECTION}}]),o.prototype.init=function(t,e){if(this.declaringType)throw new Error("The attribute is already initialized.");this.order=e,this.accessor=new r,this.declaringType=t},o.prototype.getValue=function(t){return this.accessor.getValue(t,this)},o.prototype.setValue=function(t,e){this.accessor.setValue(t,this,e)},o.prototype.hasMetadata=function(t){return this.metadata&&!!this.metadata[t]},o.prototype.getMetadata=function(t){return this.hasMetadata(t)?this.metadata[t]:null},o.prototype.getJsonValue=function(){},o.prototype.setJsonValue=function(){},o.prototype.toJSON=function(){return{name:this.name,metadata:this.metadata||void 0,order:this.order}},o);function o(t,e){D.classCallCheck(this,o),this.isMetadata=!!e,this.isId=!1,this.isVersion=!1,this.isAcl=!1,this.name=t,this.order=null,this.accessor=null,this.declaringType=null,this.metadata=null}i.PersistentAttributeType={BASIC:0,ELEMENT_COLLECTION:1,EMBEDDED:2,MANY_TO_MANY:3,MANY_TO_ONE:4,ONE_TO_MANY:5,ONE_TO_ONE:6},e.exports=i},{6:6}],37:[function(t,e,n){"use strict";var o,r,i,s,a,u,c,h,l,p,f,d,y=t(50),g=t(4),v=t(12),m=(o=y,D.inherits(b,o),D.createClass(b,[{key:"persistenceType",get:function(){return y.PersistenceType.BASIC}}]),b.prototype.toJsonValue=function(t,e){return null==e?null:this.typeConstructor(e)},b.prototype.fromJsonValue=function(t,e){return null==e?null:e},b.prototype.toString=function(){return"BasicType("+this.ref+")"},b);function b(t,e,n){D.classCallCheck(this,b);var r=0===t.indexOf("/db/")?t:"/db/"+t,i=D.possibleConstructorReturn(this,o.call(this,r,e));return i.noResolving=n,i}function w(t){return t instanceof Date?t.toISOString().replace(/\.?0*Z/,"Z"):null}function O(t,e){var n="string"==typeof t?new Date(t):null;return e&&n&&e.toISOString()===n.toISOString()?e:n}function S(){return D.classCallCheck(this,S),D.possibleConstructorReturn(this,r.apply(this,arguments))}function _(){return D.classCallCheck(this,_),D.possibleConstructorReturn(this,i.apply(this,arguments))}function T(){return D.classCallCheck(this,T),D.possibleConstructorReturn(this,s.apply(this,arguments))}function E(){return D.classCallCheck(this,E),D.possibleConstructorReturn(this,a.apply(this,arguments))}function C(){return D.classCallCheck(this,C),D.possibleConstructorReturn(this,u.apply(this,arguments))}function k(){return D.classCallCheck(this,k),D.possibleConstructorReturn(this,c.apply(this,arguments))}function A(){return D.classCallCheck(this,A),D.possibleConstructorReturn(this,h.apply(this,arguments))}function x(){return D.classCallCheck(this,x),D.possibleConstructorReturn(this,l.apply(this,arguments))}function F(){return D.classCallCheck(this,F),D.possibleConstructorReturn(this,p.apply(this,arguments))}function P(){return D.classCallCheck(this,P),D.possibleConstructorReturn(this,f.apply(this,arguments))}function R(){return D.classCallCheck(this,R),D.possibleConstructorReturn(this,d.apply(this,arguments))}Object.assign(m,{Boolean:(d=m,D.inherits(R,d),R.prototype.fromJsonValue=function(t,e,n){return"string"==typeof e?"false"!==e:d.prototype.fromJsonValue.call(this,t,e,n)},new R("Boolean",Boolean)),Double:(f=m,D.inherits(P,f),P.prototype.fromJsonValue=function(t,e,n){return"string"==typeof e?parseFloat(e):f.prototype.fromJsonValue.call(this,t,e,n)},new P("Double",Number)),Integer:(p=m,D.inherits(F,p),F.prototype.fromJsonValue=function(t,e,n){return"string"==typeof e?parseInt(e,10):p.prototype.fromJsonValue.call(this,t,e,n)},new F("Integer",Number)),String:(l=m,D.inherits(x,l),new x("String",String)),DateTime:(h=m,D.inherits(A,h),A.prototype.toJsonValue=function(t,e){return w(e)},A.prototype.fromJsonValue=function(t,e,n){return O(e,n)},new A("DateTime",Date)),Date:(c=m,D.inherits(k,c),k.prototype.toJsonValue=function(t,e){var n=w(e);return n?n.substring(0,n.indexOf("T")):null},k.prototype.fromJsonValue=function(t,e,n){return O(e,n)},new k("Date",Date)),Time:(u=m,D.inherits(C,u),C.prototype.toJsonValue=function(t,e){var n=w(e);return n?n.substring(n.indexOf("T")+1):null},C.prototype.fromJsonValue=function(t,e,n){return"string"==typeof e?O("1970-01-01T"+e,n):e},new C("Time",Date)),File:(a=m,D.inherits(E,a),E.prototype.toJsonValue=function(t,e){return e instanceof v?e.id:null},E.prototype.fromJsonValue=function(t,e,n){return e?n&&n.id===e?n:new t.db.File(e):null},new E("File",v)),GeoPoint:(s=m,D.inherits(T,s),T.prototype.toJsonValue=function(t,e){return e instanceof g?e:null},T.prototype.fromJsonValue=function(t,e){return e?new g(e):null},new T("GeoPoint",g)),JsonArray:(i=m,D.inherits(_,i),_.prototype.toJsonValue=function(t,e){return Array.isArray(e)?e:null},_.prototype.fromJsonValue=function(t,e){return Array.isArray(e)?e:null},new _("JsonArray",Array)),JsonObject:(r=m,D.inherits(S,r),S.prototype.toJsonValue=function(t,e){return e&&e.constructor===Object?e:null},new S("JsonObject",Object))}),e.exports=m},{12:12,4:4,50:50}],38:[function(t,e,n){"use strict";var r,i=t(47),o=(r=i,D.inherits(s,r),D.createClass(s,[{key:"collectionType",get:function(){return i.CollectionType.COLLECTION}}]),s);function s(t,e){D.classCallCheck(this,s);var n=D.possibleConstructorReturn(this,r.call(this,t,e));return n.typeConstructor=null,n}e.exports=o},{47:47}],39:[function(t,e,n){"use strict";var r=(i.prototype.hasKey=function(t){for(var e=0;e<this.keys.length;e+=1)if(this.keys[e][t])return!0;return!1},i.prototype.toJSON=function(){return{unique:this.unique,keys:this.keys,drop:this.drop}},D.createClass(i,[{key:"isCompound",get:function(){return 1<this.keys.length}},{key:"isUnique",get:function(){return this.unique}}]),i);function i(t,e){if(D.classCallCheck(this,i),Object(t)instanceof String){var n={};n[t]=i.ASC,this.keys=[n]}else if(Object(t)instanceof Array)this.keys=t;else{if(!t)throw new Error("The keys parameter must be an String, Object or Array.");this.keys=[t]}this.drop=!1,this.unique=!0===e}Object.assign(r,{ASC:"asc",DESC:"desc",GEO:"geo",fromJSON:function(t){return new r(t.keys,t.unique)}}),e.exports=r},{}],40:[function(t,e,n){"use strict";var o,r=t(43),i=t(50),s=t(19),a=(o=r,D.inherits(u,o),u.prototype.createProxyClass=function(){return this.enhancer.createProxy(s.Managed)},u.prototype.createObjectFactory=function(t){return s.ManagedFactory.create(this,t)},u.prototype.toJsonValue=function(t,e,n){return t.root&&e instanceof this.typeConstructor&&!e._metadata.root&&(e._metadata.root=t.root),o.prototype.toJsonValue.call(this,t,e,n)},u.prototype.fromJsonValue=function(t,e,n,r){var i=n;return e&&(i instanceof this.typeConstructor||(i=this.create()),t.root&&!i._metadata.root&&(i._metadata.root=t.root)),o.prototype.fromJsonValue.call(this,t,e,i,r)},u.prototype.toString=function(){return"EmbeddableType("+this.ref+")"},D.createClass(u,[{key:"persistenceType",get:function(){return i.PersistenceType.EMBEDDABLE}}]),u);function u(){return D.classCallCheck(this,u),D.possibleConstructorReturn(this,o.apply(this,arguments))}e.exports=a},{19:19,43:43,50:50}],41:[function(t,e,n){"use strict";var u,r=t(19),a=t(49),c=t(37),i=t(50),o=t(43),s=t(68),h=t(66),l=(u=o,D.inherits(p,u),D.createClass(p,[{key:"persistenceType",get:function(){return i.PersistenceType.ENTITY}},{key:"id",get:function(){return this.declaredId||this.superType.id}},{key:"version",get:function(){return this.declaredVersion||this.superType.version}},{key:"acl",get:function(){return this.declaredAcl||this.superType.acl}}]),p.prototype.createProxyClass=function(){var t=this.superType.typeConstructor;if(t===Object)switch(this.name){case"User":t=r.User;break;case"Role":t=r.Role;break;default:t=r.Entity}return this.enhancer.createProxy(t)},p.prototype.getReferencing=function(t,e){for(var n=Object.assign({},e),r=t.metamodel.entities,i=new Map,o=Object.keys(r),s=0,a=o.length;s<a;s+=1){var u=o[s];if(!n.classes||-1!==n.classes.indexOf(u))for(var c=r[u].attributes(),h=c.next();!h.done;h=c.next()){var l,p=h.value;p.type!==this&&p.elementType!==this||((l=i.get(p.declaringType)||new Set).add(p.name),i.set(p.declaringType,l))}}return i},p.prototype.createObjectFactory=function(t){switch(this.name){case"User":return r.UserFactory.create(this,t);case"Device":return r.DeviceFactory.create(this,t);case"Object":return;default:return r.EntityFactory.create(this,t)}},p.prototype.fromJsonValue=function(t,e,n,r){if("string"==typeof e)return t.db.getReference(e);if(!e||"object"!==(void 0===e?"undefined":D.typeof(e)))return null;var i,o=Object.assign({persisting:!1,onlyMetadata:!1},r),s=void 0,a=void 0;return n&&(i=h.get(n),e.id&&i.id&&e.id!==i.id||(s=n,a=i)),s||(s=t.db.getReference(this.typeConstructor,e.id),a=h.get(s)),a.enable(!1),u.prototype.fromJsonValue.call(this,a,e,s,o),a.enable(!0),o.persisting?a.setPersistent():o.onlyMetadata||a.setDirty(),s},p.prototype.toJsonValue=function(t,e,n){var r=Object.assign({excludeMetadata:!1,depth:0,persisting:!1},n),i=!0===r.depth||-1<r.depth,o=e&&h.get(e);if(i&&o&&o.isAvailable){o.enable(!1);var s=u.prototype.toJsonValue.call(this,o,e,Object.assign({},r,{depth:!0===r.depth||r.depth-1}));return o.enable(!0),s}return e instanceof this.typeConstructor?(e.attach(t.db),e.id):null},p.prototype.toString=function(){return"EntityType("+this.ref+")"},p.prototype.toJSON=function(){var t=u.prototype.toJSON.call(this);return t.acl.schemaSubclass=this.schemaSubclassPermission,t.acl.insert=this.insertPermission,t.acl.update=this.updatePermission,t.acl.delete=this.deletePermission,t.acl.query=this.queryPermission,t},p);function p(t,e,n){D.classCallCheck(this,p);var r=D.possibleConstructorReturn(this,u.call(this,t,n));return r.declaredId=null,r.declaredVersion=null,r.declaredAcl=null,r.superType=e,r.loadPermission=new s,r.updatePermission=new s,r.deletePermission=new s,r.queryPermission=new s,r.schemaSubclassPermission=new s,r.insertPermission=new s,r}var f,d=(f=l,D.inherits(y,f),D.createClass(y,null,[{key:"ref",get:function(){return"/db/Object"}}]),y);function y(){D.classCallCheck(this,y);var t,e,n,r=D.possibleConstructorReturn(this,f.call(this,l.Object.ref,null,Object));function i(){return D.classCallCheck(this,i),D.possibleConstructorReturn(this,t.call(this,"id",c.String,!0))}function o(){return D.classCallCheck(this,o),D.possibleConstructorReturn(this,e.call(this,"version",c.Integer,!0))}function s(){return D.classCallCheck(this,s),D.possibleConstructorReturn(this,n.call(this,"acl",c.JsonObject,!0))}return r.declaredId=(t=a,D.inherits(i,t),i.prototype.getJsonValue=function(t){return t.id||void 0},i.prototype.setJsonValue=function(t,e,n){this.id||(t.id=n)},new i),r.declaredId.init(r,0),r.declaredId.isId=!0,r.declaredVersion=(e=a,D.inherits(o,e),o.prototype.getJsonValue=function(t){return t.version||void 0},o.prototype.setJsonValue=function(t,e,n){n&&(t.version=n)},new o),r.declaredVersion.init(r,1),r.declaredVersion.isVersion=!0,r.declaredAcl=(n=a,D.inherits(s,n),s.prototype.getJsonValue=function(t){return t.acl.toJSON()},s.prototype.setJsonValue=function(t,e,n){t.acl.fromJSON(n||{})},new s),r.declaredAcl.init(r,2),r.declaredAcl.isAcl=!0,r.declaredAttributes=[r.declaredId,r.declaredVersion,r.declaredAcl],r}l.Object=d,e.exports=l},{19:19,37:37,43:43,49:49,50:50,66:66,68:68}],42:[function(t,e,n){"use strict";var r,p=t(47),i=(r=p,D.inherits(o,r),D.createClass(o,[{key:"collectionType",get:function(){return p.CollectionType.LIST}}],[{key:"ref",get:function(){return"/db/collection.List"}}]),o.prototype.getJsonValue=function(t,e,n){var r=this.getValue(e);if(!(r instanceof this.typeConstructor))return null;for(var i=r.length,o=new Array(i),s=p.getAttachedState(r),a=s||[],u=!s||s.length!==i,c=new Array(i),h=0;h<i;h+=1){var l=r[h];c[h]=this.elementType.toJsonValue(t,l,n),o[h]=l,u=u||a[h]!==l}return n.persisting&&p.attachState(r,o),t.isPersistent&&u&&t.setDirty(),c},o.prototype.setJsonValue=function(t,e,n,r){var i=null;if(n){i=this.getValue(e);var o=n.length;i instanceof this.typeConstructor||(i=new this.typeConstructor(o));var s=new Array(o),a=p.getAttachedState(i)||[];o<i.length&&i.splice(o,i.length-o);for(var u=0;u<o;u+=1){var c=this.elementType.fromJsonValue(t,n[u],a[u],r);i[u]=c,s[u]=c}r.persisting&&p.attachState(i,s)}this.setValue(e,i)},o.prototype.toJSON=function(){return Object.assign({},r.prototype.toJSON.call(this),{type:o.ref+"["+this.elementType.ref+"]"})},o);function o(t,e){D.classCallCheck(this,o);var n=D.possibleConstructorReturn(this,r.call(this,t,e));return n.typeConstructor=Array,n}e.exports=i},{47:47}],43:[function(t,e,n){"use strict";var r,i=t(50),o=t(68),s=t(72),a=t(19),u=t(74),c=Symbol("ValidationCode"),h=i.TYPE_CONSTRUCTOR,l=(r=i,D.inherits(p,r),D.createClass(p,[{key:"validationCode",get:function(){return this[c]},set:function(t){this[c]=t?s.compile(this,t):null}},{key:"typeConstructor",get:function(){return this[h]||(this.typeConstructor=this.createProxyClass()),this[h]},set:function(t){if(this[h])throw new Error("Type constructor has already been set.");var e=t.prototype instanceof a.Entity;if(this.isEntity){if(!e)throw new TypeError("Entity classes must extends the Entity class.")}else if(!(t.prototype instanceof a.Managed)||e)throw new TypeError("Embeddable classes must extends the Managed class.");this.enhancer.enhance(this,t),this[h]=t}}]),p.prototype.init=function(t){this.enhancer=t,this[h]&&!a.Enhancer.getIdentifier(this[h])&&a.Enhancer.setIdentifier(this[h],this.ref)},p.prototype.createProxyClass=function(){},p.prototype.createObjectFactory=function(){},p.prototype.create=function(){var t=Object.create(this.typeConstructor.prototype);return a.Managed.init(t),t},p.prototype.attributes=function(){var t,n=void 0,r=0,i=this;return this.superType&&(n=this.superType.attributes()),(t={})[Symbol.iterator]=function(){return this},t.next=function(){if(n){var t=n.next();if(!t.done)return t;n=null}if(r<i.declaredAttributes.length){var e=i.declaredAttributes[r];return r+=1,{value:e,done:!1}}return{done:!0}},t},p.prototype.addAttribute=function(t,e){if(this.getAttribute(t.name))throw new Error("An attribute with the name "+t.name+" is already declared.");var n=void 0,n=t.order?t.order:void 0===e?this.declaredAttributes.length:e;t.init(this,n),this.declaredAttributes.push(t),this[h]&&"Object"!==this.name&&this.enhancer.enhanceProperty(this[h],t)},p.prototype.removeAttribute=function(e){var t=this.declaredAttributes.length;if(this.declaredAttributes=this.declaredAttributes.filter(function(t){return t.name!==e}),t===this.declaredAttributes.length)throw new Error("An Attribute with the name "+e+" is not declared.")},p.prototype.getAttribute=function(t){var e=this.getDeclaredAttribute(t);return!e&&this.superType&&(e=this.superType.getAttribute(t)),e},p.prototype.getDeclaredAttribute=function(e){return this.declaredAttributes.filter(function(t){return t.name===e||t.order===e})[0]||null},p.prototype.fromJsonValue=function(t,e,n,r){if(!e)return null;for(var i=this.attributes(),o=i.next();!o.done;o=i.next()){var s=o.value;r.onlyMetadata&&!s.isMetadata||s.setJsonValue(t,n,e[s.name],r)}return n},p.prototype.toJsonValue=function(t,e,n){if(!(e instanceof this.typeConstructor))return null;for(var r={},i=this.attributes(),o=i.next();!o.done;o=i.next()){var s=o.value;n.excludeMetadata&&s.isMetadata||(r[s.name]=s.getJsonValue(t,e,n))}return r},p.prototype.toJSON=function(){var e={};this.declaredAttributes.forEach(function(t){t.isMetadata||(e[t.name]=t)});var t={class:this.ref,fields:e,acl:{load:this.loadPermission,schemaAdd:this.schemaAddPermission,schemaReplace:this.schemaReplacePermission}};return this.superType&&(t.superClass=this.superType.ref),this.isEmbeddable&&(t.embedded=!0),this.metadata&&(t.metadata=this.metadata),t},p.prototype.references=function(){var r=this.attributes(),i=void 0,o=void 0,t={};return t[Symbol.iterator]=function(){return this},t.next=function(){for(;;){if(o){var t=o.next();if(!t.done)return{value:{path:[i.name].concat(t.value.path)}};o=null}var e=r.next();if(e.done)return e;var n=(i=e.value).isCollection?i.elementType:i.type;if(n.isEntity)return{value:{path:[i.name]}};n.isEmbeddable&&(o=n.references())}},t},p.prototype.hasMetadata=function(t){return this.metadata&&!!this.metadata[t]},p.prototype.getMetadata=function(t){return this.hasMetadata(t)?this.metadata[t]:null},p);function p(t,e){D.classCallCheck(this,p);var n=D.possibleConstructorReturn(this,r.call(this,0!==t.indexOf("/db/")?"/db/"+t:t,e));return n.enhancer=null,n.declaredAttributes=[],n.schemaAddPermission=new o,n.schemaReplacePermission=new o,n.metadata=null,n}u(l.prototype,"_enhancer","enhancer"),e.exports=l},{19:19,50:50,68:68,72:72,74:74}],44:[function(t,e,n){"use strict";var o,d=t(47),p=t(31),r=(o=d,D.inherits(s,o),D.createClass(s,[{key:"collectionType",get:function(){return d.CollectionType.MAP}}],[{key:"ref",get:function(){return"/db/collection.Map"}}]),s.prototype.getJsonValue=function(t,e,n){var r=this.getValue(e);if(!(r instanceof this.typeConstructor))return null;for(var i={},o=d.getAttachedState(r)||{},s=d.getAttachedSize(r)!==r.size,a={},u=r.entries(),c=u.next();!c.done;c=u.next()){var h=c.value;if(null===h[0]||void 0===h[0])throw new p("Map keys can't be null nor undefined.");var l=this.keyType.toJsonValue(t,h[0],n);a[l]=this.elementType.toJsonValue(t,h[1],n),i[l]=[h[0],h[1]],s=s||(o[l]||[])[1]!==h[1]}return n.persisting&&(d.attachState(r,i),d.attachSize(r,r.size)),t.isPersistent&&s&&t.setDirty(),a},s.prototype.setJsonValue=function(t,e,n,r){var i=null;if(n){(i=this.getValue(e))instanceof this.typeConstructor||(i=new this.typeConstructor);var o={},s=d.getAttachedState(i)||{};i.clear();for(var a=Object.keys(n),u=0,c=a.length;u<c;u+=1){var h=a[u],l=s[h]||[],p=this.keyType.fromJsonValue(t,h,l[0],r),f=this.elementType.fromJsonValue(t,n[h],l[1],r);o[h]=[p,f],i.set(p,f)}r.persisting&&(d.attachState(i,o),d.attachSize(i,i.size))}this.setValue(e,i)},s.prototype.toJSON=function(){return Object.assign({},o.prototype.toJSON.call(this),{type:s.ref+"["+this.keyType.ref+","+this.elementType.ref+"]"})},s);function s(t,e,n,r){D.classCallCheck(this,s);var i=D.possibleConstructorReturn(this,o.call(this,t,n,r));return i.keyType=e,i.typeConstructor=Map,i}e.exports=r},{31:31,47:47}],45:[function(t,e,n){"use strict";var r,i=t(43),o=t(41),s=t(8),a=t(46),u=t(39),c=t(64),h=t(74),l=t(25).StatusCode,p=t(35),f=(r=c,D.inherits(d,r),d.prototype.init=function(t){if(this.isInitialized)throw new Error("Metamodel is already initialized.");this.fromJSON(t||[]),this.isInitialized=!0},d.prototype.getRef=function(t){var e=void 0;return Object(t)instanceof String?0!==(e=t).indexOf("/db/")&&(e="/db/"+t):e=s.getIdentifier(t),e},d.prototype.entity=function(t){var e=this.getRef(t);return e?this.entities[e]:null},d.prototype.baseType=function(t){var e=null;if(Object(t)instanceof String)e=this.getRef(t);else for(var n=Object.keys(this.baseTypes),r=0,i=n.length;r<i;r+=1){var o=n[r],s=this.baseTypes[o];if(!s.noResolving&&s.typeConstructor===t){e=o;break}}return e?this.baseTypes[e]:null},d.prototype.embeddable=function(t){var e=this.getRef(t);return e?this.embeddables[e]:null},d.prototype.managedType=function(t){return this.baseType(t)||this.entity(t)||this.embeddable(t)},d.prototype.addType=function(t){var e=void 0;if(t.isBasic?e=this.baseTypes:t.isEmbeddable?(t.init(this.enhancer),e=this.embeddables):t.isEntity&&(t.init(this.enhancer),e=this.entities,null===t.superType&&t.ref!==o.Object.ref&&(t.superType=this.entity(o.Object.ref))),e[t.ref])throw new Error("The type "+t.ref+" is already declared.");return e[t.ref]=t},d.prototype.load=function(){var e=this;if(!this.isInitialized)return this.withLock(function(){var t=new p.GetAllSchemas;return e.entityManagerFactory.send(t).then(function(t){return e.init(t.entity),e})});throw new Error("Metamodel is already initialized.")},d.prototype.save=function(t){var e=this;return this.sendUpdate(t||this.toJSON()).then(function(){return e})},d.prototype.update=function(t){var e=this;return this.sendUpdate(t).then(function(t){return e.fromJSON(t.entity),e})},d.prototype.sendUpdate=function(e){var n=this;return this.withLock(function(){var t=void 0,t=e instanceof i?new p.UpdateSchema(e.name,e.toJSON()):new p.UpdateAllSchemas(e);return n.entityManagerFactory.send(t)})},d.prototype.toJSON=function(){var e=this;if(!this.isInitialized)throw new Error("Metamodel is not initialized.");return[].concat(Object.keys(this.entities).map(function(t){return e.entities[t].toJSON()}),Object.keys(this.embeddables).map(function(t){return e.embeddables[t].toJSON()}))},d.prototype.fromJSON=function(t){var e=this,n=(new a).buildModels(t);this.baseTypes={},this.embeddables={},this.entities={},Object.keys(n).forEach(function(t){return e.addType(n[t])})},d.prototype.createIndex=function(t,e){e.drop=!1;var n=new p.CreateDropIndex(t,e.toJSON());return this.entityManagerFactory.send(n)},d.prototype.dropIndex=function(t,e){e.drop=!0;var n=new p.CreateDropIndex(t,e.toJSON());return this.entityManagerFactory.send(n)},d.prototype.dropAllIndexes=function(t){var e=new p.DropAllIndexes(t);return this.entityManagerFactory.send(e)},d.prototype.getIndexes=function(t){var e=new p.ListIndexes(t);return this.entityManagerFactory.send(e).then(function(t){return t.entity.map(function(t){return new u(t.keys,t.unique)})}).catch(function(t){if(t.status===l.BUCKET_NOT_FOUND||t.status===l.OBJECT_NOT_FOUND)return null;throw t})},d);function d(t){D.classCallCheck(this,d);var e=D.possibleConstructorReturn(this,r.call(this));return e.isInitialized=!1,e.entityManagerFactory=t,e.entities=null,e.embeddables=null,e.baseTypes=null,e.enhancer=new s,e}h(f.prototype,"_enhancer","enhancer"),h(f.prototype,"_send","sendUpdate"),h(f.prototype,"_getRef","getRef"),e.exports=f},{25:25,35:35,39:39,41:41,43:43,46:46,64:64,74:74,8:8}],46:[function(t,e,n){"use strict";var r=t(37),o=t(41),s=t(40),c=t(42),h=t(44),l=t(48),p=t(49),i=t(31),a=(u.prototype.getModel=function(t){if(t in this.models)return this.models[t];var e=this.buildModel(t);return this.models[t]=e},u.prototype.buildModels=function(t){var n=this;return this.modelDescriptors={},t.forEach(function(t){n.modelDescriptors[t.class]=t}),Object.keys(this.modelDescriptors).forEach(function(e){try{var t=n.getModel(e);n.buildAttributes(t)}catch(t){throw new i("Can't create model for entity class "+e,t)}}),this.getModel(o.Object.ref),this.models},u.prototype.buildModel=function(t){var e,n,r=this.modelDescriptors[t],i=void 0;if(t===o.Object.ref)i=new o.Object;else{if(!r)throw new TypeError("No model available for "+t);i=r.embedded?new s(t):(e=r.superClass||o.Object.ref,new o(t,this.getModel(e)))}return i.metadata={},r&&(i.metadata=r.metadata||{},n=r.acl||{},Object.keys(n).forEach(function(t){i[t+"Permission"].fromJSON(n[t])})),i},u.prototype.buildAttributes=function(n){var r=this,t=this.modelDescriptors[n.ref],i=t.fields;Object.keys(i).forEach(function(t){var e=i[t];n.getAttribute(t)||n.addAttribute(r.buildAttribute(e),e.order)}),t.validationCode&&(n.validationCode=t.validationCode)},u.prototype.buildAttribute=function(t){var e=t.flags&&(-1!==t.flags.indexOf("METADATA")||-1!==t.flags.indexOf("READONLY")),n=t.name,r=t.type;if(0!==r.indexOf("/db/collection.")){var i=new p(n,this.getModel(r),e);return i.metadata=t.metadata,i}var o=r.substring(0,r.indexOf("[")),s=r.substring(r.indexOf("[")+1,r.indexOf("]")).trim();switch(o){case c.ref:return new c(n,this.getModel(s));case l.ref:return new l(n,this.getModel(s));case h.ref:var a=s.substring(0,s.indexOf(",")).trim(),u=s.substring(s.indexOf(",")+1).trim();return new h(n,this.getModel(a),this.getModel(u));default:throw new TypeError("No collection available for "+r)}},u);function u(){var n=this;D.classCallCheck(this,u),this.models={},this.modelDescriptors=null,Object.keys(r).forEach(function(t){var e=r[t];e instanceof r&&(n.models[e.ref]=e)})}e.exports=a},{31:31,37:37,40:40,41:41,42:42,44:44,48:48,49:49}],47:[function(t,e,n){"use strict";var r,i=t(36),o=Symbol("AttachedState"),s=Symbol("AttachedSize"),a=(r=i,D.inherits(u,r),u.getAttachedState=function(t){return t[o]||null},u.attachState=function(t,e){Object.defineProperty(t,o,{value:e,configurable:!0})},u.getAttachedSize=function(t){return t[s]},u.attachSize=function(t,e){Object.defineProperty(t,s,{value:e,configurable:!0})},D.createClass(u,[{key:"persistentAttributeType",get:function(){return i.PersistentAttributeType.ELEMENT_COLLECTION}}]),u);function u(t,e){D.classCallCheck(this,u);var n=D.possibleConstructorReturn(this,r.call(this,t));return n.elementType=e,n.typeConstructor=null,n}a.CollectionType={COLLECTION:0,LIST:1,MAP:2,SET:3},e.exports=a},{36:36}],48:[function(t,e,n){"use strict";var i,p=t(47),r=(i=p,D.inherits(o,i),D.createClass(o,[{key:"collectionType",get:function(){return p.CollectionType.SET}}],[{key:"ref",get:function(){return"/db/collection.Set"}}]),o.prototype.getJsonValue=function(t,e,n){var r=this.getValue(e);if(!(r instanceof this.typeConstructor))return null;for(var i={},o=p.getAttachedState(r)||{},s=p.getAttachedSize(r)!==r.size,a=[],u=r.values(),c=u.next();!c.done;c=u.next()){var h=c.value,l=this.elementType.toJsonValue(t,h,n);a.push(l),i[l]=h,s=s||o[l]!==h}return n.persisting&&(p.attachState(r,i),p.attachSize(r,r.size)),t.isPersistent&&s&&t.setDirty(),a},o.prototype.setJsonValue=function(t,e,n,r){var i=null;if(n){(i=this.getValue(e))instanceof this.typeConstructor||(i=new this.typeConstructor);var o={},s=p.getAttachedState(i)||{};i.clear();for(var a=0,u=n.length;a<u;a+=1){var c=n[a],h=c&&c.id?c.id:c,l=this.elementType.fromJsonValue(t,c,s[h],r);i.add(l),o[h]=l}r.persisting&&(p.attachState(i,o),p.attachSize(i,i.size))}this.setValue(e,i)},o.prototype.toJSON=function(){return Object.assign({},i.prototype.toJSON.call(this),{type:o.ref+"["+this.elementType.ref+"]"})},o);function o(t,e,n){D.classCallCheck(this,o);var r=D.possibleConstructorReturn(this,i.call(this,t,e,n));return r.typeConstructor=Set,r}e.exports=r},{47:47}],49:[function(t,e,n){"use strict";var i,r=t(36),o=t(50),s=(i=r,D.inherits(a,i),D.createClass(a,[{key:"typeConstructor",get:function(){return this.type.typeConstructor}},{key:"persistentAttributeType",get:function(){switch(this.type.persistenceType){case o.PersistenceType.BASIC:return r.PersistentAttributeType.BASIC;case o.PersistenceType.EMBEDDABLE:return r.PersistentAttributeType.EMBEDDED;case o.PersistenceType.ENTITY:return r.PersistentAttributeType.ONE_TO_MANY;default:throw new Error("Unknown persistent attribute type.")}}}]),a.prototype.getJsonValue=function(t,e,n){return this.type.toJsonValue(t,this.getValue(e),n)},a.prototype.setJsonValue=function(t,e,n,r){this.setValue(e,this.type.fromJsonValue(t,n,this.getValue(e),r))},a.prototype.toJSON=function(){return Object.assign({},i.prototype.toJSON.call(this),{type:this.type.ref})},a);function a(t,e,n){D.classCallCheck(this,a);var r=D.possibleConstructorReturn(this,i.call(this,t,n));return r.type=e,r}e.exports=s},{36:36,50:50}],50:[function(t,e,n){"use strict";var r=Symbol("TypeConstructor"),i=(D.createClass(o,[{key:"persistenceType",get:function(){return-1}},{key:"isBasic",get:function(){return this.persistenceType===o.PersistenceType.BASIC}},{key:"isEmbeddable",get:function(){return this.persistenceType===o.PersistenceType.EMBEDDABLE}},{key:"isEntity",get:function(){return this.persistenceType===o.PersistenceType.ENTITY}},{key:"isMappedSuperclass",get:function(){return this.persistenceType===o.PersistenceType.MAPPED_SUPERCLASS}},{key:"typeConstructor",get:function(){return this[r]},set:function(t){if(this[r])throw new Error("typeConstructor has already been set.");this[r]=t}}]),o.prototype.fromJsonValue=function(){},o.prototype.toJsonValue=function(){},o);function o(t,e){if(D.classCallCheck(this,o),0!==t.indexOf("/db/"))throw new SyntaxError("Type ref "+t+" is invalid.");this.ref=t,this.name=t.substring(4),this[r]=e}i.PersistenceType={BASIC:0,EMBEDDABLE:1,ENTITY:2,MAPPED_SUPERCLASS:3},i.TYPE_CONSTRUCTOR=r,e.exports=i},{}],51:[function(t,e,n){"use strict";var r=t(45);r.prototype.Attribute=t(36),r.prototype.BasicType=t(37),r.prototype.CollectionAttribute=t(38),r.prototype.EmbeddableType=t(40),r.prototype.EntityType=t(41),r.prototype.ListAttribute=t(42),r.prototype.ManagedType=t(43),r.prototype.MapAttribute=t(44),r.prototype.Metamodel=t(45),r.prototype.ModelBuilder=t(46),r.prototype.PluralAttribute=t(47),r.prototype.SetAttribute=t(48),r.prototype.SingularAttribute=t(49),r.prototype.Type=t(50),r.prototype.DbIndex=t(39),e.exports=new r},{36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50}],52:[function(t,e,n){"use strict";var r,i=t(53),o=t(66),s=t(74),a=t(35),u=(r=i,D.inherits(c,r),c.prototype.execute=function(){var e=this,n=o.get(this.entity),t=JSON.stringify(this),r=new a.UpdatePartially(n.bucket,n.key,t);return n.withLock(function(){return n.db.send(r).then(function(t){return n.setJson(t.entity,!0),e.entity})})},c);function c(t,e){D.classCallCheck(this,c);var n=D.possibleConstructorReturn(this,r.call(this,e));return n.entity=t,n}s(i.prototype,"_entity","entity"),e.exports=u},{35:35,53:53,66:66,74:74}],53:[function(t,e,n){"use strict";var i=["$add","$and","$currentDate","$dec","$inc","$max","$min","$mul","$or","$pop","$push","$put","$remove","$rename","$replace","$set","$shift","$unshift","$xor"],o=t(54),r=t(74),s=(a.prototype.set=function(t,e){var n,r=e;return r instanceof Set?r=Array.from(r):r instanceof Map&&(n={},r.forEach(function(t,e){n[e]=t}),r=n),this.addOperation(t,"$set",r)},a.prototype.inc=function(t,e){return this.addOperation(t,"$inc","number"==typeof e?e:1)},a.prototype.dec=function(t,e){return this.increment(t,"number"==typeof e?-e:-1)},a.prototype.mul=function(t,e){if("number"!=typeof e)throw new Error("Multiplicator must be a number.");return this.addOperation(t,"$mul",e)},a.prototype.div=function(t,e){if("number"!=typeof e)throw new Error("Divisor must be a number.");return this.addOperation(t,"$mul",1/e)},a.prototype.min=function(t,e){if("number"!=typeof e)throw new Error("Value must be a number");return this.addOperation(t,"$min",e)},a.prototype.max=function(t,e){if("number"!=typeof e)throw new Error("Value must be a number");return this.addOperation(t,"$max",e)},a.prototype.remove=function(t,e){return this.addOperation(t,"$remove",e)},a.prototype.put=function(t,e,n){var r={};return"string"==typeof e||"number"==typeof e?r[e]=n:"object"===(void 0===e?"undefined":D.typeof(e))&&Object.assign(r,e),this.addOperation(t,"$put",r)},a.prototype.push=function(t,e){return this.addOperation(t,"$push",e)},a.prototype.unshift=function(t,e){return this.addOperation(t,"$unshift",e)},a.prototype.pop=function(t){return this.addOperation(t,"$pop")},a.prototype.shift=function(t){return this.addOperation(t,"$shift")},a.prototype.add=function(t,e){return this.addOperation(t,"$add",e)},a.prototype.replace=function(t,e,n){if(this.hasOperationOnPath(t))throw new Error("You cannot update "+t+" multiple times");return this.addOperation(t+"."+e,"$replace",n)},a.prototype.currentDate=function(t){return this.addOperation(t,"$currentDate")},a.prototype.and=function(t,e){return this.addOperation(t,"$and",e)},a.prototype.or=function(t,e){return this.addOperation(t,"$or",e)},a.prototype.xor=function(t,e){return this.addOperation(t,"$xor",e)},a.prototype.rename=function(t,e){return this.addOperation(t,"$rename",e)},a.prototype.toJSON=function(){return this.operations.reduce(function(t,e){var n={};return n[e.path]=e.value,t[e.name]=Object.assign({},t[e.name],n),t},{})},a.prototype.execute=function(){throw new Error('Cannot call "execute" on abstract PartialUpdateBuilder')},a.prototype.addOperation=function(t,e,n){if("string"!=typeof t)throw new Error("Path must be a string");if(-1===i.indexOf(e))throw new Error("Operation invalid: "+e);if(this.hasOperationOnPath(t))throw new Error("You cannot update "+t+" multiple times");if("number"==typeof n){if(Number.isNaN(n))throw new Error("NaN is not a supported value");if(!Number.isFinite(n))throw new Error("Infinity is not a supported value")}var r=new o(e,t,void 0===n?null:n);return this.operations.push(r),this},a.prototype.addOperations=function(t){var i=this;Object.keys(t).forEach(function(n){var r=t[n];Object.keys(r).forEach(function(t){var e=r[t];i.operations.push(new o(n,t,e))})})},a.prototype.hasOperationOnPath=function(e){return this.operations.some(function(t){return t.path===e})},a);function a(t){D.classCallCheck(this,a),this.operations=[],t&&this.addOperations(t)}Object.assign(s.prototype,{increment:s.prototype.inc,decrement:s.prototype.dec,multiply:s.prototype.mul,divide:s.prototype.div,atMost:s.prototype.min,atLeast:s.prototype.max,toNow:s.prototype.currentDate}),r(s.prototype,"_operations","operations"),r(s.prototype,"_addOperation","addOperation"),r(s.prototype,"_hasOperationOnPath","hasOperationOnPath"),e.exports=s},{54:54,74:74}],54:[function(t,e,n){"use strict";e.exports=function t(e,n,r){D.classCallCheck(this,t),this.name=e,this.path=n,this.value=r}},{}],55:[function(t,e,n){"use strict";n.EntityPartialUpdateBuilder=t(52),n.PartialUpdateBuilder=t(53)},{52:52,53:53}],56:[function(t,e,n){"use strict";var r,i=t(58),o=t(57),s=t(60),a=t(61),u=t(74),c=a.varargs,h=(r=a,D.inherits(l,r),l.prototype.and=function(){return this.addOperator("$and",c(0,arguments))},l.prototype.or=function(){return this.addOperator("$or",c(0,arguments))},l.prototype.nor=function(){return this.addOperator("$nor",c(0,arguments))},l.prototype.eventStream=function(t,e,n,r){return this.where({}).eventStream(t,e,n,r)},l.prototype.resultStream=function(t,e,n,r){return this.where({}).resultStream(t,e,n,r)},l.prototype.resultList=function(t,e,n){return this.where({}).resultList(t,e,n)},l.prototype.singleResult=function(t,e,n){return this.where({}).singleResult(t,e,n)},l.prototype.count=function(t,e){return this.where({}).count(t,e)},l.prototype.addOperator=function(t,e){if(e.length<2)throw new Error("Only two or more queries can be joined with an "+t+" operator.");return e.forEach(function(t,e){if(!(t instanceof a))throw new Error("Argument at index "+e+" is not a query.")}),new s(this.entityManager,this.resultClass,t,e)},l.prototype.addOrder=function(t,e){return new i(this.entityManager,this.resultClass).addOrder(t,e)},l.prototype.addFilter=function(t,e,n){return new i(this.entityManager,this.resultClass).addFilter(t,e,n)},l.prototype.addOffset=function(t){return new i(this.entityManager,this.resultClass).addOffset(t)},l.prototype.addLimit=function(t){return new i(this.entityManager,this.resultClass).addLimit(t)},l);function l(){return D.classCallCheck(this,l),D.possibleConstructorReturn(this,r.apply(this,arguments))}Object.assign(h.prototype,o),u(h.prototype,"_addOperator","addOperator"),u(h.prototype,"_addOrder","addOrder"),u(h.prototype,"_addFilter","addFilter"),u(h.prototype,"_addOffset","addOffset"),u(h.prototype,"_addLimit","addLimit"),e.exports=h},{57:57,58:58,60:60,61:61,74:74}],57:[function(t,e,n){"use strict";var r=t(61).varargs,i={};Object.assign(i,{where:function(t){return this.addFilter(null,null,t)},equal:function(t,e){return this.addFilter(t,null,e)},notEqual:function(t,e){return this.addFilter(t,"$ne",e)},greaterThan:function(t,e){return this.addFilter(t,"$gt",e)},greaterThanOrEqualTo:function(t,e){return this.addFilter(t,"$gte",e)},lessThan:function(t,e){return this.addFilter(t,"$lt",e)},lessThanOrEqualTo:function(t,e){return this.addFilter(t,"$lte",e)},between:function(t,e,n){return this.addFilter(t,"$gt",e).addFilter(t,"$lt",n)},in:function(t){return this.addFilter(t,"$in",r(1,arguments))},notIn:function(t){return this.addFilter(t,"$nin",r(1,arguments))},isNull:function(t){return this.equal(t,null)},isNotNull:function(t){return this.addFilter(t,"$exists",!0).addFilter(t,"$ne",null)},containsAll:function(t){return this.addFilter(t,"$all",r(1,arguments))},mod:function(t,e,n){return this.addFilter(t,"$mod",[e,n])},matches:function(t,e){var n=e instanceof RegExp?e:new RegExp(e);if(n.ignoreCase)throw new Error("RegExp.ignoreCase flag is not supported.");if(n.global)throw new Error("RegExp.global flag is not supported.");if(0!==n.source.indexOf("^"))throw new Error("regExp must be an anchored expression, i.e. it must be started with a ^.");var r=this.addFilter(t,"$regex",n.source);return n.multiline&&r.addFilter(t,"$options","m"),r},size:function(t,e){return this.addFilter(t,"$size",e)},near:function(t,e,n){return this.addFilter(t,"$nearSphere",{$geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},$maxDistance:n})},withinPolygon:function(t){var e=r(1,arguments);return this.addFilter(t,"$geoWithin",{$geometry:{type:"Polygon",coordinates:[e.map(function(t){return[t.longitude,t.latitude]})]}})}}),Object.assign(i,{eq:i.equal,ne:i.notEqual,lt:i.lessThan,le:i.lessThanOrEqualTo,gt:i.greaterThan,ge:i.greaterThanOrEqualTo,containsAny:i.in}),e.exports=i},{61:61}],58:[function(t,e,n){"use strict";var r,i=t(59),o=t(57),s=t(74),a=(r=i,D.inherits(u,r),u.prototype.addFilter=function(t,e,n){if(null!==t){if(!(Object(t)instanceof String))throw new Error("Field must be a string.");var r;e?((r=this.filter[t])instanceof Object&&Object.getPrototypeOf(r)===Object.prototype||(r={},this.filter[t]=r),r[e]=n):this.filter[t]=n}else Object.assign(this.filter,n);return this},u.prototype.toJSON=function(){return this.filter},u);function u(t,e){D.classCallCheck(this,u);var n=D.possibleConstructorReturn(this,r.call(this,t,e));return n.filter={},n}Object.assign(a.prototype,o),s(a.prototype,"_filter","filter"),s(a.prototype,"_addFilter","addFilter"),e.exports=a},{57:57,59:59,74:74}],59:[function(t,e,n){"use strict";var r,u=t(61),c=t(35),i=t(66),o=t(9),s=t(74),a=(r=u,D.inherits(h,r),h.prototype.eventStream=function(){throw new Error("Streaming features not available! Please use Streaming SDK!")},h.prototype.resultStream=function(){throw new Error("Streaming features not available! Please use Streaming SDK!")},h.prototype.resultList=function(e,t,n){var r=this;if(e instanceof Function)return this.resultList({},e,t);var i=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!i)throw new Error("Only typed queries can be executed.");var o=this.serializeQuery(),s=this.serializeSort(),a=void 0,a=this.entityManager.connection.host.length+o.length+s.length>u.MAX_URI_SIZE?new c.AdhocQueryPOST(i.name,this.firstResult,this.maxResults,s).entity(o,"text"):new c.AdhocQuery(i.name,o,this.firstResult,this.maxResults,s);return this.entityManager.send(a).then(function(t){return r.createResultList(t.entity,e)}).then(t,n)},h.prototype.singleResult=function(e,t,n){var r=this;if(e instanceof Function)return this.singleResult({},e,t);var i=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!i)throw new Error("Only typed queries can be executed.");var o=this.serializeQuery(),s=this.serializeSort(),a=void 0,a=this.entityManager.connection.host.length+o.length>u.MAX_URI_SIZE?new c.AdhocQueryPOST(i.name,o,this.firstResult,1,s).entity(o,"text"):new c.AdhocQuery(i.name,o,this.firstResult,1,s);return this.entityManager.send(a).then(function(t){return r.createResultList(t.entity,e)}).then(function(t){return t.length?t[0]:null}).then(t,n)},h.prototype.count=function(t,e){var n=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!n)throw new Error("Only typed queries can be executed.");var r=this.serializeQuery(),i=void 0,i=this.entityManager.connection.host.length+r.length>u.MAX_URI_SIZE?new c.AdhocCountQueryPOST(n.name).entity(r,"text"):new c.AdhocCountQuery(n.name,r);return this.entityManager.send(i).then(function(t){return t.entity.count}).then(t,e)},h.prototype.serializeQuery=function(){return JSON.stringify(this,function(t,e){var n=this[t];return n instanceof Date?{$date:e}:n instanceof o?n.id:e})},h.prototype.serializeSort=function(){return JSON.stringify(this.order)},h.prototype.createResultList=function(t,n){var r=this;return t.length?Promise.all(t.map(function(t){if(t.id){var e=r.entityManager.getReference(r.resultClass,t.id);return i.get(e).setJson(t,{persisting:!0}),r.entityManager.resolveDepth(e,n)}return r.entityManager.load(Object.keys(t)[0])},this)).then(function(t){return t.filter(function(t){return!!t})}):Promise.resolve([])},h.prototype.addOrder=function(t,e){return e?this.order[t]=e:this.order=t,this},h.prototype.addOffset=function(t){return this.firstResult=t,this},h.prototype.addLimit=function(t){return this.maxResults=t,this},h);function h(t,e){D.classCallCheck(this,h);var n=D.possibleConstructorReturn(this,r.call(this,t,e));return n.firstResult=0,n.maxResults=-1,n.order={},n}s(a.prototype,"_sort","order"),s(a.prototype,"_serializeQuery","serializeQuery"),s(a.prototype,"_serializeSort","serializeSort"),s(a.prototype,"_createResultList","createResultList"),s(a.prototype,"_addOrder","addOrder"),s(a.prototype,"_addOffset","addOffset"),s(a.prototype,"_addLimit","addLimit"),e.exports=a},{35:35,61:61,66:66,74:74,9:9}],60:[function(t,e,n){"use strict";var o,r=t(59),i=t(74),s=(o=r,D.inherits(a,o),a.prototype.toJSON=function(){var t={};return t[this.operator]=this.childs,t},a);function a(t,e,n,r){D.classCallCheck(this,a);var i=D.possibleConstructorReturn(this,o.call(this,t,e));return i.operator=n,i.childs=r,i}i(s.prototype,"_operator","operator"),i(s.prototype,"_childs","childs"),e.exports=s},{59:59,74:74}],61:[function(t,e,n){"use strict";var r=(i.prototype.ascending=function(t){return this.addOrder(t,1)},i.prototype.descending=function(t){return this.addOrder(t,-1)},i.prototype.sort=function(t){if(!(t instanceof Object)||Object.getPrototypeOf(t)!==Object.prototype)throw new Error("sort must be an object.");return this.addOrder(t)},i.prototype.offset=function(t){if(t<0)throw new Error("The offset can't be nagative.");return this.addOffset(t)},i.prototype.limit=function(t){if(t<0)throw new Error("The limit can't be nagative.");return this.addLimit(t)},i.prototype.resultList=function(){},i.prototype.singleResult=function(){},i.prototype.eventStream=function(){},i.prototype.resultStream=function(){},i.prototype.count=function(){},i);function i(t,e){D.classCallCheck(this,i),this.entityManager=t,this.resultClass=e}r.MAX_URI_SIZE=2e3,r.varargs=function(t,e){return Array.prototype.concat.apply([],Array.prototype.slice.call(e,t))},e.exports=r},{}],62:[function(t,e,n){"use strict";n.Builder=t(56),n.Condition=t(57),n.Filter=t(58),n.Node=t(59),n.Operator=t(60),n.Query=t(61)},{56:56,57:57,58:58,59:59,60:60,61:61}],63:[function(t,e,n){"use strict";var a=t(35),s=t(25).StatusCode,r=t(74),i=(o.prototype.functionToString=function(t){if(!t)return"";var e=t.toString();return"\n"===(e=e.substring(e.indexOf("{")+1,e.lastIndexOf("}"))).charAt(0)&&(e=e.substring(1)),"\n"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e},o.prototype.stringToFunction=function(t,e){return new Function(t,e)},o.prototype.loadModules=function(){var t=new a.GetAllModules;return this.entityManagerFactory.send(t).then(function(t){return t.entity})},o.prototype.loadCode=function(t,e,n){var r=this,i=Object(t)instanceof String?t:t.name,o=new a.GetBaqendCode(i,e).responseType("text");return this.entityManagerFactory.send(o).then(function(t){return r.parseCode(i,e,n,t.entity)},function(t){if(t.status===s.OBJECT_NOT_FOUND)return null;throw t})},o.prototype.saveCode=function(t,e,n){var r=this,i=Object(t)instanceof String?t:t.name,o=n instanceof Function,s=new a.SetBaqendCode(i,e).entity(o?this.functionToString(n):n,"text").responseType("text");return this.entityManagerFactory.send(s).then(function(t){return r.parseCode(i,e,o,t.entity)})},o.prototype.deleteCode=function(t,e){var n=this,r=Object(t)instanceof String?t:t.name,i=new a.DeleteBaqendCode(r,e);return this.entityManagerFactory.send(i).then(function(){return n.parseCode(r,e,!1,null)})},o.prototype.parseCode=function(t,e,n,r){if("validate"!==e)return n?this.stringToFunction(["module","exports"],r):r;var i=this.metamodel.entity(t);return i.validationCode=r,n?i.validationCode:r},o);function o(t,e){D.classCallCheck(this,o),this.metamodel=t,this.entityManagerFactory=e}r(i.prototype,"_metamodel","metamodel"),r(i.prototype,"_parseCode","parseCode"),e.exports=i},{25:25,35:35,74:74}],64:[function(t,e,n){"use strict";var r=t(74),i=Symbol("IsLocked"),o=Symbol("ReadyPromise"),s=(a.prototype.ready=function(t,e){return this[o].then(t,e)},a.prototype.withLock=function(t,e){var n=this;if(this[i])throw new Error("Current operation has not been finished.");try{this[i]=!0;var r=t().then(function(t){return n[i]=!1,t},function(t){throw e||(n[i]=!1),t});return this[o]=r.then(function(){return n},function(t){if(!e)return n;throw t}),r}catch(t){throw e?this[o]=Promise.reject(t):this[i]=!1,t}},D.createClass(a,[{key:"isReady",get:function(){return!this[i]}}]),a);function a(){D.classCallCheck(this,a),this[i]=!1,this[o]=Promise.resolve(this)}r(s.prototype,"_isLocked",i),r(s.prototype,"_readyPromise",o),e.exports=s},{74:74}],65:[function(t,e,n){"use strict";var r=t(35),i=t(74),o=(s.create=function(t){var e=this.prototype;function n(){e.log.apply(n,arguments)}return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n.init(t),n},s.prototype.log=function(){var t=Array.prototype.slice.call(arguments),e=-1===s.LEVELS.indexOf(t[0])?"info":t.shift();if(this.levelIndex>s.LEVELS.indexOf(e))return null;var n="string"==typeof t[0]?this.format(t.shift(),t):"[no message]",r=null;return t.length&&("object"===(void 0===(r=t.pop())?"undefined":D.typeof(r))&&!Array.isArray(r)||(r={data:r}),r instanceof Error&&(r={name:r.name,message:r.message,stack:r.stack,status:r.status,data:r.data})),t.length&&(n+=", "+t.join(", ")),this.logJSON({date:new Date,message:n,level:e,user:this.entityManager.me&&this.entityManager.me.id,data:r})},s.prototype.format=function(t,e){return 0===e.length?t:String(t).replace(s.FORMAT_REGEXP,function(t){if("%%"===t)return"%";if(!e.length)return t;switch(t){case"%s":return String(e.shift());case"%d":return Number(e.shift());case"%j":try{return JSON.stringify(e.shift())}catch(t){return"[Circular]"}default:return t}})},s.prototype.init=function(t){var e=this;this.entityManager=t,this.levelIndex=2,s.LEVELS.forEach(function(t){e[t]=e.log.bind(e,t)})},s.prototype.logJSON=function(t){return this.entityManager.isReady?this.entityManager.send(new r.CreateObject("logs.AppLog",t)):this.entityManager.ready(this.logJSON.bind(this,t))},D.createClass(s,[{key:"level",get:function(){return s.LEVELS[this.levelIndex]},set:function(t){var e=s.LEVELS.indexOf(t);if(-1===e)throw new Error("Unknown logging level "+t);this.levelIndex=e}}]),s);function s(){D.classCallCheck(this,s)}Object.assign(o,{LEVELS:["trace","debug","info","warn","error"],FORMAT_REGEXP:/%[sdj%]/g}),i(o.prototype,"_init","init"),i(o.prototype,"_format","format"),i(o.prototype,"_log","logJSON"),e.exports=o},{35:35,74:74}],66:[function(t,e,n){"use strict";var r,i=t(33),o=t(1),s=t(64),a=t(74),u=(r=s,D.inherits(c,r),c.create=function(t,e){var n=void 0;if(t.isEntity)n=new c(e,t);else{if(!t.isEmbeddable)throw new Error("Illegal type "+t);n={type:t,readAccess:function(){var t=this.root&&this.root._metadata;t&&t.readAccess()},writeAccess:function(){var t=this.root&&this.root._metadata;t&&t.writeAccess()}}}return n},c.get=function(t){return t._metadata},D.createClass(c,[{key:"db",get:function(){return this.entityManager||(this.entityManager=t(5)),this.entityManager},set:function(t){if(this.entityManager)throw new Error("DB has already been set.");this.entityManager=t}},{key:"bucket",get:function(){return this.type.name}},{key:"key",get:function(){var t;return!this.decodedKey&&this.id&&(t=this.id.lastIndexOf("/"),this.decodedKey=decodeURIComponent(this.id.substring(t+1))),this.decodedKey},set:function(t){var e=t+"";if(this.id)throw new Error("The id can't be set twice.");this.id="/db/"+this.bucket+"/"+encodeURIComponent(e),this.decodedKey=e}},{key:"isAttached",get:function(){return!!this.entityManager}},{key:"isAvailable",get:function(){return this.state>c.Type.UNAVAILABLE}},{key:"isPersistent",get:function(){return this.state===c.Type.PERSISTENT}},{key:"isDirty",get:function(){return this.state===c.Type.DIRTY}}]),c.prototype.enable=function(t){this.enabled=t},c.prototype.readAccess=function(){if(this.enabled&&!this.isAvailable)throw new i.PersistentError("This object "+this.id+" is not available.")},c.prototype.writeAccess=function(){if(this.enabled){if(!this.isAvailable)throw new i.PersistentError("This object "+this.id+" is not available.");this.setDirty()}},c.prototype.setUnavailable=function(){this.state=c.Type.UNAVAILABLE},c.prototype.setPersistent=function(){this.state=c.Type.PERSISTENT},c.prototype.setDirty=function(){this.state=c.Type.DIRTY},c.prototype.setRemoved=function(){this.isAvailable&&(this.setDirty(),this.version=null)},c.prototype.getJson=function(t){return this.type.toJsonValue(this,this.root,t)},c.prototype.setJson=function(t,e){this.type.fromJsonValue(this,t,this.root,e)},c);function c(t,e){D.classCallCheck(this,c);var n=D.possibleConstructorReturn(this,r.call(this));return n.root=t,n.state=c.Type.DIRTY,n.enabled=!0,n.id=null,n.version=null,n.type=e,n.acl=new o(n),n}u.Type={UNAVAILABLE:-1,PERSISTENT:0,DIRTY:1},a(u.prototype,"_root","root"),a(u.prototype,"_state","state"),a(u.prototype,"_enabled","enabled"),e.exports=u},{1:1,33:33,5:5,64:64,74:74}],67:[function(t,e,n){"use strict";var a=t(35),r=t(74),i=(o.prototype.get=function(t,e,n,r,i){if(e instanceof Function)return this.get(t,{},e,n,r);if(n instanceof Function)return this.get(t,e,{},n,r);var o=n||{},s=new a.GetBaqendModule(t).addQueryString(e).responseType(o.responseType||null);return this.send(s,r,i)},o.prototype.post=function(t,e,n,r,i){if(n instanceof Function)return this.post(t,e,{},n,r);var o=n||{},s=new a.PostBaqendModule(t).entity(e,o.requestType).mimeType(o.mimeType||null).responseType(o.responseType||null);return this.send(s,r,i)},o.prototype.send=function(t,e,n){return this.entityManager.send(t).then(function(t){return t.entity}).then(e,n)},o);function o(t){D.classCallCheck(this,o),this.entityManager=t}r(i.prototype,"_entityManager","entityManager"),r(i.prototype,"_send","send"),e.exports=i},{35:35,74:74}],68:[function(t,e,n){"use strict";var r=t(74),i=(o.prototype.allRules=function(){return Object.keys(this.rules)},o.prototype.clear=function(){this._metadata&&this._metadata.writeAccess(),this.rules={}},o.prototype.copy=function(t){return this._metadata&&this._metadata.writeAccess(),this.rules=Object.assign({},t.rules),this},o.prototype.isPublicAllowed=function(){var e=this;return!("*"in this.rules||this.allRules().some(function(t){return"allow"===e.rules[t]}))},o.prototype.setPublicAllowed=function(){var e=this;this._metadata&&this._metadata.writeAccess(),this.allRules().forEach(function(t){"allow"===e.rules[t]&&delete e.rules[t]})},o.prototype.getRule=function(t){return this.rules[this.ref(t)]},o.prototype.isAllowed=function(t){return"allow"===this.rules[this.ref(t)]},o.prototype.isDenied=function(t){return"deny"===this.rules[this.ref(t)]},o.prototype.allowAccess=function(){var t=arguments;this._metadata&&this._metadata.writeAccess();for(var e=0;e<t.length;e+=1)this.rules[this.ref(t[e])]="allow";return this},o.prototype.denyAccess=function(){var t=arguments;this._metadata&&this._metadata.writeAccess();for(var e=0;e<t.length;e+=1)this.rules[this.ref(t[e])]="deny";return this},o.prototype.deleteAccess=function(){var t=arguments;this._metadata&&this._metadata.writeAccess();for(var e=0;e<t.length;e+=1)delete this.rules[this.ref(t[e])];return this},o.prototype.toJSON=function(){return Object.assign({},this.rules)},o.prototype.fromJSON=function(t){this.rules=t},o.fromJSON=function(t){var e=new this;return e.fromJSON(t),e},o.prototype.ref=function(t){var e="string"==typeof t?t:t.id;if(0===e.indexOf("/db/User/")||0===e.indexOf("/db/Role/"))return e;throw new TypeError("The given object isn't a user, role or a valid reference.")},o);function o(t){D.classCallCheck(this,o),this.rules={},this._metadata=t}i.BASE_PERMISSIONS=["load","update","delete","query","insert"],r(i.prototype,"_rules","rules"),e.exports=i},{74:74}],69:[function(t,e,n){"use strict";var r=t(9),i=(a.initDevices=function(t){if(t instanceof Set)return t;if(!t||t[Symbol.iterator])return new Set(t);if(t instanceof r)return new Set([t]);throw new Error("Only Sets, Lists and Arrays can be used as devices.")},a.prototype.addDevice=function(t){this.devices||(this.devices=new Set),this.devices.add(t)},a.prototype.toJSON=function(){if(!this.devices||!this.devices.size)throw new Error("Set of devices is empty.");return Object.assign({},this,{devices:Array.from(this.devices,function(t){return t.id})})},a);function a(t,e,n,r,i,o){D.classCallCheck(this,a);var s="string"==typeof r?{sound:r,badge:i,data:o}:r||{};this.devices=a.initDevices(t),this.message=e,this.subject=n,Object.assign(this,s)}e.exports=i},{9:9}],70:[function(t,e,n){"use strict";var r=t(75).hmac,i=t(74),o=(s.parse=function(t){return{val:t,createdAt:1e3*parseInt(t.substring(0,8),16),expireAt:1e3*parseInt(t.substring(8,16),16),sig:t.substring(t.length-40),data:t.substring(0,t.length-40)}},s.create=function(t){return Promise.resolve(new s(t))},D.createClass(s,[{key:"token",get:function(){return this.tokenData?this.tokenData.val:null}}]),s.prototype.saveToken=function(t,e,n){this._saveToken!==s.prototype._saveToken&&(console.log("Using deprecated TokenStorage._saveToken implementation."),this._saveToken(t,e,n))},s.prototype._saveToken=function(){},s.prototype.update=function(t){var e=t?s.parse(t):null;this.tokenData&&e&&this.tokenData.expireAt>e.expireAt||(this.tokenData=e,this.saveToken(this.origin,t,this.temporary))},s.prototype.signPath=function(t){if(this.tokenData){var e=t.split("/").map(encodeURIComponent).join("/");return e+"?BAT="+(this.tokenData.data+r(e+this.tokenData.data,this.tokenData.sig))}return t},s);function s(t,e,n){D.classCallCheck(this,s),this.tokenData=e?s.parse(e):null,this.origin=t,this.temporary=n}i(o.prototype,"_token","tokenData"),i(o.prototype,"_origin","origin");var a,u={},c=(a=o,D.inherits(h,a),h.create=function(t){return Promise.resolve(new h(t,u[t]))},h.prototype.saveToken=function(t,e,n){n||(e?u[t]=e:delete u[t])},h);function h(){return D.classCallCheck(this,h),D.possibleConstructorReturn(this,a.apply(this,arguments))}o.GLOBAL=c;var l,p=(l=o,D.inherits(f,l),f.isAvailable=function(){try{return"undefined"!=typeof localStorage&&(localStorage.setItem("bq_webstorage_test","bq"),localStorage.removeItem("bq_webstorage_test"),!0)}catch(t){return!1}},f.create=function(t){var e=!1,n=localStorage.getItem("BAT:"+t);return n||"undefined"==typeof sessionStorage||(e=!!(n=sessionStorage.getItem("BAT:"+t))),Promise.resolve(new f(t,n,e))},f.prototype.saveToken=function(t,e,n){var r=n?sessionStorage:localStorage;e?r.setItem("BAT:"+t,e):r.removeItem("BAT:"+t)},f);function f(){return D.classCallCheck(this,f),D.possibleConstructorReturn(this,l.apply(this,arguments))}p.isAvailable()&&(o.WEB_STORAGE=p),e.exports=o},{74:74,75:75}],71:[function(t,e,n){"use strict";var r=(D.createClass(i,[{key:"isValid",get:function(){var e=this;return Object.keys(this.fields).every(function(t){return e.fields[t].isValid})}}]),i.prototype.toJSON=function(){var e=this,n={};return Object.keys(this.fields).forEach(function(t){n[t]=e.fields[t].toJSON()}),n},i);function i(){D.classCallCheck(this,i),this.fields={}}e.exports=r},{}],72:[function(t,e,n){"use strict";var i=t(177),r=t(74),o=(s.compile=function(t,e){for(var n=[],r=t.attributes(),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(o.name)}var s=new Function(n,e);return function(e){var t=n.map(function(t){return e[t]});return s.apply({},t)}},s.prototype.is=function(t,e){return t instanceof Function?this.is("is",t):(!1===e(this.value,i)&&this.errors.push(t),this)},D.createClass(s,[{key:"value",get:function(){return this.entity[this.key]}},{key:"isValid",get:function(){return 0===this.errors.length}}]),s.prototype.callMethod=function(t,e,n){var r=n||[];return r.unshift(this.value),!1===i[t].apply(this,r)&&this.errors.push(e),this},s.prototype.toString=function(){return this.value},s.prototype.toJSON=function(){return{isValid:this.isValid,errors:this.errors}},s);function s(t,e){D.classCallCheck(this,s),this.key=t,this.entity=e,this.errors=[]}Object.keys(i).forEach(function(e){"function"==typeof i[e]&&"toString"!==e&&"toDate"!==e&&"extend"!==e&&"init"!==e&&(o.prototype[e]=function(t){return this.callMethod(e,t||e,Array.prototype.slice.call(arguments,t?1:0))})}),r(o.prototype,"_callMethod","callMethod"),r(o.prototype,"_entity","entity"),e.exports=o},{177:177,74:74}],73:[function(t,e,n){"use strict";n.atob=atob},{}],74:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t.constructor.name;Object.defineProperty(t,e,{get:function(){return console.log("Usage of "+r+"."+e+" is deprecated, use "+r+"."+n+" instead."),this[n]},set:function(t){console.log("Usage of "+r+"."+e+" is deprecated, use "+r+"."+n+" instead."),this[n]=t},enumerable:!1})}},{}],75:[function(t,e,n){"use strict";n.hmac=t(170)},{170:170}],76:[function(t,e,n){"use strict";n.isNode=t(77).isNode,n.atob=t(73).atob,n.hmac=t(75).hmac,n.Metadata=t(66),n.Permission=t(68),n.Validator=t(72),n.ValidationResult=t(71),n.Code=t(63),n.Modules=t(67),n.Lockable=t(64),n.Logger=t(65),n.PushMessage=t(69),n.TokenStorage=t(70),n.uuid=t(78).uuid},{63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,75:75,77:77,78:78}],77:[function(t,e,n){"use strict";n.isNode=!1},{}],78:[function(t,e,n){"use strict";n.uuid=t(176)},{176:176}],79:[function(t,e,n){},{}],80:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],81:[function(t,e,n){var r=t(157)("unscopables"),i=Array.prototype;null==i[r]&&t(103)(i,r,{}),e.exports=function(t){i[r][t]=!0}},{103:103,157:157}],82:[function(t,e,n){e.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},{}],83:[function(t,e,n){var r=t(111);e.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},{111:111}],84:[function(t,e,n){var u=t(148),c=t(149),h=t(146);e.exports=function(a){return function(t,e,n){var r,i=u(t),o=c(i.length),s=h(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}}},{146:146,148:148,149:149}],85:[function(t,e,n){var i=t(86),o=t(157)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},{157:157,86:86}],86:[function(t,e,n){var r={}.toString;e.exports=function(t){return r.call(t).slice(8,-1)}},{}],87:[function(t,e,n){"use strict";function s(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n}var a=t(124).f,u=t(123),c=t(137),h=t(91),l=t(82),p=t(99),r=t(114),i=t(116),o=t(140),f=t(93),d=t(119).fastKey,y=t(154),g=f?"_s":"size";e.exports={getConstructor:function(t,o,n,r){var i=t(function(t,e){l(t,i,o,"_i"),t._t=o,t._i=u(null),t._f=void 0,t._l=void 0,t[g]=0,null!=e&&p(e,n,t[r],t)});return c(i.prototype,{clear:function(){for(var t=y(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var e,n,r=y(this,o),i=s(r,t);return i&&(e=i.n,n=i.p,delete r._i[i.i],i.r=!0,n&&(n.n=e),e&&(e.p=n),r._f==i&&(r._f=e),r._l==i&&(r._l=n),r[g]--),!!i},forEach:function(t,e){y(this,o);for(var n,r=h(t,1<arguments.length?e:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!s(y(this,o),t)}}),f&&a(i.prototype,"size",{get:function(){return y(this,o)[g]}}),i},def:function(t,e,n){var r,i,o=s(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:s,setStrong:function(t,n,e){r(t,n,function(t,e){this._t=y(t,n),this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?i(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,i(1))},e?"entries":"values",!e,!0),o(n)}}},{114:114,116:116,119:119,123:123,124:124,137:137,140:140,154:154,82:82,91:91,93:93,99:99}],88:[function(t,e,n){"use strict";var v=t(101),m=t(97),b=t(138),w=t(137),O=t(119),S=t(99),_=t(82),T=t(111),E=t(98),C=t(115),k=t(141),A=t(106);e.exports=function(r,t,e,n,i,o){function s(t){var n=y[t];b(y,t,"delete"==t?function(t){return!(o&&!T(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!T(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!T(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})}var a,u,c,h,l,p=v[r],f=p,d=i?"set":"add",y=f&&f.prototype,g={};return"function"==typeof f&&(o||y.forEach&&!E(function(){(new f).entries().next()}))?(u=(a=new f)[d](o?{}:-0,1)!=a,c=E(function(){a.has(1)}),h=C(function(t){new f(t)}),l=!o&&E(function(){for(var t=new f,e=5;e--;)t[d](e,e);return!t.has(-0)}),h||(((f=t(function(t,e){_(t,f,r);var n=A(new p,t,f);return null!=e&&S(e,i,n[d],n),n})).prototype=y).constructor=f),(c||l)&&(s("delete"),s("has"),i&&s("get")),(l||u)&&s(d),o&&y.clear&&delete y.clear):(f=n.getConstructor(t,r,i,d),w(f.prototype,e),O.NEED=!0),k(f,r),g[r]=f,m(m.G+m.W+m.F*(f!=p),g),o||n.setStrong(f,r,i),f}},{101:101,106:106,111:111,115:115,119:119,137:137,138:138,141:141,82:82,97:97,98:98,99:99}],89:[function(t,e,n){var r=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},{}],90:[function(t,e,n){"use strict";var r=t(124),i=t(136);e.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},{124:124,136:136}],91:[function(t,e,n){var o=t(80);e.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},{80:80}],92:[function(t,e,n){e.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},{}],93:[function(t,e,n){e.exports=!t(98)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{98:98}],94:[function(t,e,n){var r=t(111),i=t(101).document,o=r(i)&&r(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{101:101,111:111}],95:[function(t,e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],96:[function(t,e,n){var a=t(132),u=t(129),c=t(133);e.exports=function(t){var e=a(t),n=u.f;if(n)for(var r,i=n(t),o=c.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e}},{129:129,132:132,133:133}],97:[function(t,e,n){var y=t(101),g=t(89),v=t(103),m=t(138),b=t(91),w="prototype",O=function(t,e,n){var r,i,o,s,a=t&O.F,u=t&O.G,c=t&O.S,h=t&O.P,l=t&O.B,p=u?y:c?y[e]||(y[e]={}):(y[e]||{})[w],f=u?g:g[e]||(g[e]={}),d=f[w]||(f[w]={});for(r in u&&(n=e),n)o=((i=!a&&p&&void 0!==p[r])?p:n)[r],s=l&&i?b(o,y):h&&"function"==typeof o?b(Function.call,o):o,p&&m(p,r,o,t&O.U),f[r]!=o&&v(f,r,s),h&&d[r]!=o&&(d[r]=o)};y.core=g,O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128,e.exports=O},{101:101,103:103,138:138,89:89,91:91}],98:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],99:[function(t,e,n){var p=t(91),f=t(112),d=t(109),y=t(83),g=t(149),v=t(158),m={},b={};(n=e.exports=function(t,e,n,r,i){var o,s,a,u,c=i?function(){return t}:v(t),h=p(n,r,e?2:1),l=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(d(c)){for(o=g(t.length);l<o;l++)if((u=e?h(y(s=t[l])[0],s[1]):h(t[l]))===m||u===b)return u}else for(a=c.call(t);!(s=a.next()).done;)if((u=f(a,h,s.value,e))===m||u===b)return u}).BREAK=m,n.RETURN=b},{109:109,112:112,149:149,158:158,83:83,91:91}],100:[function(t,e,n){e.exports=t(143)("native-function-to-string",Function.toString)},{143:143}],101:[function(t,e,n){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],102:[function(t,e,n){var r={}.hasOwnProperty;e.exports=function(t,e){return r.call(t,e)}},{}],103:[function(t,e,n){var r=t(124),i=t(136);e.exports=t(93)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},{124:124,136:136,93:93}],104:[function(t,e,n){var r=t(101).document;e.exports=r&&r.documentElement},{101:101}],105:[function(t,e,n){e.exports=!t(93)&&!t(98)(function(){return 7!=Object.defineProperty(t(94)("div"),"a",{get:function(){return 7}}).a})},{93:93,94:94,98:98}],106:[function(t,e,n){var o=t(111),s=t(139).set;e.exports=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&o(r)&&s&&s(t,r),t}},{111:111,139:139}],107:[function(t,e,n){e.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],108:[function(t,e,n){var r=t(86);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},{86:86}],109:[function(t,e,n){var r=t(117),i=t(157)("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},{117:117,157:157}],110:[function(t,e,n){var r=t(86);e.exports=Array.isArray||function(t){return"Array"==r(t)}},{86:86}],111:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],112:[function(t,e,n){var o=t(83);e.exports=function(e,t,n,r){try{return r?t(o(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},{83:83}],113:[function(t,e,n){"use strict";var r=t(123),i=t(136),o=t(141),s={};t(103)(s,t(157)("iterator"),function(){return this}),e.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},{103:103,123:123,136:136,141:141,157:157}],114:[function(t,e,n){"use strict";function b(){return this}var w=t(118),O=t(97),S=t(138),_=t(103),T=t(117),E=t(113),C=t(141),k=t(130),A=t(157)("iterator"),x=!([].keys&&"next"in[].keys()),F="values";e.exports=function(t,e,n,r,i,o,s){E(n,e,r);function a(t){if(!x&&t in d)return d[t];switch(t){case"keys":case F:return function(){return new n(this,t)}}return function(){return new n(this,t)}}var u,c,h,l=e+" Iterator",p=i==F,f=!1,d=t.prototype,y=d[A]||d["@@iterator"]||i&&d[i],g=y||a(i),v=i?p?a("entries"):g:void 0,m="Array"==e&&d.entries||y;if(m&&(h=k(m.call(new t)))!==Object.prototype&&h.next&&(C(h,l,!0),w||"function"==typeof h[A]||_(h,A,b)),p&&y&&y.name!==F&&(f=!0,g=function(){return y.call(this)}),w&&!s||!x&&!f&&d[A]||_(d,A,g),T[e]=g,T[l]=b,i)if(u={values:p?g:a(F),keys:o?g:a("keys"),entries:v},s)for(c in u)c in d||S(d,c,u[c]);else O(O.P+O.F*(x||f),e,u);return u}},{103:103,113:113,117:117,118:118,130:130,138:138,141:141,157:157,97:97}],115:[function(t,e,n){var o=t(157)("iterator"),s=!1;try{var r=[7][o]();r.return=function(){s=!0},Array.from(r,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},t(r)}catch(t){}return n}},{157:157}],116:[function(t,e,n){e.exports=function(t,e){return{value:e,done:!!t}}},{}],117:[function(t,e,n){e.exports={}},{}],118:[function(t,e,n){e.exports=!1},{}],119:[function(t,e,n){function r(t){a(t,i,{value:{i:"O"+ ++u,w:{}}})}var i=t(152)("meta"),o=t(111),s=t(102),a=t(124).f,u=0,c=Object.isExtensible||function(){return!0},h=!t(98)(function(){return c(Object.preventExtensions({}))}),l=e.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,i)){if(!c(t))return"F";if(!e)return"E";r(t)}return t[i].i},getWeak:function(t,e){if(!s(t,i)){if(!c(t))return!0;if(!e)return!1;r(t)}return t[i].w},onFreeze:function(t){return h&&l.NEED&&c(t)&&!s(t,i)&&r(t),t}}},{102:102,111:111,124:124,152:152,98:98}],120:[function(t,e,n){var a=t(101),u=t(145).set,c=a.MutationObserver||a.WebKitMutationObserver,h=a.process,l=a.Promise,p="process"==t(86)(h);e.exports=function(){function t(){var t,e;for(p&&(t=h.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()}var n,r,e,i,o,s;return i=p?function(){h.nextTick(t)}:!c||a.navigator&&a.navigator.standalone?l&&l.resolve?(e=l.resolve(void 0),function(){e.then(t)}):function(){u.call(a,t)}:(o=!0,s=document.createTextNode(""),new c(t).observe(s,{characterData:!0}),function(){s.data=o=!o}),function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}},{101:101,145:145,86:86}],121:[function(t,e,n){"use strict";var i=t(80);function r(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=i(n),this.reject=i(r)}e.exports.f=function(t){return new r(t)}},{80:80}],122:[function(t,e,n){"use strict";var p=t(93),f=t(132),d=t(129),y=t(133),g=t(150),v=t(108),i=Object.assign;e.exports=!i||t(98)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=i({},t)[n]||Object.keys(i({},e)).join("")!=r})?function(t,e){for(var n=g(t),r=arguments.length,i=1,o=d.f,s=y.f;i<r;)for(var a,u=v(arguments[i++]),c=o?f(u).concat(o(u)):f(u),h=c.length,l=0;l<h;)a=c[l++],p&&!s.call(u,a)||(n[a]=u[a]);return n}:i},{108:108,129:129,132:132,133:133,150:150,93:93,98:98}],123:[function(r,t,e){function i(){}var o=r(83),s=r(125),a=r(95),u=r(142)("IE_PROTO"),c="prototype",h=function(){var t,e=r(94)("iframe"),n=a.length;for(e.style.display="none",r(104).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h[c][a[n]];return h()};t.exports=Object.create||function(t,e){var n;return null!==t?(i[c]=o(t),n=new i,i[c]=null,n[u]=t):n=h(),void 0===e?n:s(n,e)}},{104:104,125:125,142:142,83:83,94:94,95:95}],124:[function(t,e,n){var r=t(83),i=t(105),o=t(151),s=Object.defineProperty;n.f=t(93)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{105:105,151:151,83:83,93:93}],125:[function(t,e,n){var s=t(124),a=t(83),u=t(132);e.exports=t(93)?Object.defineProperties:function(t,e){a(t);for(var n,r=u(e),i=r.length,o=0;o<i;)s.f(t,n=r[o++],e[n]);return t}},{124:124,132:132,83:83,93:93}],126:[function(t,e,n){var r=t(133),i=t(136),o=t(148),s=t(151),a=t(102),u=t(105),c=Object.getOwnPropertyDescriptor;n.f=t(93)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},{102:102,105:105,133:133,136:136,148:148,151:151,93:93}],127:[function(t,e,n){var r=t(148),i=t(128).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},{128:128,148:148}],128:[function(t,e,n){var r=t(131),i=t(95).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},{131:131,95:95}],129:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],130:[function(t,e,n){var r=t(102),i=t(150),o=t(142)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},{102:102,142:142,150:150}],131:[function(t,e,n){var s=t(102),a=t(148),u=t(84)(!1),c=t(142)("IE_PROTO");e.exports=function(t,e){var n,r=a(t),i=0,o=[];for(n in r)n!=c&&s(r,n)&&o.push(n);for(;e.length>i;)s(r,n=e[i++])&&(~u(o,n)||o.push(n));return o}},{102:102,142:142,148:148,84:84}],132:[function(t,e,n){var r=t(131),i=t(95);e.exports=Object.keys||function(t){return r(t,i)}},{131:131,95:95}],133:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],134:[function(t,e,n){e.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],135:[function(t,e,n){var r=t(83),i=t(111),o=t(121);e.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},{111:111,121:121,83:83}],136:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],137:[function(t,e,n){var i=t(138);e.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},{138:138}],138:[function(t,e,n){var o=t(101),s=t(103),a=t(102),u=t(152)("src"),r=t(100),i="toString",c=(""+r).split(i);t(89).inspectSource=function(t){return r.call(t)},(e.exports=function(t,e,n,r){var i="function"==typeof n;i&&(a(n,"name")||s(n,"name",e)),t[e]!==n&&(i&&(a(n,u)||s(n,u,t[e]?""+t[e]:c.join(String(e)))),t===o?t[e]=n:r?t[e]?t[e]=n:s(t,e,n):(delete t[e],s(t,e,n)))})(Function.prototype,i,function(){return"function"==typeof this&&this[u]||r.call(this)})},{100:100,101:101,102:102,103:103,152:152,89:89}],139:[function(e,t,n){function i(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var r=e(111),o=e(83);t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=e(91)(Function.call,e(126).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return i(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:i}},{111:111,126:126,83:83,91:91}],140:[function(t,e,n){"use strict";var r=t(101),i=t(124),o=t(93),s=t(157)("species");e.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},{101:101,124:124,157:157,93:93}],141:[function(t,e,n){var r=t(124).f,i=t(102),o=t(157)("toStringTag");e.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},{102:102,124:124,157:157}],142:[function(t,e,n){var r=t(143)("keys"),i=t(152);e.exports=function(t){return r[t]||(r[t]=i(t))}},{143:143,152:152}],143:[function(t,e,n){var r=t(89),i=t(101),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:t(118)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},{101:101,118:118,89:89}],144:[function(t,e,n){var i=t(83),o=t(80),s=t(157)("species");e.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||null==(n=i(r)[s])?e:o(n)}},{157:157,80:80,83:83}],145:[function(t,e,n){function r(){var t,e=+this;b.hasOwnProperty(e)&&(t=b[e],delete b[e],t())}function i(t){r.call(t.data)}var o,s,a,u=t(91),c=t(107),h=t(104),l=t(94),p=t(101),f=p.process,d=p.setImmediate,y=p.clearImmediate,g=p.MessageChannel,v=p.Dispatch,m=0,b={},w="onreadystatechange";d&&y||(d=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return b[++m]=function(){c("function"==typeof t?t:Function(t),e)},o(m),m},y=function(t){delete b[t]},"process"==t(86)(f)?o=function(t){f.nextTick(u(r,t,1))}:v&&v.now?o=function(t){v.now(u(r,t,1))}:g?(a=(s=new g).port2,s.port1.onmessage=i,o=u(a.postMessage,a,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(o=function(t){p.postMessage(t+"","*")},p.addEventListener("message",i,!1)):o=w in l("script")?function(t){h.appendChild(l("script"))[w]=function(){h.removeChild(this),r.call(t)}}:function(t){setTimeout(u(r,t,1),0)}),e.exports={set:d,clear:y}},{101:101,104:104,107:107,86:86,91:91,94:94}],146:[function(t,e,n){var r=t(147),i=Math.max,o=Math.min;e.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},{147:147}],147:[function(t,e,n){var r=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(0<t?i:r)(t)}},{}],148:[function(t,e,n){var r=t(108),i=t(92);e.exports=function(t){return r(i(t))}},{108:108,92:92}],149:[function(t,e,n){var r=t(147),i=Math.min;e.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},{147:147}],150:[function(t,e,n){var r=t(92);e.exports=function(t){return Object(r(t))}},{92:92}],151:[function(t,e,n){var i=t(111);e.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},{111:111}],152:[function(t,e,n){var r=0,i=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},{}],153:[function(t,e,n){var r=t(101).navigator;e.exports=r&&r.userAgent||""},{101:101}],154:[function(t,e,n){var r=t(111);e.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},{111:111}],155:[function(t,e,n){var r=t(101),i=t(89),o=t(118),s=t(156),a=t(124).f;e.exports=function(t){var e=i.Symbol||(i.Symbol=!o&&r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},{101:101,118:118,124:124,156:156,89:89}],156:[function(t,e,n){n.f=t(157)},{157:157}],157:[function(t,e,n){var r=t(143)("wks"),i=t(152),o=t(101).Symbol,s="function"==typeof o;(e.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},{101:101,143:143,152:152}],158:[function(t,e,n){var r=t(85),i=t(157)("iterator"),o=t(117);e.exports=t(89).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},{117:117,157:157,85:85,89:89}],159:[function(t,e,n){"use strict";var d=t(91),r=t(97),y=t(150),g=t(112),v=t(109),m=t(149),b=t(90),w=t(158);r(r.S+r.F*!t(115)(function(t){Array.from(t)}),"Array",{from:function(t,e,n){var r,i,o,s,a=y(t),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?e:void 0,l=void 0!==h,p=0,f=w(a);if(l&&(h=d(h,2<c?n:void 0,2)),null==f||u==Array&&v(f))for(i=new u(r=m(a.length));p<r;p++)b(i,p,l?h(a[p],p):a[p]);else for(s=f.call(a),i=new u;!(o=s.next()).done;p++)b(i,p,l?g(s,h,[o.value,p],!0):o.value);return i.length=p,i}})},{109:109,112:112,115:115,149:149,150:150,158:158,90:90,91:91,97:97}],160:[function(t,e,n){"use strict";var r=t(81),i=t(116),o=t(117),s=t(148);e.exports=t(114)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{114:114,116:116,117:117,148:148,81:81}],161:[function(t,e,n){"use strict";var r=t(87),i=t(154);e.exports=t(88)("Map",function(e){return function(t){return e(this,0<arguments.length?t:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},{154:154,87:87,88:88}],162:[function(t,e,n){var r=t(97),i=t(101).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},{101:101,97:97}],163:[function(t,e,n){var r=t(97);r(r.S,"Number",{isNaN:function(t){return t!=t}})},{97:97}],164:[function(t,e,n){var r=t(97);r(r.S+r.F,"Object",{assign:t(122)})},{122:122,97:97}],165:[function(t,e,n){var r=t(97);r(r.S,"Object",{setPrototypeOf:t(139).set})},{139:139,97:97}],166:[function(n,t,e){"use strict";function r(){}function l(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e}function i(h,e){var n;h._n||(h._n=!0,n=h._c,S(function(){for(var u=h._v,c=1==h._s,t=0;n.length>t;)!function(t){var e,n,r,i=c?t.ok:t.fail,o=t.resolve,s=t.reject,a=t.domain;try{i?(c||(2==h._h&&L(h),h._h=1),!0===i?e=u:(a&&a.enter(),e=i(u),a&&(a.exit(),r=!0)),e===t.promise?s(A("Promise-chain cycle")):(n=l(e))?n.call(e,o,s):o(e)):s(u)}catch(t){a&&!r&&a.exit(),s(t)}}(n[t++]);h._c=[],h._n=!1,e&&!h._h&&M(h)}))}function o(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),i(e,!0))}var s,a,u,c,h=n(118),p=n(101),f=n(91),d=n(85),y=n(97),g=n(111),v=n(80),m=n(82),b=n(99),w=n(144),O=n(145).set,S=n(120)(),_=n(121),T=n(134),E=n(153),C=n(135),k="Promise",A=p.TypeError,x=p.process,F=x&&x.versions,P=F&&F.v8||"",R=p[k],D="process"==d(x),j=a=_.f,N=!!function(){try{var t=R.resolve(1),e=(t.constructor={})[n(157)("species")]=function(t){t(r,r)};return(D||"function"==typeof PromiseRejectionEvent)&&t.then(r)instanceof e&&0!==P.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(t){}}(),M=function(o){O.call(p,function(){var t,e,n,r=o._v,i=I(o);if(i&&(t=T(function(){D?x.emit("unhandledRejection",r,o):(e=p.onunhandledrejection)?e({promise:o,reason:r}):(n=p.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=D||I(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},I=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(e){O.call(p,function(){var t;D?x.emit("rejectionHandled",e):(t=p.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw A("Promise can't be resolved itself");(n=l(t))?S(function(){var e={_w:r,_d:!1};try{n.call(t,f(U,e,1),f(o,e,1))}catch(t){o.call(e,t)}}):(r._v=t,r._s=1,i(r,!1))}catch(t){o.call({_w:r,_d:!1},t)}}};N||(R=function(t){m(this,R,k,"_h"),v(t),s.call(this);try{t(f(U,this,1),f(o,this,1))}catch(t){o.call(this,t)}},(s=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(137)(R.prototype,{then:function(t,e){var n=j(w(this,R));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=D?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&i(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),u=function(){var t=new s;this.promise=t,this.resolve=f(U,t,1),this.reject=f(o,t,1)},_.f=j=function(t){return t===R||t===c?new u:a(t)}),y(y.G+y.W+y.F*!N,{Promise:R}),n(141)(R,k),n(140)(k),c=n(89)[k],y(y.S+y.F*!N,k,{reject:function(t){var e=j(this);return(0,e.reject)(t),e.promise}}),y(y.S+y.F*(h||!N),k,{resolve:function(t){return C(h&&this===c?R:this,t)}}),y(y.S+y.F*!(N&&n(115)(function(t){R.all(t).catch(r)})),k,{all:function(t){var s=this,e=j(s),a=e.resolve,u=e.reject,n=T(function(){var r=[],i=0,o=1;b(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,s.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||a(r))},u)}),--o||a(r)});return n.e&&u(n.v),e.promise},race:function(t){var e=this,n=j(e),r=n.reject,i=T(function(){b(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},{101:101,111:111,115:115,118:118,120:120,121:121,134:134,135:135,137:137,140:140,141:141,144:144,145:145,153:153,157:157,80:80,82:82,85:85,89:89,91:91,97:97,99:99}],167:[function(t,e,n){"use strict";var r=t(87),i=t(154);e.exports=t(88)("Set",function(e){return function(t){return e(this,0<arguments.length?t:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},{154:154,87:87,88:88}],168:[function(t,e,n){"use strict";function r(t){var e=H[t]=F(U[q]);return e._k=t,e}function i(t,e){T(t);for(var n,r=S(e=k(e)),i=0,o=r.length;i<o;)et(t,n=r[i++],e[n]);return t}function o(t){var e=G.call(this,t=A(t,!0));return!(this===Q&&h(H,t)&&!h(W,t))&&(!(e||!h(this,t)||!h(H,t)||h(this,$)&&this[$][t])||e)}function s(t,e){if(t=k(t),e=A(e,!0),t!==Q||!h(H,e)||h(W,e)){var n=M(t,e);return!n||!h(H,e)||h(t,$)&&t[$][e]||(n.enumerable=!0),n}}function a(t){for(var e,n=L(k(t)),r=[],i=0;n.length>i;)h(H,e=n[i++])||e==$||e==d||r.push(e);return r}function u(t){for(var e,n=t===Q,r=L(n?W:k(t)),i=[],o=0;r.length>o;)!h(H,e=r[o++])||n&&!h(Q,e)||i.push(H[e]);return i}var c=t(101),h=t(102),l=t(93),p=t(97),f=t(138),d=t(119).KEY,y=t(98),g=t(143),v=t(141),m=t(152),b=t(157),w=t(156),O=t(155),S=t(96),_=t(110),T=t(83),E=t(111),C=t(150),k=t(148),A=t(151),x=t(136),F=t(123),P=t(127),R=t(126),D=t(129),j=t(124),N=t(132),M=R.f,I=j.f,L=P.f,U=c.Symbol,B=c.JSON,J=B&&B.stringify,q="prototype",$=b("_hidden"),V=b("toPrimitive"),G={}.propertyIsEnumerable,z=g("symbol-registry"),H=g("symbols"),W=g("op-symbols"),Q=Object[q],Z="function"==typeof U&&!!D.f,K=c.QObject,Y=!K||!K[q]||!K[q].findChild,X=l&&y(function(){return 7!=F(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(Q,e);r&&delete Q[e],I(t,e,n),r&&t!==Q&&I(Q,e,r)}:I,tt=Z&&"symbol"==typeof U.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof U},et=function(t,e,n){return t===Q&&et(W,e,n),T(t),e=A(e,!0),T(n),h(H,e)?(n.enumerable?(h(t,$)&&t[$][e]&&(t[$][e]=!1),n=F(n,{enumerable:x(0,!1)})):(h(t,$)||I(t,$,x(1,{})),t[$][e]=!0),X(t,e,n)):I(t,e,n)};Z||(f((U=function(t){if(this instanceof U)throw TypeError("Symbol is not a constructor!");var e=m(0<arguments.length?t:void 0),n=function(t){this===Q&&n.call(W,t),h(this,$)&&h(this[$],e)&&(this[$][e]=!1),X(this,e,x(1,t))};return l&&Y&&X(Q,e,{configurable:!0,set:n}),r(e)})[q],"toString",function(){return this._k}),R.f=s,j.f=et,t(128).f=P.f=a,t(133).f=o,D.f=u,l&&!t(118)&&f(Q,"propertyIsEnumerable",o,!0),w.f=function(t){return r(b(t))}),p(p.G+p.W+p.F*!Z,{Symbol:U});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)b(nt[rt++]);for(var it=N(b.store),ot=0;it.length>ot;)O(it[ot++]);p(p.S+p.F*!Z,"Symbol",{for:function(t){return h(z,t+="")?z[t]:z[t]=U(t)},keyFor:function(t){if(!tt(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),p(p.S+p.F*!Z,"Object",{create:function(t,e){return void 0===e?F(t):i(F(t),e)},defineProperty:et,defineProperties:i,getOwnPropertyDescriptor:s,getOwnPropertyNames:a,getOwnPropertySymbols:u});var st=y(function(){D.f(1)});p(p.S+p.F*st,"Object",{getOwnPropertySymbols:function(t){return D.f(C(t))}}),B&&p(p.S+p.F*(!Z||y(function(){var t=U();return"[null]"!=J([t])||"{}"!=J({a:t})||"{}"!=J(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=e=r[1],(E(e)||void 0!==t)&&!tt(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!tt(e))return e}),r[1]=e,J.apply(B,r)}}),U[q][V]||t(103)(U[q],V,U[q].valueOf),v(U,"Symbol"),v(Math,"Math",!0),v(c.JSON,"JSON",!0)},{101:101,102:102,103:103,110:110,111:111,118:118,119:119,123:123,124:124,126:126,127:127,128:128,129:129,132:132,133:133,136:136,138:138,141:141,143:143,148:148,150:150,151:151,152:152,155:155,156:156,157:157,83:83,93:93,96:96,97:97,98:98}],169:[function(t,e,n){var r,i;r=this,i=function(){var h,n,t,e,r,l,i,o,s,a,u,c,p=p||(h=Math,n=Object.create||function(t){var e;return f.prototype=t,e=new f,f.prototype=null,e},e=(t={}).lib={},r=e.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=e.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||o).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=h.ceil(e/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4){var r=function(e){var e=e,n=987654321,r=4294967295;return function(){var t=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return t/=4294967296,(t+=.5)*(.5<h.random()?1:-1)}}(4294967296*(i||h.random())),i=987654071*r();e.push(4294967296*r()|0)}return new l.init(e,t)}}),i=t.enc={},o=i.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new l.init(n,e/2)}},s=i.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new l.init(n,e)}},a=i.Utf8={stringify:function(t){try{return decodeURIComponent(escape(s.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return s.parse(unescape(encodeURIComponent(t)))}},u=e.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=a.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,r=e.sigBytes,i=this.blockSize,o=r/(4*i),s=(o=t?h.ceil(o):h.max((0|o)-this._minBufferSize,0))*i,a=h.min(4*s,r);if(s){for(var u=0;u<s;u+=i)this._doProcessBlock(n,u);var c=n.splice(0,s);e.sigBytes-=a}return new l.init(c,a)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),e.Hasher=u.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,e){return new n.init(e).finalize(t)}},_createHmacHelper:function(n){return function(t,e){return new c.HMAC.init(n,e).finalize(t)}}}),c=t.algo={},t);function f(){}return p},"object"==typeof n?e.exports=n=i():r.CryptoJS=i()},{}],170:[function(t,e,n){var r,i;r=this,i=function(t){return t.HmacSHA1},"object"==typeof n?e.exports=n=i(t(169),t(172),t(171)):i(r.CryptoJS)},{169:169,171:171,172:172}],171:[function(t,e,n){var r,i;r=this,i=function(t){var e,c;e=t.lib.Base,c=t.enc.Utf8,t.algo.HMAC=e.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=c.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),s=i.words,a=o.words,u=0;u<n;u++)s[u]^=1549556828,a[u]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})},"object"==typeof n?e.exports=n=i(t(169)):i(r.CryptoJS)},{169:169}],172:[function(t,e,n){var r,i;r=this,i=function(t){var e,n,r,i,o,l,s;return n=(e=t).lib,r=n.WordArray,i=n.Hasher,o=e.algo,l=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n,r=this._hash.words,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=0;c<80;c++){c<16?l[c]=0|t[e+c]:(n=l[c-3]^l[c-8]^l[c-14]^l[c-16],l[c]=n<<1|n>>>31);var h=(i<<5|i>>>27)+u+l[c];h+=c<20?1518500249+(o&s|~o&a):c<40?1859775393+(o^s^a):c<60?(o&s|o&a|s&a)-1894007588:(o^s^a)-899497514,u=a,a=s,s=o<<30|o>>>2,o=i,i=h}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(64+r>>>9<<4)]=Math.floor(n/4294967296),e[15+(64+r>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=i._createHelper(s),e.HmacSHA1=i._createHmacHelper(s),t.SHA1},"object"==typeof n?e.exports=n=i(t(169)):i(r.CryptoJS)},{169:169}],173:[function(t,e,n){"use strict";function r(t,e){if("function"!=typeof t)throw new TypeError("argument fn must be a function");return t}function i(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("argument obj must be object");var r=Object.getOwnPropertyDescriptor(t,e);if(!r)throw new TypeError("must call property on owner object");if(!r.configurable)throw new TypeError("property must be configurable")}e.exports=function(t){if(!t)throw new TypeError("argument namespace is required");function e(t){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=r,e.property=i,e}},{}],174:[function(t,e,n){for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=function(t,e){var n=e||0;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}},{}],175:[function(t,e,n){var r,i,o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);o?(r=new Uint8Array(16),e.exports=function(){return o(r),r}):(i=new Array(16),e.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i})},{}],176:[function(t,e,n){var s=t(175),a=t(174);e.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var o=0;o<16;++o)e[r+o]=i[o];return e||a(i)}},{174:174,175:175}],177:[function(B,J,e){!function(t){void 0!==e&&void 0!==J?J.exports=t():this.validator=t()}(function(h){"use strict";h={version:"4.9.0",coerce:!0};for(var t,l=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,f=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,d=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,y=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,a=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,u=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,s=/^(?:[0-9]{9}X|[0-9]{10})$/,c=/^(?:[0-9]{13})$/,e=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,g=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,v=/^[0-9A-F]{1,4}$/i,r={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},n={"en-US":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"es-ES":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[--]+$/i},i={"en-US":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9--]+$/i},o=["AU","GB","HK","IN","NZ","ZA","ZM"],m=0;m<o.length;m++)n[t="en-"+o[m]]=n["en-US"],i[t]=i["en-US"];var b=/^[-+]?[0-9]+$/,w=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,O=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,S=/^[0-9A-F]+$/i,_=/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,T=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,E=/^[\x00-\x7F]+$/,C=/[^\x00-\x7F]/,k=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,A=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,x=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,F=/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,P={"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"de-DE":/^(\+?49[ \.\-])?([\(]{1}[0-9]{1,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,"el-GR":/^(\+?30)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"en-IN":/^(\+?91|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)2\d{7,9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5)?|50)\s?(\d\s?){4,8}\d$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pt-BR":/^(\+?55|0)\-?[1-9]{2}\-?[2-9]{1}\d{3,4}\-?\d{4}$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"vi-VN":/^(\+?84|0)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,"zh-CN":/^(\+?0?86\-?)?((13\d|14[57]|15[^4,\D]|17[678]|18\d)\d{8}|170[059]\d{7})$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/},R=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;h.extend=function(t,e){h[t]=function(){var t=Array.prototype.slice.call(arguments);return t[0]=h.toString(t[0]),e.apply(h,t)}},h.init=function(){for(var t in h)"function"==typeof h[t]&&"toString"!==t&&"toDate"!==t&&"extend"!==t&&"init"!==t&&"isServerSide"!==t&&h.extend(t,h[t])},h.isServerSide=function(){return"object"==typeof J&&J&&"object"==typeof J.exports&&"object"==typeof process&&"function"==typeof B};var D=null;h.deprecation=function(t){if(null===D){if(!h.isServerSide())return;D=B(173)("validator")}D(t)},h.toString=function(t){if("string"!=typeof t){if(!h.coerce)throw new Error("this library validates strings only");h.deprecation("you tried to validate a "+typeof t+" but this library (validator.js) validates strings only. Please update your code as this will be an error soon.")}return"object"==typeof t&&null!==t?t="function"==typeof t.toString?t.toString():"[object Object]":(null==t||isNaN(t)&&!t.length)&&(t=""),""+t},h.toDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)?t:(t=Date.parse(t),isNaN(t)?null:new Date(t))},h.toFloat=function(t){return parseFloat(t)},h.toInt=function(t,e){return parseInt(t,e||10)},h.toBoolean=function(t,e){return e?"1"===t||"true"===t:"0"!==t&&"false"!==t&&""!==t},h.equals=function(t,e){return t===h.toString(e)},h.contains=function(t,e){return 0<=t.indexOf(h.toString(e))};var j={allow_display_name:!(h.matches=function(t,e,n){return"[object RegExp]"!==Object.prototype.toString.call(e)&&(e=new RegExp(e,n)),e.test(t)}),allow_utf8_local_part:!0,require_tld:!0},N={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!(h.isEmail=function(t,e){var n;!(e=U(e,j)).allow_display_name||(n=t.match(y))&&(t=n[1]);var r=t.split("@"),i=r.pop(),o=r.join("@"),s=i.toLowerCase();if("gmail.com"!==s&&"googlemail.com"!==s||(o=o.replace(/\./g,"").toLowerCase()),!h.isByteLength(o,{max:64})||!h.isByteLength(i,{max:256}))return!1;if(!h.isFQDN(i,{require_tld:e.require_tld}))return!1;if('"'===o[0])return o=o.slice(1,o.length-1),e.allow_utf8_local_part?d.test(o):p.test(o);for(var a=e.allow_utf8_local_part?f:l,u=o.split("."),c=0;c<u.length;c++)if(!a.test(u[c]))return!1;return!0}),require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};h.isURL=function(t,e){if(!t||2083<=t.length||/\s/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;var n,r,i,o,s,a;if(e=U(e,N),1<(a=t.split("://")).length){if(n=a.shift(),e.require_valid_protocol&&-1===e.protocols.indexOf(n))return!1}else{if(e.require_protocol)return!1;e.allow_protocol_relative_urls&&"//"===t.substr(0,2)&&(a[0]=t.substr(2))}return!(1<(a=(t=(a=(t=(a=(t=(a=(t=a.join("://")).split("#")).shift()).split("?")).shift()).split("/")).shift()).split("@")).length&&0<=(r=a.shift()).indexOf(":")&&2<r.split(":").length)&&(i=(a=a.join("@").split(":")).shift(),!(a.length&&(s=a.join(":"),o=parseInt(s,10),!/^[0-9]+$/.test(s)||o<=0||65535<o))&&(!(!h.isIP(i)&&!h.isFQDN(i,e)&&"localhost"!==i)&&((!e.host_whitelist||-1!==e.host_whitelist.indexOf(i))&&(!e.host_blacklist||-1===e.host_blacklist.indexOf(i)))))},h.isMACAddress=function(t){return e.test(t)};var M={require_tld:!0,allow_underscores:!(h.isIP=function(t,e){if(!(e=e?e+"":""))return h.isIP(t,4)||h.isIP(t,6);if("4"===e)return!!g.test(t)&&t.split(".").sort(function(t,e){return t-e})[3]<=255;if("6"!==e)return!1;var n=t.split(":"),r=!1,i=h.isIP(n[n.length-1],4),o=i?7:8;if(n.length>o)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(n.shift(),n.shift(),r=!0):"::"===t.substr(t.length-2)&&(n.pop(),n.pop(),r=!0);for(var s=0;s<n.length;++s)if(""===n[s]&&0<s&&s<n.length-1){if(r)return!1;r=!0}else if(!(i&&s==n.length-1||v.test(n[s])))return!1;return r?1<=n.length:n.length===o}),allow_trailing_dot:!1};h.isFQDN=function(t,e){(e=U(e,M)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));var n=t.split(".");if(e.require_tld){var r=n.pop();if(!n.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1}for(var i,o=0;o<n.length;o++){if(i=n[o],e.allow_underscores){if(0<=i.indexOf("__"))return!1;i=i.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(i))return!1;if(/[\uff01-\uff5e]/.test(i))return!1;if("-"===i[0]||"-"===i[i.length-1])return!1}return!0},h.isBoolean=function(t){return 0<=["true","false","1","0"].indexOf(t)},h.isAlpha=function(t,e){if((e=e||"en-US")in n)return n[e].test(t);throw new Error("Invalid locale '"+e+"'")},h.isAlphanumeric=function(t,e){if((e=e||"en-US")in i)return i[e].test(t);throw new Error("Invalid locale '"+e+"'")},h.isNumeric=function(t){return b.test(t)},h.isDecimal=function(t){return""!==t&&_.test(t)},h.isHexadecimal=function(t){return S.test(t)},h.isHexColor=function(t){return T.test(t)},h.isLowercase=function(t){return t===t.toLowerCase()},h.isUppercase=function(t){return t===t.toUpperCase()},h.isInt=function(t,e){return e=e||{},w.test(t)&&(!e.hasOwnProperty("min")||t>=e.min)&&(!e.hasOwnProperty("max")||t<=e.max)},h.isFloat=function(t,e){return e=e||{},""!==t&&"."!==t&&(O.test(t)&&(!e.hasOwnProperty("min")||t>=e.min)&&(!e.hasOwnProperty("max")||t<=e.max))},h.isDivisibleBy=function(t,e){return h.toFloat(t)%parseInt(e,10)==0},h.isNull=function(t){return 0===t.length},h.isLength=function(t,e){var n,r="object"==typeof e?(n=e.min||0,e.max):(n=e,arguments[2]),i=t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],o=t.length-i.length;return n<=o&&(void 0===r||o<=r)},h.isByteLength=function(t,e){var n,r="object"==typeof e?(n=e.min||0,e.max):(n=e,arguments[2]),i=encodeURI(t).split(/%..|./).length-1;return n<=i&&(void 0===r||i<=r)},h.isUUID=function(t,e){var n=r[e||"all"];return n&&n.test(t)},h.isDate=function(t){var e=new Date(Date.parse(t));if(isNaN(e))return!1;var n,r=function(t){var e,n,r,i,o=t.match(R);if(o){if(!(e=o[21]))return o[12]?null:0;if("z"===e||"Z"===e)return 0;n=o[22],i=-1!==e.indexOf(":")?(r=parseInt(o[23]),parseInt(o[24])):(r=0,parseInt(o[23]))}else{if(!(e=(t=t.toLowerCase()).match(/(?:\s|gmt\s*)(-|\+)(\d{1,4})(\s|$)/)))return-1!==t.indexOf("gmt")?0:null;n=e[1];var s=e[2];3===s.length&&(s="0"+s),i=s.length<=2?(r=0,parseInt(s)):(r=parseInt(s.slice(0,2)),parseInt(s.slice(2,4)))}return(60*r+i)*("-"===n?1:-1)}(t);null!==r&&(n=e.getTimezoneOffset()-r,e=new Date(e.getTime()+6e4*n));var i,o,s=String(e.getDate()),a=t.match(/(^|[^:\d])[23]\d([^:\d]|$)/g);return!a||(i=a.map(function(t){return t.match(/\d+/g)[0]}).join("/"),o=String(e.getFullYear()).slice(-2),i===s||i===o||(i===s+"/"+o||i===o+"/"+s))},h.isAfter=function(t,e){var n=h.toDate(e||new Date),r=h.toDate(t);return!!(r&&n&&n<r)},h.isBefore=function(t,e){var n=h.toDate(e||new Date),r=h.toDate(t);return!!(r&&n&&r<n)},h.isIn=function(t,e){var n;if("[object Array]"!==Object.prototype.toString.call(e))return"object"==typeof e?e.hasOwnProperty(t):!(!e||"function"!=typeof e.indexOf)&&0<=e.indexOf(t);var r=[];for(n in e)r[n]=h.toString(e[n]);return 0<=r.indexOf(t)},h.isWhitelisted=function(t,e){for(var n=t.length-1;0<=n;n--)if(-1===e.indexOf(t[n]))return!1;return!0},h.isCreditCard=function(t){var e=t.replace(/[^0-9]+/g,"");if(!a.test(e))return!1;for(var n,r,i,o=0,s=e.length-1;0<=s;s--)n=e.substring(s,s+1),r=parseInt(n,10),o+=i&&10<=(r*=2)?r%10+1:r,i=!i;return!(o%10!=0||!e)},h.isISIN=function(t){if(!u.test(t))return!1;for(var e,n,r=t.replace(/[A-Z]/g,function(t){return parseInt(t,36)}),i=0,o=!0,s=r.length-2;0<=s;s--)e=r.substring(s,s+1),n=parseInt(e,10),i+=o&&10<=(n*=2)?n+1:n,o=!o;return parseInt(t.substr(t.length-1),10)===(1e4-i)%10},h.isISBN=function(t,e){if(!(e=e?e+"":""))return h.isISBN(t,10)||h.isISBN(t,13);var n=t.replace(/[\s-]+/g,""),r=0;if("10"===e){if(!s.test(n))return!1;for(o=0;o<9;o++)r+=(o+1)*n.charAt(o);if("X"===n.charAt(9)?r+=100:r+=10*n.charAt(9),r%11==0)return!!n}else if("13"===e){if(!c.test(n))return!1;for(var i=[1,3],o=0;o<12;o++)r+=i[o%2]*n.charAt(o);if(n.charAt(12)-(10-r%10)%10==0)return!!n}return!1};var I={symbol:"$",require_symbol:!(h.isMobilePhone=function(t,e){return e in P&&P[e].test(t)}),allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};h.isCurrency=function(t,e){return function(t){var e="(\\"+t.symbol.replace(/\./g,"\\.")+")"+(t.require_symbol?"":"?"),n="[1-9]\\d{0,2}(\\"+t.thousands_separator+"\\d{3})*",r="("+["0","[1-9]\\d*",n].join("|")+")?",i="(\\"+t.decimal_separator+"\\d{2})?",o=r+i;t.allow_negatives&&!t.parens_for_negatives&&(t.negative_sign_after_digits?o+="-?":t.negative_sign_before_digits&&(o="-?"+o));t.allow_negative_sign_placeholder?o="( (?!\\-))?"+o:t.allow_space_after_symbol?o=" ?"+o:t.allow_space_after_digits&&(o+="( (?!$))?");t.symbol_after_digits?o+=e:o=e+o;t.allow_negatives&&(t.parens_for_negatives?o="(\\("+o+"\\)|"+o+")":t.negative_sign_before_digits||t.negative_sign_after_digits||(o="-?"+o));return new RegExp("^(?!-? )(?=.*\\d)"+o+"$")}(e=U(e,I)).test(t)},h.isJSON=function(t){try{var e=JSON.parse(t);return!!e&&"object"==typeof e}catch(t){}return!1},h.isMultibyte=function(t){return C.test(t)},h.isAscii=function(t){return E.test(t)},h.isFullWidth=function(t){return k.test(t)},h.isHalfWidth=function(t){return A.test(t)},h.isVariableWidth=function(t){return k.test(t)&&A.test(t)},h.isSurrogatePair=function(t){return x.test(t)},h.isBase64=function(t){return F.test(t)},h.isMongoId=function(t){return h.isHexadecimal(t)&&24===t.length},h.isISO8601=function(t){return R.test(t)},h.ltrim=function(t,e){var n=e?new RegExp("^["+e+"]+","g"):/^\s+/g;return t.replace(n,"")},h.rtrim=function(t,e){var n=e?new RegExp("["+e+"]+$","g"):/\s+$/g;return t.replace(n,"")},h.trim=function(t,e){var n=e?new RegExp("^["+e+"]+|["+e+"]+$","g"):/^\s+|\s+$/g;return t.replace(n,"")},h.escape=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},h.stripLow=function(t,e){var n=e?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return h.blacklist(t,n)},h.whitelist=function(t,e){return t.replace(new RegExp("[^"+e+"]+","g"),"")},h.blacklist=function(t,e){return t.replace(new RegExp("["+e+"]+","g"),"")};var L={lowercase:!0,remove_dots:!0,remove_extension:!0};function U(t,e){for(var n in t=t||{},e)void 0===t[n]&&(t[n]=e[n]);return t}return h.normalizeEmail=function(t,e){if(e=U(e,L),!h.isEmail(t))return!1;var n=t.split("@",2);if(n[1]=n[1].toLowerCase(),"gmail.com"===n[1]||"googlemail.com"===n[1]){if(e.remove_extension&&(n[0]=n[0].split("+")[0]),e.remove_dots&&(n[0]=n[0].replace(/\./g,"")),!n[0].length)return!1;n[0]=n[0].toLowerCase(),n[1]="gmail.com"}else e.lowercase&&(n[0]=n[0].toLowerCase());return n.join("@")},h.init(),h})},{173:173}],178:[function(t,e,n){"use strict";t(167),t(161),Object.assign||t(164),Object.setPrototypeOf||t(165),"undefined"==typeof Promise&&t(166),Array.from||(t(159),t(160)),Number.isNaN||t(163),Number.isFinite||t(162),"undefined"==typeof Symbol&&t(168)},{159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168}]},{},[34])(34)});