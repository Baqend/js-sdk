/*! baqend 2.3.0 | Copyright (c) 2015 Baqend GmbH | MIT */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.DB=a()}}(function(){var a,b={};return b.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.defaults=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a},b.inherits=function(a,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):b.defaults(a,c))},b.possibleConstructorReturn=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,c,d){"use strict";var e=a(66),f=function(){function a(c){b.classCallCheck(this,a),this.read=new e(c),this.write=new e(c)}return a.prototype.clear=function(){this.read.clear(),this.write.clear()},a.prototype.copy=function(a){return this.read.copy(a.read),this.write.copy(a.write),this},a.prototype.isPublicReadAllowed=function(){return this.read.isPublicAllowed()},a.prototype.setPublicReadAllowed=function(){return this.read.setPublicAllowed()},a.prototype.isReadAllowed=function(a){return this.read.isAllowed(a)},a.prototype.isReadDenied=function(a){return this.read.isDenied(a)},a.prototype.allowReadAccess=function(a){return e.prototype.allowAccess.apply(this.read,arguments),this},a.prototype.denyReadAccess=function(a){return e.prototype.denyAccess.apply(this.read,arguments),this},a.prototype.deleteReadAccess=function(a){return e.prototype.deleteAccess.apply(this.read,arguments),this},a.prototype.isPublicWriteAllowed=function(){return this.write.isPublicAllowed()},a.prototype.setPublicWriteAllowed=function(){return this.write.setPublicAllowed()},a.prototype.isWriteAllowed=function(a){return this.write.isAllowed(a)},a.prototype.isWriteDenied=function(a){return this.write.isDenied(a)},a.prototype.allowWriteAccess=function(a){return e.prototype.allowAccess.apply(this.write,arguments),this},a.prototype.denyWriteAccess=function(a){return e.prototype.denyAccess.apply(this.write,arguments),this},a.prototype.deleteWriteAccess=function(a){return e.prototype.deleteAccess.apply(this.write,arguments),this},a.prototype.toJSON=function(){return{read:this.read,write:this.write}},a.prototype.fromJSON=function(a){this.read.fromJSON(a.read||{}),this.write.fromJSON(a.write||{})},a}();c.exports=f},{66:66}],2:[function(a,c,d){"use strict";var e=a(36),f=a(34),g=a(20),h=a(71),i=a(60),j=a(19),k=a(4),l=a(64),m=a(25),n=a(21),o=m.StatusCode,p=function(a){function c(d){b.classCallCheck(this,c);var e=b.possibleConstructorReturn(this,a.call(this));return e.log=h.Logger.create(e),e._connector=null,e._entities=null,e.entityManagerFactory=d,e.metamodel=d.metamodel,e.code=d.code,e.modules=null,e.me=null,e.isDeviceRegistered=!1,e.tokenStorage=null,e.bloomFilter=null,e.cacheWhiteList=null,e.cacheBlackList=null,e.bloomFilterRefresh=60,e._bloomFilterLock=new h.Lockable,e}return b.inherits(c,a),b.createClass(c,[{key:"isOpen",get:function(){return!!this._connector}},{key:"token",get:function(){return this.tokenStorage.token},set:function(a){this.tokenStorage.update(a)}},{key:"isCachingDisabled",get:function(){return!this.bloomFilter}}]),c.prototype.connected=function(a,b,c){this._connector=a,this.tokenStorage=c,this.bloomFilterRefresh=this.entityManagerFactory.staleness,this._entities={},this.File=g.FileFactory.create(this),this._createObjectFactory(this.metamodel.embeddables),this._createObjectFactory(this.metamodel.entities),this.transaction=new k(this),this.modules=new h.Modules(this,a),b&&(this.isDeviceRegistered=!!b.device,b.user&&b.token==c.token&&this._updateUser(b.user,!0),this.bloomFilterRefresh>0&&b.bloomFilter&&h.atob&&!h.isNode&&this.updateBloomFilter(b.bloomFilter))},c.prototype._createObjectFactory=function(a){Object.keys(a).forEach(function(a){var b=this.metamodel.managedType(a),c=b.name;this[c]?(b.typeConstructor=this[c],Object.defineProperty(this,c,{value:b.createObjectFactory(this)})):Object.defineProperty(this,c,{get:function(){return Object.defineProperty(this,c,{value:b.createObjectFactory(this)}),this[c]},set:function(a){b.typeConstructor=a},configurable:!0})},this)},c.prototype._sendOverSocket=function(a){a.token=this.token,this._connector.sendOverSocket(a)},c.prototype._subscribe=function(a,b){this._connector.subscribe(a,b)},c.prototype._unsubscribe=function(a,b){this._connector.unsubscribe(a,b)},c.prototype.send=function(a){var b=this;return a.tokenStorage=this.tokenStorage,this._connector.send(a).catch(function(a){throw a.status==o.BAD_CREDENTIALS&&b._logout(),a})},c.prototype.getReference=function(a,b){var c,d;b?(d=this.metamodel.entity(a),c=0==b.indexOf("/db/")?b:d.ref+"/"+encodeURIComponent(b)):(c=a,d=this.metamodel.entity(c.substring(0,c.indexOf("/",4))));var e=this._entities[c];if(!e){e=d.create();var f=l.get(e);f.id=c,f.setUnavailable(),this._attach(e)}return e},c.prototype.createQueryBuilder=function(a){return new i.Builder(this,a)},c.prototype.clear=function(){this._entities={}},c.prototype.close=function(){return this._connector=null,this.clear()},c.prototype.contains=function(a){return!!a&&this._entities[a.id]===a},c.prototype.containsById=function(a){return!(!a||!this._entities[a.id])},c.prototype.detach=function(a){var b=this,c=l.get(a);return c.withLock(function(){return b.removeReference(a),Promise.resolve(a)})},c.prototype.resolveDepth=function(a,b){var c=this;if(!b||!b.depth)return Promise.resolve(a);b.resolved=b.resolved||[];var d=[],e=Object.assign({},b,{depth:b.depth===!0||b.depth-1});return this.getSubEntities(a,1).forEach(function(a){null==a||~b.resolved.indexOf(a)||(b.resolved.push(a),d.push(c.load(a.id,null,e)))}),Promise.all(d).then(function(){return a})},c.prototype.load=function(a,b,c){var d=this;c=c||{};var f=this.getReference(a,b),g=l.get(f);if(!c.refresh&&c.local&&g.isAvailable)return this.resolveDepth(f,c);var h=new e.GetObject(g.bucket,g.key);return this.ensureCacheHeader(f.id,h,c.refresh),this.send(h).then(function(e){return f.version>e.entity.version?(c.refresh=!0,d.load(a,b,c)):(d.addToWhiteList(e.entity.id),e.status!=o.NOT_MODIFIED&&g.setJson(e.entity),g.setPersistent(),d.resolveDepth(f,c))},function(a){if(a.status==o.OBJECT_NOT_FOUND)return d.removeReference(f),g.setRemoved(),null;throw a})},c.prototype.insert=function(a,b){var c=this;b=b||{};var d;return this._save(a,b,function(a,b){if(a.version)throw new f.PersistentError("Existing objects can't be inserted.");return d=!a.id,new e.CreateObject(a.bucket,b)}).then(function(b){return d&&c._attach(a),b})},c.prototype.update=function(a,b){return b=b||{},this._save(a,b,function(a,c){if(!a.version)throw new f.PersistentError("New objects can't be inserted.");return b.force?(delete c.version,new e.ReplaceObject(a.bucket,a.key,c).ifMatch("*")):new e.ReplaceObject(a.bucket,a.key,c).ifMatch(a.version)})},c.prototype.save=function(a,b,c){b=b||{};var d=function(a,c){if(b.force){if(!a.id)throw new f.PersistentError("New special objects can't be forcedly saved.");return delete c.version,new e.ReplaceObject(a.bucket,a.key,c)}return a.version?new e.ReplaceObject(a.bucket,a.key,c).ifMatch(a.version):new e.CreateObject(a.bucket,c)};return c?this._locklessSave(a,b,d):this._save(a,b,d)},c.prototype.optimisticSave=function(a,b){var c=this;return l.get(a).withLock(function(){return c._optimisticSave(a,b)})},c.prototype._optimisticSave=function(a,b){var c=this,d=!1,e=function(){d=!0},f=Promise.resolve(b(a,e));return d?Promise.resolve(a):f.then(function(){return c.save(a,{},!0).catch(function(d){if(412==d.status)return c.refresh(a,{}).then(function(){return c._optimisticSave(a,b)});throw d})})},c.prototype._locklessSave=function(a,b,c){var d=this;this.attach(a);var e,f,g=l.get(a);if(g.isAvailable&&(f=g.getJson()),g.isDirty){b.refresh||g.setPersistent();var h=this.send(c(g,f)).then(function(c){return b.refresh?(g.setJson(c.entity),g.setPersistent()):g.setJsonMetadata(c.entity),a},function(b){if(b.status==o.OBJECT_NOT_FOUND)return d.removeReference(a),g.setRemoved(),null;throw g.setDirty(),b});e=[h]}else e=[Promise.resolve(a)];var i=Object.assign({},b);return i.depth=0,this.getSubEntities(a,b.depth).forEach(function(a){e.push(d._save(a,i,c))}),Promise.all(e).then(function(){return a})},c.prototype._save=function(a,b,c){var d=this;this.ensureBloomFilterFreshness();var e=l.get(a);return e.version&&this.addToBlackList(a.id),e.withLock(function(){return d._locklessSave(a,b,c)})},c.prototype.getSubEntities=function(a,b,c,d){var e=this;if(c=c||[],!b)return c;d=d||a;for(var f=l.get(a),g=f.type.references(),h=Array.isArray(g),i=0,g=h?g:g[Symbol.iterator]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{if(i=g.next(),i.done)break;j=i.value}var k=j;this.getSubEntitiesByPath(a,k.path).forEach(function(a){~c.indexOf(a)||a==d||(c.push(a),c=e.getSubEntities(a,b===!0?b:b-1,c,d))})}return c},c.prototype.getSubEntitiesByPath=function(a,b){var c=this,d=[a];return b.forEach(function(a){var b=[];d.forEach(function(d){var e=d[a];if(e){var f=c.metamodel.managedType(d.constructor).getAttribute(a);if(f.isCollection)for(var g=e.entries(),h=Array.isArray(g),i=0,g=h?g:g[Symbol.iterator]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{if(i=g.next(),i.done)break;j=i.value}var k=j;b.push(k[1]),f.keyType&&f.keyType.isEntity&&b.push(k[0])}else b.push(e)}}),d=b}),d},c.prototype.delete=function(a,b){var c=this;b=b||{},this.attach(a);var d=l.get(a);return d.withLock(function(){if(!d.version&&!b.force)throw new f.IllegalEntityError(a);var g=new e.DeleteObject(d.bucket,d.key);c.addToBlackList(a.id),b.force||g.ifMatch(d.version);var h=[c.send(g).then(function(){return c.removeReference(a),d.setRemoved(),a})],i=Object.assign({},b);return i.depth=0,c.getSubEntities(a,b.depth).forEach(function(a){h.push(c.delete(a,i))}),Promise.all(h).then(function(){return a})})},c.prototype.flush=function(a,b){},c.prototype.persist=function(a){this.attach(a)},c.prototype.refresh=function(a,b){return b=b||{},b.refresh=!0,this.load(a.id,null,b)},c.prototype.attach=function(a){if(!this.contains(a)){var b=this.metamodel.entity(a.constructor);if(!b)throw new f.IllegalEntityError(a);if(this.containsById(a))throw new f.EntityExistsError(a);this._attach(a)}},c.prototype._attach=function(a){var b=l.get(a);if(b.isAttached){if(b.db!=this)throw new f.EntityExistsError(a)}else b.db=this;b.id||"User"!=b.type.name&&"Role"!=b.type.name&&"logs.AppLog"!=b.type.name&&(b.id="/db/"+b.type.name+"/"+h.uuid()),b.id&&(this._entities[b.id]=a)},c.prototype.removeReference=function(a){var b=l.get(a);if(!b)throw new f.IllegalEntityError(a);delete this._entities[b.id]},c.prototype.register=function(a,b,c){var d=this,g=c>j.LoginOption.NO_LOGIN;if(this.me&&g)throw new f.PersistentError("User is already logged in.");return this.withLock(function(){var f=new e.Register({user:a,password:b,login:g});return d._userRequest(f,c)})},c.prototype.login=function(a,b,c){var d=this;if(this.me)throw new f.PersistentError("User is already logged in.");return this.withLock(function(){var f=new e.Login({username:a,password:b});return d._userRequest(f,c)})},c.prototype.logout=function(){var a=this;return this.withLock(function(){return a.send(new e.Logout).then(a._logout.bind(a))})},c.prototype.loginWithOAuth=function(a,b,c){if(this.me)throw new f.PersistentError("User is already logged in.");c=Object.assign({title:"Login with "+a,timeout:3e5,state:{},loginOption:!0},c);var d;if(!m[a+"OAuth"])throw new Error("OAuth provider "+a+" not supported.");d=new m[a+"OAuth"](b,c.scope,JSON.stringify(c.state));var e=this._userRequest(d,c.loginOption);open(d.request.path,c.title,"width="+c.width+",height="+c.height);return new Promise(function(a,b){var d=setTimeout(function(){b(new f.PersistentError("OAuth login timeout."))},c.timeout);e.then(a,b).then(function(){clearTimeout(d)})})},c.prototype.renew=function(){var a=this;return this.withLock(function(){var b=new e.Me;return a._userRequest(b,!0)})},c.prototype.newPassword=function(a,b,c){var d=this;return this.withLock(function(){var f=new e.NewPassword({username:a,password:b,newPassword:c});return d.send(f).then(function(a){return d._updateUser(a.entity)})})},c.prototype._updateUser=function(a,b){var c=this.getReference(a.id),d=l.get(c);return d.setJson(a),d.setPersistent(),b&&(this.me=c),c},c.prototype._logout=function(){this.me=null,this.token=null},c.prototype._userRequest=function(a,b){var c=this,d=b>j.LoginOption.NO_LOGIN;return d&&(this.tokenStorage.temporary=b<j.LoginOption.PERSIST_LOGIN),this.send(a).then(function(a){if(a.entity)return c._updateUser(a.entity,d)},function(a){if(a.status==o.OBJECT_NOT_FOUND)return d&&c._logout(),null;throw a})},c.prototype.registerDevice=function(a,b,c){var d=new e.DeviceRegister({token:b,devicetype:a,device:c});return d.withCredentials=!0,this.send(d)},c.prototype.checkDeviceRegistration=function(){var a=this;return this.send(new e.DeviceRegistered).then(function(){return a.isDeviceRegistered=!0},function(b){if(b.status==o.OBJECT_NOT_FOUND)return a.isDeviceRegistered=!1;throw b})},c.prototype.pushDevice=function(a){return this.send(new e.DevicePush(a))},c.prototype.validate=function a(b){for(var c,d=l.get(b).type,e=new h.ValidationResult,f=d.attributes();!(c=f.next()).done;){var a=new h.Validator(c.value.name,b);e.fields[a.key]=a}var g=d.validationCode;return g&&g(e.fields),e},c.prototype.addToWhiteList=function(a){this.isCachingDisabled||(this.bloomFilter.contains(a)&&this.cacheWhiteList.add(a),this.cacheBlackList.delete(a))},c.prototype.addToBlackList=function(a){this.isCachingDisabled||(this.bloomFilter.contains(a)||this.cacheBlackList.add(a),this.cacheWhiteList.delete(a))},c.prototype.refreshBloomFilter=function(){var a=this;if(this.isCachingDisabled)return Promise.resolve();var b=new e.GetBloomFilter;return this.send(b).then(function(b){return a.updateBloomFilter(b.entity),a.bloomFilter})},c.prototype.updateBloomFilter=function(a){this.bloomFilter=new n(a),this.cacheWhiteList=new Set,this.cacheBlackList=new Set},c.prototype.ensureBloomFilterFreshness=function(){var a=this;if(!this.isCachingDisabled){var b=(new Date).getTime(),c=1e3*this.bloomFilterRefresh;this._bloomFilterLock.isReady&&b-this.bloomFilter.creation>c&&this._bloomFilterLock.withLock(function(){return a.refreshBloomFilter()})}},c.prototype.mustRevalidate=function(a){if(h.isNode)return!1;this.ensureBloomFilterFreshness();var b=this.isCachingDisabled||!this._bloomFilterLock.isReady;return b=b||!this.cacheWhiteList.has(a)&&(this.cacheBlackList.has(a)||this.bloomFilter.contains(a))},c.prototype.ensureCacheHeader=function(a,b,c){c=c||this.mustRevalidate(a),c&&b.noCache()},c.prototype.createURL=function(a,b){var c=this._connector.basePath+a,d=!1;return b&&this.me?(c=this.tokenStorage.signPath(c),d=!0):c=c.split("/").map(encodeURIComponent).join("/"),this.mustRevalidate(a)&&(c=c+(d?"&":"?")+"BCB"),this._connector.origin+c},c}(h.Lockable);p.prototype.List=Array,p.prototype.Set=Set,p.prototype.Map=Map,p.prototype.GeoPoint=a(5),c.exports=p},{19:19,20:20,21:21,25:25,34:34,36:36,4:4,5:5,60:60,64:64,71:71}],3:[function(a,c,d){"use strict";var e=a(36),f=a(52),g=a(71),h=(a(22),a(23)),i=a(2),j=function(a){function c(d){b.classCallCheck(this,c);var f=b.possibleConstructorReturn(this,a.call(this));d=Object(d)instanceof String?{host:d}:d||{},f._connector=null,f.metamodel=f.createMetamodel(),f.code=new g.Code(f.metamodel,f),f.tokenStorageFactory=g.TokenStorage.WEB_STORAGE||g.TokenStorage.GLOBAL,f.configure(d);var h=!0,i=new Promise(function(a){f._connected=a});return d.host?f.connect(d.host,d.port,d.secure,d.basePath):h=!1,f.tokenStorage||(h=!1,i=i.then(function(){return f.tokenStorageFactory.create(f._connector.origin)}).then(function(a){f.tokenStorage=a})),d.schema?(f._connectData=d,f.metamodel.init(d.schema)):(h=!1,i=i.then(function(){var a=new e.Connect;return a.withCredentials=!0,0===f.staleness&&a.noCache(),f.send(a)}).then(function(a){f._connectData=a.entity,void 0===f.staleness&&(f.staleness=f._connectData.bloomFilterRefresh||60),f.metamodel.isInitialized||f.metamodel.init(f._connectData.schema),f.tokenStorage.update(f._connectData.token)})),h||f.withLock(function(){return i},!0),f}return b.inherits(c,a),c.prototype._connected=function(){},c.prototype.configure=function(a){if(this._connector)throw new Error("The EntityManagerFactory can only be configured before is is connected.");a.tokenStorage&&(this.tokenStorage=a.tokenStorage),a.tokenStorageFactory&&(this.tokenStorageFactory=a.tokenStorageFactory),void 0!==a.staleness&&(this.staleness=a.staleness)},c.prototype.connect=function(a,b,c,d){if(this._connector)throw new Error("The EntityManagerFactory is already connected.");return Object(b)instanceof Boolean&&(c=b,b=0),this._connector=h.create(a,b,c,d),this._connected(),this.ready()},c.prototype.createMetamodel=function(){return new f.Metamodel(this)},c.prototype.createEntityManager=function(a){var b=this,c=new i(this);return this.isReady?c.connected(this._connector,this._connectData,a?this.tokenStorage:new g.TokenStorage(this._connector.origin)):c.withLock(function(){return b.ready().then(function(){c.connected(b._connector,b._connectData,a?b.tokenStorage:new g.TokenStorage(b._connector.origin))})},!0),c},c.prototype.send=function(a){return a.tokenStorage||(a.tokenStorage=this.tokenStorage),this._connector.send(a)},c}(g.Lockable);c.exports=j},{2:2,22:22,23:23,36:36,52:52,71:71}],4:[function(a,c,d){"use strict";var e=a(36),f=a(34),g=function(){function a(c){b.classCallCheck(this,a),this._connector=c.connector,this.entityManager=c,this.tid=null,this.rollbackOnly=!1,this.readSet=null,this.changeSet=null}return b.createClass(a,[{key:"isActive",get:function(){return Boolean(this.tid)}}]),a.prototype.begin=function(a,b){return this.yield().then(function(){var a=this.send(new e.PostTransaction).done(function(a){this.tid=a.tid,this.rollbackOnly=!1,this.readSet={},this.changeSet={}});return this.wait(a)}).then(a,b)},a.prototype.commit=function(a,b){return this.yield().then(function(){return this.getRollbackOnly()?this.rollback().then(function(){throw new f.RollbackError}):this.wait(this.entityManager.flush()).then(function(){var a=[];for(var b in this.readSet)a.push({oid:b,version:this.readSet[b]});var c=this.send(new e.PutTransactionCommitted(this.tid,a));return this.wait(c).then(function(a){this.tid=null,this.readSet=null,this.changeSet=null;var b=a.oids;for(var c in b){var d=b[c],e=this.entityManager.entities[c];if(e){var f=util.Metadata.get(e);"DELETED"==d||f.isDeleted?this.entityManager.removeReference(e):f.setJsonValue(f.type.version,d)}}})})}).then(a,b)},a.prototype.getRollbackOnly=function(){return this.rollbackOnly},a.prototype.rollback=function(a,b){return this.yield().then(function(){var a=this.send(new e.PutTransactionAborted(this.tid));this.wait(a).then(function(){return this.tid=null,this.readSet=null,this.changeSet=null,this.entityManager.clear()},function(){return this.entityManager.clear()})}).then(a,b)},a.prototype.setRollbackOnly=function(a,b){return this.yield().done(function(){this.rollbackOnly=!0})},a.prototype.isRead=function(a){return this.isActive&&a in this.readSet},a.prototype.setRead=function(a,b){this.isActive&&!this.isChanged(a)&&(this.readSet[a]=b)},a.prototype.isChanged=function(a){return this.isActive&&a in this.changeSet},a.prototype.setChanged=function(a){this.isActive&&(delete this.readSet[a],this.changeSet[a]=!0)},a}();c.exports=g},{34:34,36:36}],5:[function(a,c,d){"use strict";var e=function(){function a(c,d){b.classCallCheck(this,a);var e=void 0,f=void 0;if(Object(c)instanceof String){var g=c.indexOf(";");e=c.substring(0,g),f=c.substring(g+1)}else Object(c)instanceof Number?(e=c,f=d):Object(c)instanceof Array?(e=c[0],f=c[1]):c instanceof Object?(e=c.latitude,f=c.longitude):(e=0,f=0);if(this.longitude=f,this.latitude=e,this.latitude<-90||this.latitude>90)throw new Error("Latitude "+this.latitude+" is not in bound of -90 <= latitude <= 90");if(this.longitude<-180||this.longitude>180)throw new Error("Longitude "+this.longitude+" is not in bound of -180 <= longitude <= 180")}return a.current=function(){return new Promise(function(b,c){navigator.geolocation.getCurrentPosition(function(c){b(new a(c.coords.latitude,c.coords.longitude))},function(a){c(a)})})},a.prototype.kilometersTo=function(b){return Number((a.EARTH_RADIUS_IN_KILOMETERS*this.radiansTo(b)).toFixed(3))},a.prototype.milesTo=function(b){return Number((a.EARTH_RADIUS_IN_MILES*this.radiansTo(b)).toFixed(3))},a.prototype.radiansTo=function(b){var c=this,d=b,e=c.latitude*a.DEG_TO_RAD,f=d.latitude*a.DEG_TO_RAD,g=(d.longitude-c.longitude)*a.DEG_TO_RAD;return Math.acos(Math.sin(e)*Math.sin(f)+Math.cos(e)*Math.cos(f)*Math.cos(g))},a.prototype.toString=function(){return this.latitude+";"+this.longitude},a.prototype.toJSON=function(){return{latitude:this.latitude,longitude:this.longitude}},a}();e.DEG_TO_RAD=Math.PI/180,e.EARTH_RADIUS_IN_KILOMETERS=6371,e.EARTH_RADIUS_IN_MILES=3956,c.exports=e},{}],6:[function(a,b,c){"use strict";var d=a(3),e=a(2);e.prototype.binding=a(20),e.prototype.connector=a(28),e.prototype.error=a(34),e.prototype.message=a(36),e.prototype.metamodel=a(52),e.prototype.util=a(71),e.prototype.caching=a(22),e.prototype.EntityManager=a(2),e.prototype.EntityManagerFactory=a(3),e.prototype.EntityTransaction=a(4),e.prototype.Acl=a(1);var f=new d,g=f.createEntityManager(!0);g.configure=function(a){return f.configure(a),this},g.connect=function(a,b,c,d){return b instanceof Function&&(d=c,c=b,b=void 0),f.connect(a,b),this.ready(c,d)},c=b.exports=g,c.db=g,c.default=g},{1:1,2:2,20:20,22:22,28:28,3:3,34:34,36:36,4:4,52:52,71:71}],7:[function(a,c,d){"use strict";var e=function(){function a(){b.classCallCheck(this,a)}return a.prototype.getValue=function(a,b){return a[b.name]},a.prototype.setValue=function(a,b,c){a[b.name]=c},a}();c.exports=e},{}],8:[function(a,b,c){"use strict";var d=a(11),e=d.extend({get isRegistered(){return this._db.isDeviceRegistered},register:function(a,b,c,d,e){return c instanceof Function&&(e=d,d=c,c=null),this._db.registerDevice(a,b,c).then(d,e)},push:function(a,b,c){return this._db.pushDevice(a).then(b,c)}});e.PushMessage=a(67),b.exports=e},{11:11,67:67}],9:[function(a,c,d){"use strict";var e=(a(64),a(62),function(){function a(){b.classCallCheck(this,a)}return a.prototype.createProxy=function(a){return function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c}(a)},a.prototype.getIdentifier=function(a){return a.__d__},a.prototype.setIdentifier=function(a,b){Object.defineProperty(a,"__d__",{value:b})},a.prototype.enhance=function(a,b){if(b.__ype__!=a){if(b.hasOwnProperty("__ype__"))throw new Error("Type is already used by a different manager");Object.defineProperty(b,"__ype__",{value:a}),this.setIdentifier(b,a.ref),this.enhancePrototype(b.prototype,a)}},a.prototype.enhancePrototype=function(a,b){if(a.toString===Object.prototype.toString&&Object.defineProperty(a,"toString",{value:function(){return this._metadata.id||this._metadata.bucket},enumerable:!1}),b.superType&&"Object"==b.superType.name)for(var c=b.superType.declaredAttributes,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;g.isMetadata||this.enhanceProperty(a,g)}for(var h=b.declaredAttributes,i=Array.isArray(h),j=0,h=i?h:h[Symbol.iterator]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{if(j=h.next(),j.done)break;k=j.value}var l=k;this.enhanceProperty(a,l)}},a.prototype.enhanceProperty=function(a,b){var c="$"+b.name;Object.defineProperty(a,b.name,{get:function(){var a=this._metadata;return a.readAccess(),a[c]},set:function(a){var b=this._metadata;b.writeAccess(),b[c]=a},configurable:!0,enumerable:!0})},a}());c.exports=e},{62:62,64:64}],10:[function(a,c,d){"use strict";var e=a(15),f=function(a){function c(d){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.call(this,d))}return b.inherits(c,a),c}(e);Object.defineProperties(f.prototype,{id:{get:function(){return this._metadata.id},set:function(a){if(this._metadata.id)throw new Error("The id can't be set twice: "+a);a+="",0==a.indexOf("/db/"+this._metadata.bucket+"/")?this._metadata.id=a:this.key=a},enumerable:!0},key:{get:function(){return this._metadata.key},set:function(a){this._metadata.key=a}},version:{get:function(){return this._metadata.version},enumerable:!0},acl:{get:function(){return this._metadata.acl},enumerable:!0},ready:{value:function(a){return this._metadata.ready(a)}},attach:{value:function(a){a.attach(this)}},save:{value:function(a,b,c){return a instanceof Function&&(c=b,b=a,a={}),this._metadata.db.save(this,a).then(b,c)}},insert:{value:function(a,b,c){return a instanceof Function&&(c=b,b=a,a={}),this._metadata.db.insert(this,a).then(b,c)}},update:{value:function(a,b,c){return a instanceof Function&&(c=b,b=a,a={}),this._metadata.db.update(this,a).then(b,c)}},load:{value:function(a,b,c){return a instanceof Function&&(c=b,b=a,a={}),a=a||{},a.local=!0,this._metadata.db.load(this.id,null,a).then(b,c)}},delete:{value:function(a,b,c){return a instanceof Function&&(c=b,b=a,a={}),this._metadata.db.delete(this,a).then(b,c)}},optimisticSave:{value:function(a,b,c){return this._metadata.db.optimisticSave(this,a).then(b,c)}},attr:{value:function(){throw new Error("Attr is not yet implemented.")}},validate:{value:function(){return this._metadata.db.validate(this)}},toJSON:{value:function(a){return this._metadata.getJson(a)}}}),c.exports=f},{15:15}],11:[function(a,b,c){"use strict";var d=a(16),e=d.extend({load:function(a,b,c,d){return b instanceof Function&&(d=c,c=b,b={}),this._db.load(this._managedType.typeConstructor,a,b).then(c,d)},fromJSON:function(a){var b=a.id?this._db.getReference(this._managedType.typeConstructor,a.id):this.newInstance(),c=b._metadata;return c.setJson(a),c.setDirty(),b},find:function(){return this._db.createQueryBuilder(this._managedType.typeConstructor)},partialUpdate:function(){throw new Error("partialUpdate is not yet implemented.")}});b.exports=e},{16:16}],12:[function(a,b,c){"use strict";function d(a){for(var b,c=1;b=arguments[c];++c)for(var d=Object.getOwnPropertyNames(b),e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(b,h))}return a}var e=d({extend:function(a){return d({},this,a)},create:function(a){var b=function(a){return b.newInstance(arguments)};return d(b,this),b.prototype=a.prototype,b._type=a,b},new:function(){return this.newInstance(arguments)},newInstance:function(a){var b;return b=a&&0!=a.length?new this._type(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]):new this._type}});b.exports=e},{}],13:[function(a,c,d){"use strict";var e=a(34),f=a(1),g=a(72),h=a(36),i=a(25).StatusCode,j="/file",k=j.length,l=function(){function a(c){if(b.classCallCheck(this,a),c=c||{},this._available=!1,Object(c)instanceof String){var d=c,e=d.indexOf("/","/file/".length);if(e==-1||0!=d.indexOf("/file/"))throw new Error("Invalid file reference "+d);this._id=d}else if(c.id)this._id=c.id,this._setMetadata(c);else{var f=void 0;if(c.path)f=c.path;else{var h=c.parent||"/www";if("/"!=h.charAt(h.length-1)&&(h+="/"),h.length<3)throw new Error("Invalid parent name: "+h);var i=c.name||c.data&&c.data.name||g.uuid();f=h+i}if("/"!=f.charAt(0)&&(f="/"+f),f.indexOf("//")!=-1||f.length<3)throw new Error("Invalid path: "+f);this._id=j+f,this._setMetadata(c)}this.isFolder="/"==this._id.charAt(this._id.length-1)}return b.createClass(a,[{key:"id",get:function(){return this._id}},{key:"url",get:function(){if(this.isFolder)throw new Error("Url can not be created for folders.");return this._url||(this._url=this._db.createURL(this.id,"www"!=this.bucket)),this._url}},{key:"name",get:function(){return this._name||(this._name=this._id.substring(this._id.lastIndexOf("/",this._id.length-2)+1)),this._name}},{key:"mimeType",get:function(){if(this.isFolder)throw new Error("A folder has no mimeType");return this._checkAvailable(),this._mimeType}},{key:"acl",get:function(){return this._checkAvailable(),this._acl}},{key:"lastModified",get:function(){if(this.isFolder)throw new Error("A folder has no lastModified");return this._checkAvailable(),this._lastModified}},{key:"eTag",get:function(){if(this.isFolder)throw new Error("A folder has no eTag");return this._checkAvailable(),this._eTag}},{key:"size",get:function(){if(this.isFolder)throw new Error("A folder has no size");return this._checkAvailable(),this._size}},{key:"bucket",get:function(){return this.id.substring(k+1,this.id.indexOf("/",k+1))}},{key:"key",get:function(){return this.id.substring(this.id.indexOf("/",k+1)+1)}},{key:"path",get:function(){return this.id.substring(k)}},{key:"parent",get:function(){return this.id.substring(k,this.id.lastIndexOf("/",this.id.length-2))}},{key:"isMetadataLoaded",get:function(){return this._available}}]),a.prototype.upload=function(a,b,c){var d=this;if(a=a||{},this.isFolder)throw new Error("A folder cannot be uploaded");this._setMetadata(a);var e=new h.UploadFile(this.bucket,this.key).entity(this._data,this._type).acl(this._acl);return e.progress(a.progress),this._size&&e.contentLength(this._size),this._mimeType&&e.mimeType(this._mimeType),this._conditional(e,a),this._db.addToBlackList(this.id),this._db.send(e).then(function(a){return d._data=null,d._type=null,d.fromJSON(a.entity),d}).then(b,c)},a.prototype.download=function(a,b,c){var d=this;if(a=a||{},this.isFolder)throw new Error("A folder cannot be downloaded");var e=a.type||"blob",f=new h.DownloadFile(this.bucket,this.key).responseType(e);return this._db.ensureCacheHeader(this.id,f,a.refresh),this._db.send(f).then(function(a){return d._db.addToWhiteList(d.id),d._fromHeaders(a.headers),a.entity},function(a){if(a.status==i.OBJECT_NOT_FOUND)return null;throw a}).then(b,c)},a.prototype.delete=function(a,b,c){if(a=a||{},this.isFolder)throw new Error("A folder cannot be deleted");var d=new h.DeleteFile(this.bucket,this.key);return this._conditional(d,a),this._db.addToBlackList(this.id),this._db.send(d).then(function(){return this}).then(b,c)},a.prototype._conditional=function(a,b){b.force||(this._lastModified&&a.ifUnmodifiedSince(this._lastModified),this._eTag&&a.ifMatch(this._eTag),this._lastModified||this._eTag||a.ifNoneMatch("*"))},a.prototype.loadMetadata=function(a,b,c){var d=this;if(a=a||{},this.isFolder)throw new Error("A folder has no matadata");var e=new h.GetFileMetadata(this.bucket,this.key);return this._db.ensureCacheHeader(this.id,e,a.refresh),this._db.send(e).then(function(a){return d._fromHeaders(a.headers),
d},function(a){if(a.status==i.OBJECT_NOT_FOUND)return null;throw a}).then(b,c)},a.prototype.saveMetadata=function(a,b,c){var d=this;a=a||{};var e=this.toJSON();e.id=this._id;var f=new h.UpdateFileMetadata(this.bucket,this.key).entity(e);return this._conditional(f,a),this._db.send(f).then(function(a){return d.fromJSON(a),d})},a.prototype._setMetadata=function(a){var b=a.data,c=a.type,d=a.eTag,e=a.acl,g=a.size,h=a.mimeType,i=a.lastModified;if(b){if("undefined"!=typeof Blob&&b instanceof Blob)h=h||b.type;else if("data-url"==c){var j=b.match(/^data:(.+?)(;base64)?,.*$/);h=h||j[1]}this._data=b,this._type=c,this._size=g,this._mimeType=h,this._acl=e||this._acl||new f,this._available=!0}else this._available=!1;this._eTag=d||this._eTag,i&&(this._lastModified=new Date(i))},a.prototype._fromHeaders=function(a){this.fromJSON({eTag:a.etag?a.etag.substring(1,a.etag.length-1):null,lastModified:a["last-modified"],mimeType:a["content-type"],acl:a["baqend-acl"]&&JSON.parse(a["baqend-acl"]),contentLength:+a["baqend-size"]})},a.prototype.fromJSON=function(a){a.mimeType&&(this._mimeType=a.mimeType),a.lastModified&&(this._lastModified=new Date(a.lastModified)),a.eTag&&(this._eTag=a.eTag),this._acl=this._acl||new f,a.acl&&this._acl.fromJSON(a.acl),a.contentLength&&(this._size=a.contentLength),this._available=!0},a.prototype.toJSON=function(){var a={mimeType:this._mimeType,eTag:this._eTag,acl:this._acl,contentLength:this._size};return this._lastModified&&(a.lastModified=this._lastModified.toISOString()),a},a.prototype._checkAvailable=function(){if(!this._available)throw new e.PersistentError("The file metadata of "+this.id+" is not available.")},a}();c.exports=l},{1:1,25:25,34:34,36:36,72:72}],14:[function(a,b,c){"use strict";var d=a(12),e=a(13),f=a(36),g=a(66),h=d.extend({create:function(a){var b=d.create.call(this,e);return b._db=a,b},newInstance:function(a){var b=d.newInstance.call(this,a);return b._db=this._db,b},saveMetadata:function(a,b,c,d){var e=new f.SetFileBucketMetadata(a,b);return this._db.send(e).then(c,d)},loadMetadata:function(a,b,c,d){b=b||{};var e=new f.GetFileBucketMetadata(a);return this._db.send(e).then(function(a){var b={};return g.BASE_PERMISSIONS.forEach(function(c){b[c]=g.fromJSON(a.entity[c]||{})}),b},function(a){if(a.status==StatusCode.OBJECT_NOT_FOUND)return null;throw a}).then(c,d)},listBuckets:function(a,b){var c=this;return this._db.send(new f.ListBuckets).then(function(a){return a.entity.map(function(a){return c.new(a+"/")})}).then(a,b)},listFiles:function(a,b,c,d,e){var g=this;Object(a)instanceof String&&("/"!=a.charAt(a.length-1)&&(a+="/"),a=this.new({path:a}));var h=a.key,i=a.bucket;return b=b?b.key:null,this._db.send(new f.ListFiles(i,h,b,c)).then(function(a){return a.entity.map(function(a){return g.new(a)})}).then(d,e)}});b.exports=h},{12:12,13:13,36:36,66:66}],15:[function(a,c,d){"use strict";var e=a(64),f=function(){function a(c){b.classCallCheck(this,a),a.init(this,c)}return a.init=function(a,b){var c=a.constructor.__ype__;c&&Object.defineProperty(a,"_metadata",{value:e.create(c,a),configurable:!0}),b&&Object.assign(a,b)},a.extend=function(b){return b.prototype=Object.create(this.prototype,{constructor:{value:b,configurable:!0,writable:!0}}),b.extend=a.extend,b},a}();Object.defineProperties(f.prototype,{toJSON:{value:function(){return this._metadata.type.toJsonValue(this._metadata,this)}}}),c.exports=f},{64:64}],16:[function(a,b,c){"use strict";var d=a(12),e=(a(15),d.extend({create:function(a,b){var c=d.create.call(this,a.typeConstructor);return c.methods=c.prototype,c._managedType=a,c._db=b,c},newInstance:function(a){var b=a?d.newInstance.call(this,a):this._managedType.create(a);return b._metadata.db=this._db,b},fromJSON:function(a){var b=this.newInstance(),c=b._metadata;return this._managedType.fromJsonValue(c,a,b),b},addMethods:function(a){Object.assign(this.methods,a)},addMethod:function(a,b){this.methods[a]=b}}));b.exports=e},{12:12,15:15}],17:[function(a,c,d){"use strict";var e=a(10),f=a(18),g=function(a){function c(d){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.call(this,d))}return b.inherits(c,a),c}(e);Object.defineProperties(g.prototype,{hasUser:{value:function(a){return this.users&&this.users.has(a)}},addUser:{value:function(a){if(!(a instanceof f))throw new Error("Only user instances can be added to a role.");this.users||(this.users=new Set),this.users.add(a)}},removeUser:{value:function(a){if(!(a instanceof f))throw new Error("Only user instances can be removed from a role.");this.users&&this.users.delete(a)}}}),c.exports=g},{10:10,18:18}],18:[function(a,c,d){"use strict";var e=a(10),f=function(a){function c(d){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.call(this,d))}return b.inherits(c,a),c}(e);Object.defineProperties(f.prototype,{newPassword:{value:function(a,b,c,d){return this._metadata.db.newPassword(this.username,a,b).then(c,d)}}}),c.exports=f},{10:10}],19:[function(a,b,c){"use strict";var d=a(11),e=d.extend({get me(){return this._db.me},register:function(a,b,c,d,e){return c instanceof Function&&(e=d,d=c,c=!0),a=Object(a)instanceof String?this.fromJSON({username:a}):a,this._db.register(a,b,void 0===c||c).then(d,e)},login:function(a,b,c,d,e){return c instanceof Function&&(e=d,d=c,c=!0),this._db.login(a,b,void 0===c||c).then(d,e)},logout:function(a,b){return this._db.logout().then(a,b)},newPassword:function(a,b,c,d,e){return this._db.newPassword(a,b,c).then(d,e)}});e.LoginOption={NO_LOGIN:-1,SESSION_LOGIN:0,PERSIST_LOGIN:1},e.DefaultOptions={google:{width:585,height:545,scope:"email"},facebook:{width:1140,height:640,scope:"email"},github:{width:1040,height:580,scope:"user:email"},twitter:{width:740,height:730},linkedin:{width:630,height:530,scope:""}},["Google","Facebook","GitHub","Twitter","LinkedIn"].forEach(function(a){e["loginWith"+a]=function(b,c,d,f){return c instanceof Function&&(f=d,d=c,c={}),c=Object.assign({},e.DefaultOptions[a.toLowerCase()],c||{}),this._db.loginWithOAuth(a,b,c).then(d,f)}}),b.exports=e},{11:11}],20:[function(a,b,c){"use strict";c.Accessor=a(7),c.Enhancer=a(9),c.Factory=a(12),c.ManagedFactory=a(16),c.EntityFactory=a(11),c.UserFactory=a(19),c.DeviceFactory=a(8),c.FileFactory=a(14),c.Managed=a(15),c.Entity=a(10),c.Role=a(17),c.User=a(18),c.File=a(13)},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,7:7,8:8,9:9}],21:[function(a,c,d){"use strict";var e=a(71).atob,f=function(){function a(c){b.classCallCheck(this,a),this.bytes=e(c.b),this.bits=c.m,this.hashes=c.h,this.creation=(new Date).getTime()}return a.prototype.contains=function(b){for(var c=a._getHashes(b,this.bits,this.hashes),d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;if(!this._isSet(g))return!1}return!0},a.prototype._isSet=function(a){var b=Math.floor(a/8),c=1<<a%8,d=this.bytes.charCodeAt(b);return 0!=(d&c)},a._getHashes=function(b,c,d){for(var e=new Array(this.hashes),f=a._murmur3(0,b),g=a._murmur3(f,b),h=0;h<d;h++)e[h]=(f+h*g)%c;return e},a._murmur3=function(a,b){var c,d,e,f,g,h,i,j;for(c=3&b.length,d=b.length-c,e=a,g=3432918353,h=461845907,j=0;j<d;)i=255&b.charCodeAt(j)|(255&b.charCodeAt(++j))<<8|(255&b.charCodeAt(++j))<<16|(255&b.charCodeAt(++j))<<24,++j,i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i,e=e<<13|e>>>19,f=5*(65535&e)+((5*(e>>>16)&65535)<<16)&4294967295,e=(65535&f)+27492+(((f>>>16)+58964&65535)<<16);switch(i=0,c){case 3:i^=(255&b.charCodeAt(j+2))<<16;case 2:i^=(255&b.charCodeAt(j+1))<<8;case 1:i^=255&b.charCodeAt(j),i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i}return e^=b.length,e^=e>>>16,e=2246822507*(65535&e)+((2246822507*(e>>>16)&65535)<<16)&4294967295,e^=e>>>13,e=3266489909*(65535&e)+((3266489909*(e>>>16)&65535)<<16)&4294967295,e^=e>>>16,e>>>0},a}();c.exports=f},{71:71}],22:[function(a,b,c){"use strict";c.BloomFilter=a(21)},{21:21}],23:[function(a,c,d){"use strict";var e=a(32),f=a(36),g=function(){function c(a,d,e,f){b.classCallCheck(this,c),this.host=a,this.port=d,this.secure=e,this.basePath=f,this.socket=null,this.listeners={},this.origin=c.toUri(a,d,e,"")}return c.create=function(a,b,d,e){if("undefined"!=typeof window&&(a||(a=window.location.hostname,b=Number(window.location.port)),void 0===d&&(d="https:"==window.location.protocol)),d=!!d,void 0===e&&(e=c.DEFAULT_BASE_PATH),a.indexOf("/")!=-1){var f=/^(https?):\/\/([^\/:]+|\[[^\]]+])(:(\d*))?(\/\w+)?\/?$/.exec(a);if(!f)throw new Error("The connection uri host "+a+" seems not to be valid");d="https"==f[1],a=f[2].replace(/(\[|])/g,""),b=f[4],e=f[5]||""}else"localhost"!=a&&/^[a-z0-9-]*$/.test(a)&&(a+=d?c.SSL_DOMAIN:c.HTTP_DOMAIN);b||(b=d?443:80);var g=c.toUri(a,b,d,e),h=this.connections[g];if(!h){for(var i in this.connectors){var j=this.connectors[i];if(j.isUsable&&j.isUsable(a,b,d,e)){h=new j(a,b,d,e);break}}if(!h)throw new Error("No connector is usable for the requested connection.");this.connections[g]=h}return h},c.toUri=function(a,b,c,d){var e=(c?"https://":"http://")+(a.indexOf(":")!=-1?"["+a+"]":a);return e+=c&&443!=b||!c&&80!=b?":"+b:"",e+=d},c.prototype.send=function(a){var b=this;"OAUTH"==a.request.method&&a.addRedirectOrigin(this.origin+this.basePath);var c={status:0};return new Promise(function(c){b.prepareRequest(a),b.doSend(a,a.request,c)}).then(function(a){return c=a}).then(function(){return b.prepareResponse(a,c)}).then(function(){return a.doReceive(c),c}).catch(function(a){throw c.entity=null,e.of(a)})},c.prototype.doSend=function(a,b,c){},c.prototype.subscribe=function(a,b){a=Object(a)instanceof String?a:JSON.stringify(a),this.listeners[a]?this.listeners[a].indexOf(b)==-1&&this.listeners[a].push(b):this.listeners[a]=[b]},c.prototype.unsubscribe=function(a,b){if(a=Object(a)instanceof String?a:JSON.stringify(a),this.listeners[a]){var c=this.listeners[a].indexOf(b);c!=-1&&this.listeners[a].splice(c,1)}},c.prototype.socketListener=function(a){var b=JSON.parse(a.data),c=b.topic;c=Object(c)instanceof String?c:JSON.stringify(c),this.listeners[c]&&this.listeners[c].forEach(function(a){a(b)})},c.prototype.sendOverSocket=function(a){var b=this;this.socketOpen||(this.socketOpen=new Promise(function(a,c){b.send(new f.EventsUrl).then(function(a){return a.entity.urls},function(){return null}).then(function(d){var e=void 0;d?!function(){var a=b.secure?"wss://":"ws://";d=d.filter(function(b){return 0==b.indexOf(a)});var c=d.length;e=d[Math.floor(Math.random()*c)]}():e=(b.secure?"wss://":"ws://")+b.host+":"+b.port+b.basePath+"/events",b.socket=b.createWebSocket(e),b.socket.onmessage=b.socketListener.bind(b),b.socket.onopen=a,b.socket.onerror=c,b.socket.onclose=function(){b.socket=null,b.socketOpen=null}}).catch(c)})),this.socketOpen.then(function(){var c=JSON.stringify(a);b.socket.send(c)})},c.prototype.createWebSocket=function(b){var c=a(71).WebSocket;return c||console.warn("optional websocket module is not installed, therefore realtime communication is not available."),new c(b)},c.prototype.prepareRequest=function(a){var b=a.mimeType();if(!b){var c=a.request.type;"json"==c?a.mimeType("application/json;charset=utf-8"):"text"==c&&a.mimeType("text/plain;charset=utf-8")}this.toFormat(a);var d=void 0;switch(a.responseType()){case"json":d="application/json";break;case"text":d="text/*";break;default:d="application/json,text/*;q=0.5,*/*;q=0.1"}if(a.accept()||a.accept(d),this.gzip){var e=a.ifNoneMatch();e&&'""'!==e&&"*"!=e&&a.ifNoneMatch(e.slice(0,-1)+'--gzip"')}if("/connect"==a.request.path)a.request.path=a.tokenStorage.signPath(this.basePath+a.request.path).substring(this.basePath.length),a.cacheControl()&&(a.request.path+=(a.tokenStorage.token?"&":"?")+"BCB");else if(a.tokenStorage){var f=a.tokenStorage.token;f&&a.header("authorization","BAT "+f)}},c.prototype.toFormat=function(a){},c.prototype.prepareResponse=function(a,b){var c=this;b.status=1223==b.status?204:b.status;var d=void 0,e=b.headers||{},f=b.entity;if(f&&(d=a.responseType(),!d||b.status>=400)){var g=e["content-type"]||e["Content-Type"];g&&g.indexOf("application/json")>-1&&(d="json")}if(e.etag&&(e.etag=e.etag.replace("--gzip","")),a.tokenStorage){var h=e["baqend-authorization-token"]||e["Baqend-Authorization-Token"];h&&a.tokenStorage.update(h)}return new Promise(function(a){a(f&&c.fromFormat(b,f,d))}).then(function(d){b.entity=d,a.request.path.indexOf("/connect")!=-1&&d&&(c.gzip=!!d.gzip)},function(a){throw new Error("Response was not valid "+d+": "+a.message)})},c.prototype.fromFormat=function(a,b,c){},c}();Object.assign(g,{DEFAULT_BASE_PATH:"/v1",HTTP_DOMAIN:".app.baqend.com",SSL_DOMAIN:"-bq.global.ssl.fastly.net",RESPONSE_HEADERS:["baqend-authorization-token","content-type","baqend-size","baqend-acl","etag","last-modified"],connectors:[],connections:{},gzip:!1}),c.exports=g},{32:32,36:36,71:71}],24:[function(a,c,d){"use strict";var e=a(23),f=a(27),g=function(a){function c(d,e,f,g){b.classCallCheck(this,c);var h=b.possibleConstructorReturn(this,a.call(this,d,e,f,g));return h.mid=0,h.messages={},h.doReceive=h.doReceive.bind(h),addEventListener("message",h.doReceive,!1),h}return b.inherits(c,a),c.isUsable=function(a,b,c){return"undefined"!=typeof window},c.prototype.load=function(a){this.iframe=document.createElement("iframe"),this.iframe.src=this.origin+this.basePath+a,this.iframe.setAttribute("style",c.style),document.body.appendChild(this.iframe),this.queue=[],this.iframe.addEventListener("load",this.onLoad.bind(this),!1)},c.prototype.onLoad=function(){for(var a=this.queue,b=0;b<a.length;++b)this.postMessage(a[b]);this.queue=null},c.prototype.doSend=function(b,c,d){var f=this;if(b.isBinary)return a.prototype.doSend.call(this,b,c,d);this.iframe||this.load(b.request.path);var g={mid:++this.mid,method:c.method,path:c.path,headers:c.headers,entity:c.entity,responseHeaders:e.RESPONSE_HEADERS};this.messages[g.mid]=d;var h=JSON.stringify(g);this.queue?this.queue.push(h):this.postMessage(h),this.connected||setTimeout(function(){f.messages[g.mid]&&(delete f.messages[g.mid],d({status:0,error:new Error("Connection refused.")}))},1e4)},c.prototype.postMessage=function(a){this.iframe.contentWindow.postMessage(a,this.origin)},c.prototype.doReceive=function(a){if(a.origin===this.origin&&"{"==a.data[0]){var b=JSON.parse(a.data),c=this.messages[b.mid];c&&(delete this.messages[b.mid],this.connected=!0,c({status:b.status,headers:b.headers,entity:b.entity}))}},c}(f);g.style="width:1px;height:1px;position:absolute;top:-10px;left:-10px;",e.connectors.push(g),c.exports=g},{23:23,27:27}],25:[function(a,c,d){"use strict";var e=a(29),f="undefined"!=typeof window&&(!!window.chrome&&/google/i.test(navigator.vendor)||/cros i686/i.test(window.navigator.platform)),g=function(){function a(){b.classCallCheck(this,a),this.withCredentials=!1,this.tokenStorage=null,this._progress=null;var c=arguments,d=0,e=this.spec.path;if(Object(e)instanceof Array){e=this.spec.path[0];for(var f=this.spec.path.length,g=1;g<f;++g)this.spec.dynamic&&f-1==g?(e+=c[d].split("/").map(encodeURIComponent).join("/"),d+=1):e+=encodeURIComponent(c[d++])+this.spec.path[g]}for(var h="",i=0;i<this.spec.query.length;++i){var j=c[d++];void 0!==j&&null!==j&&(h+=h||~e.indexOf("?")?"&":"?",h+=this.spec.query[i]+"="+encodeURIComponent(j))}this.request={method:this.spec.method,path:e+h,entity:null,headers:{}},c[d]&&this.entity(c[d],"json"),this.responseType("json")}return a.create=function(c){var d=c.path.split("?"),e=d[0].split(/[:\*]\w*/),f=[];return d[1]&&d[1].split("&").forEach(function(a){var b=a.split("=");f.push(b[0])}),c.dynamic=c.path.indexOf("*")!=-1,c.path=e,c.query=f,function(a){function d(){return b.classCallCheck(this,d),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(d,a),b.createClass(d,[{key:"spec",get:function(){return c}}]),d}(a)},a.createExternal=function(c,d){c.path=[c.path];var e=function(a){function d(){return b.classCallCheck(this,d),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(d,a),b.createClass(d,[{key:"spec",get:function(){return c}}]),d}(a);return Object.assign(e.prototype,d),e},b.createClass(a,[{key:"isBinary",get:function(){return this.request.type in a.BINARY||this._responseType in a.BINARY}}]),a.prototype.header=function(a,b){return void 0!==b?(this.request.headers[a]=b,this):this.request.headers[a]},a.prototype.entity=function(a,b){return b||(b="string"==typeof a?/^data:(.+?)(;base64)?,.*$/.test(a)?"data-url":"text":"undefined"!=typeof Blob&&a instanceof Blob?"blob":"undefined"!=typeof Buffer&&a instanceof Buffer?"buffer":"undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer?"arraybuffer":"undefined"!=typeof FormData&&a instanceof FormData?"form":"json"),this.request.type=b,this.request.entity=a,this},a.prototype.mimeType=function(a){return this.header("content-type",a)},a.prototype.contentLength=function(a){return this.header("content-length",a)},a.prototype.ifMatch=function(a){return this.header("If-Match",this._formatETag(a))},a.prototype.ifNoneMatch=function(a){return this.header("If-None-Match",this._formatETag(a))},a.prototype.ifUnmodifiedSince=function(a){return this.header("if-unmodified-since",a&&a.toUTCString().replace("UTC","GMT"))},a.prototype.noCache=function(){return f||this.ifMatch("").ifNoneMatch("-"),this.cacheControl("max-age=0, no-cache")},a.prototype.cacheControl=function(a){return this.header("cache-control",a)},a.prototype.acl=function(a){return this.header("baqend-acl",a&&JSON.stringify(a))},a.prototype.accept=function(a){return this.header("accept",a)},a.prototype.responseType=function(a){return void 0!==a?(this._responseType=a,this):this._responseType},a.prototype.progress=function(a){return void 0!==a?(this._progress=a,this):this._progress},a.prototype.addQueryString=function(a){var b=this;if(Object(a)instanceof String)this.request.path+=a;else if(a){var c=~this.request.path.indexOf("?")?"&":"?";Object.keys(a).forEach(function(d,e){b.request.path+=c+d+"="+encodeURIComponent(a[d]),0==e&&(c="&")})}return this},a.prototype._formatETag=function(a){return a&&"*"!=a&&(a=""+a,a.indexOf('"')==-1&&(a='"'+a+'"')),a},a.prototype.doReceive=function(a){if(this.spec.status.indexOf(a.status)==-1)throw new e(this,a)},a}();Object.assign(g,{StatusCode:{NOT_MODIFIED:304,BAD_CREDENTIALS:460,BUCKET_NOT_FOUND:461,INVALID_PERMISSION_MODIFICATION:462,INVALID_TYPE_VALUE:463,OBJECT_NOT_FOUND:404,OBJECT_OUT_OF_DATE:412,PERMISSION_DENIED:466,QUERY_DISPOSED:467,QUERY_NOT_SUPPORTED:468,SCHEMA_NOT_COMPATIBLE:469,SCHEMA_STILL_EXISTS:470,SYNTAX_ERROR:471,TRANSACTION_INACTIVE:472,TYPE_ALREADY_EXISTS:473,TYPE_STILL_REFERENCED:474,SCRIPT_ABORTION:475},BINARY:{blob:!0,buffer:!0,stream:!0,arraybuffer:!0,"data-url":!0,base64:!0},GoogleOAuth:g.createExternal({method:"OAUTH",path:"https://accounts.google.com/o/oauth2/auth?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(a){this.addQueryString({redirect_uri:a+"/db/User/OAuth/google"})}}),FacebookOAuth:g.createExternal({method:"OAUTH",path:"https://www.facebook.com/dialog/oauth?response_type=code",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(a){this.addQueryString({redirect_uri:a+"/db/User/OAuth/facebook"})}}),GitHubOAuth:g.createExternal({method:"OAUTH",path:"https://github.com/login/oauth/authorize?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(a){this.addQueryString({redirect_uri:a+"/db/User/OAuth/github"})}}),LinkedInOAuth:g.createExternal({method:"OAUTH",path:"https://www.linkedin.com/uas/oauth2/authorization?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(a){this.addQueryString({redirect_uri:a+"/db/User/OAuth/linkedin"})}}),TwitterOAuth:g.createExternal({method:"OAUTH",path:"",query:[],status:[200]},{addRedirectOrigin:function(a){this.request.path=a+"/db/User/OAuth1/twitter"}})}),c.exports=g},{29:29}],26:[function(a,c,d){"use strict";var e,f,g,h=a(23),i=a(32),j=function(c){function d(a,g,h,i){b.classCallCheck(this,d);var j=b.possibleConstructorReturn(this,c.call(this,a,g,h,i));return j.cookie=null,j.http=h?f:e,j}return b.inherits(d,c),d.isUsable=function(b,c,d){if(!e)try{e=a("http"),f=a("https"),g=a("stream")}catch(a){}return e&&e.Server},d.prototype.doSend=function(a,b,c){var d=this;b.host=this.host,b.port=this.port,b.path=this.basePath+b.path;var e=b.entity,f=b.type,g=a.responseType();this.cookie&&a.withCredentials&&(b.headers.cookie=this.cookie);var h=this.http.request(b,function(a){var b=a.headers["set-cookie"];b&&(d.cookie=d.parseCookie(b+""));var e=a.statusCode;if(e>=400&&(g="json"),"stream"==g)return void c({status:e,headers:a.headers,entity:a});var f=g&&"text"!=g&&"json"!=g,h=[];f||a.setEncoding("utf-8"),a.on("data",function(a){h.push(a)}),a.on("end",function(){c({status:e,headers:a.headers,entity:f?Buffer.concat(h):h.join("")})})});h.on("error",function(a){c({status:0,error:a})}),"stream"==f?e.pipe(h):"buffer"==f?h.end(e):f?h.end(e,"utf8"):h.end()},d.prototype.parseCookie=function(a){for(var b,c=a.split(";"),d=0;b=c[d];++d)if(0==b.indexOf("Expires=")){var e=Date.parse(b.substring(8));if(e<Date.now())return null}return c[0]},d.prototype.toFormat=function(a){var b=a.request.type;if(b){var c=a.request.entity,d=a.mimeType();switch(b){case"stream":if(!a.contentLength())throw new i("You must specify a content length while making a stream based upload.");break;case"buffer":break;case"arraybuffer":b="buffer",c=new Buffer(c);break;case"data-url":var e=c.match(/^data:(.+?)(;base64)?,(.*)$/),f=e[2];c=e[3],b="buffer",d=d||e[1],c=f?new Buffer(c,"base64"):new Buffer(decodeURIComponent(c),"utf8");break;case"base64":b="buffer",c=new Buffer(c,"base64");break;case"json":"string"!=typeof c&&(c=JSON.stringify(c));break;case"text":break;default:throw new Error("The request type "+b+" is not supported")}a.entity(c,b).mimeType(d)}},d.prototype.fromFormat=function(a,b,c){return"json"==c?b=JSON.parse(b):"data-url"==c||"base64"==c?(b=b.toString("base64"),"data-url"==c&&(b="data:"+a.headers["content-type"]+";base64,"+b)):"arraybuffer"==c&&(b=b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength)),b},d}(h);h.connectors.push(j),c.exports=j},{23:23,32:32,undefined:void 0}],27:[function(a,c,d){"use strict";var e=a(23),f=function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.isUsable=function(a,b,c){if("undefined"==typeof window)return!1;var d="https:"==location.protocol,e=location.port||(d?443:80);return location.hostname==a&&e==b&&d==c},c.prototype.doSend=function(a,b,c){if("OAUTH"==b.method)return void addEventListener("storage",function a(b){"oauth-response"==b.key&&(c(JSON.parse(b.newValue)),localStorage.removeItem("oauth-response"),removeEventListener("storage",a,!1))},!1);var d=new XMLHttpRequest,f=this.origin+this.basePath+b.path;d.onreadystatechange=function(){if(2==d.readyState&&d.status>=400&&(d.responseType="text"),4==d.readyState){var a={headers:{},status:d.status,entity:d.response||d.responseText};e.RESPONSE_HEADERS.forEach(function(b){a.headers[b]=d.getResponseHeader(b)}),c(a)}},d.upload.onprogress=a.progress(),d.open(b.method,f,!0);var g=b.entity,h=b.headers;for(var i in h)d.setRequestHeader(i,h[i]);switch(d.withCredentials=a.withCredentials,a.responseType()){case"arraybuffer":d.responseType="arraybuffer";break;case"blob":case"data-url":case"base64":d.responseType="blob"}d.send(g)},c.prototype.fromFormat=function(a,c,d){if("json"==d)c=JSON.parse(c);else if("data-url"==d||"base64"==d){var e=function(){var a=new FileReader;return a.readAsDataURL(c),{v:new Promise(function(b,c){a.onload=b,a.onerror=c}).then(function(){var b=a.result;return"base64"==d&&(b=b.substring(b.indexOf(",")+1)),b})}}();if("object"===("undefined"==typeof e?"undefined":b.typeof(e)))return e.v}return c},c.prototype.toFormat=function(a){var b=a.request.type;if(b){var c=a.request.entity,d=a.mimeType();switch(b){case"blob":d=d||c.type;break;case"arraybuffer":case"form":break;case"data-url":var e=c.match(/^data:(.+?)(;base64)?,(.*)$/),f=e[2];if(c=e[3],b="blob",d=d||e[1],!f){c=decodeURIComponent(c);break}case"base64":for(var g=atob(c),h=g.length,i=new Uint8Array(h),j=0;j<h;++j)i[j]=g.charCodeAt(j);b="blob",c=new Blob([i],{type:d});break;case"json":"string"!=typeof c&&(c=JSON.stringify(c));break;case"text":}a.entity(c,b).mimeType(d)}},c}(e);e.connectors.push(f),c.exports=f},{23:23}],28:[function(a,b,c){"use strict";c.Message=a(25),c.Connector=a(23),c.NodeConnector=a(26),c.XMLHttpConnector=a(27),c.IFrameConnector=a(24)},{23:23,24:24,25:25,26:26,27:27}],29:[function(a,c,d){"use strict";var e=a(32),f=function(a){function c(d,e){b.classCallCheck(this,c);var f=e.entity||e.error||{},g=0==e.status?"Request":"Response",h=f.message||"Handling the "+g+" for "+d.request.method+" "+d.request.path,i=b.possibleConstructorReturn(this,a.call(this,h,f));i.name=f.className||"CommunicationError",i.reason=f.reason||"Communication failed",i.status=e.status,f.data&&(i.data=f.data);for(var j=f;j&&j.stackTrace;){i.stack+="\nServerside Caused by: "+j.className+" "+j.message;for(var k=j.stackTrace,l=0;l<k.length;++l){var m=k[l];i.stack+="\n    at "+m.className+"."+m.methodName,i.stack+=" ("+m.fileName+":"+m.lineNumber+")"}j=j.cause}return i}return b.inherits(c,a),c}(e);c.exports=f},{32:32}],30:[function(a,c,d){"use strict";var e=a(32),f=function(a){function c(d){b.classCallCheck(this,c);var e=b.possibleConstructorReturn(this,a.call(this,"The entity "+d+" is managed by a different db."));return e.entity=d,e}return b.inherits(c,a),c}(e);c.exports=f},{32:32}],31:[function(a,c,d){"use strict";var e=a(32),f=function(a){function c(d){b.classCallCheck(this,c);var e=b.possibleConstructorReturn(this,a.call(this,"Entity "+d+" is not a valid entity"));return e.entity=d,e}return b.inherits(c,a),c}(e);c.exports=f},{32:32}],32:[function(a,b,c){"use strict";function d(a,b){a=a?a:"An unexpected persistent error occured.",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=a,this.name=this.constructor.name,b&&(this.cause=b,b.stack&&(this.stack+="\nCaused By: "+b.stack))}d.of=function(a){return a instanceof d?a:new d(null,a)},d.prototype=Object.create(Error.prototype,{constructor:{value:d,enumerable:!1,configurable:!0}}),b.exports=d},{}],33:[function(a,c,d){"use strict";var e=a(32),f=function(a){function c(d){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.call(this,"The transaction has been rollbacked",d))}return b.inherits(c,a),c}(e);c.exports=f},{32:32}],34:[function(a,b,c){"use strict";c.CommunicationError=a(29),c.IllegalEntityError=a(31),c.EntityExistsError=a(30),c.PersistentError=a(32),c.RollbackError=a(33)},{29:29,30:30,31:31,32:32,33:33}],35:[function(a,b,c){"use strict";a(153),a(149),Object.assign||a(150),Object.setPrototypeOf||a(151),"undefined"==typeof Promise&&a(152),Array.from||(a(147),a(148)),"undefined"==typeof Symbol&&a(154),b.exports=a(6)},{147:147,148:148,149:149,150:150,151:151,152:152,153:153,154:154,6:6}],36:[function(a,b,c){"use strict";var d=a(25);c.ListAllResources=d.create({method:"GET",path:"/",status:[200]}),c.ApiVersion=d.create({method:"GET",path:"/version",status:[200]}),c.EventsUrl=d.create({method:"GET",path:"/events-url",status:[200]}),c.Specification=d.create({method:"GET",path:"/spec",status:[200]}),c.GetBloomFilter=d.create({method:"GET",path:"/bloomfilter",status:[200]}),c.GetOrestesConfig=d.create({method:"GET",path:"/config",status:[200]}),c.UpdateOrestesConfig=d.create({method:"PUT",path:"/config",status:[200,202]}),c.Connect=d.create({method:"GET",path:"/connect",status:[200]}),c.Status=d.create({method:"GET",path:"/status",status:[200]}),c.BannedIp=d.create({method:"GET",path:"/banned/:ip",status:[204]}),c.Banned=d.create({method:"GET",path:"/banned",status:[]}),c.Unban=d.create({method:"DELETE",path:"/banned",status:[204]}),c.UnbanIp=d.create({method:"DELETE",path:"/banned/:ip",status:[204]}),c.GetBucketNames=d.create({method:"GET",path:"/db",status:[200]}),c.GetBucketIds=d.create({method:"GET",path:"/db/:bucket/ids?start=0&count=-1",status:[200]}),c.ExportBucket=d.create({method:"GET",path:"/db/:bucket",status:[200]}),c.ImportBucket=d.create({method:"PUT",path:"/db/:bucket",status:[200]}),c.TruncateBucket=d.create({method:"DELETE",path:"/db/:bucket",status:[200]}),c.CreateObject=d.create({method:"POST",path:"/db/:bucket",status:[201,202]}),c.GetObject=d.create({method:"GET",path:"/db/:bucket/:oid",status:[200,304]}),c.ReplaceObject=d.create({method:"PUT",path:"/db/:bucket/:oid",status:[200,202]}),c.DeleteObject=d.create({method:"DELETE",path:"/db/:bucket/:oid",status:[202,204]}),c.GetAllSchemas=d.create({method:"GET",path:"/schema",status:[200]}),c.UpdateAllSchemas=d.create({method:"POST",path:"/schema",status:[200]}),c.ReplaceAllSchemas=d.create({method:"PUT",path:"/schema",status:[200]}),c.GetSchema=d.create({method:"GET",path:"/schema/:bucket",status:[200]}),c.UpdateSchema=d.create({method:"POST",path:"/schema/:bucket",status:[200]}),c.ReplaceSchema=d.create({method:"PUT",path:"/schema/:bucket",status:[200]}),c.DeleteSchema=d.create({method:"DELETE",path:"/schema/:bucket",status:[204]}),c.AdhocQuery=d.create({method:"GET",path:"/db/:bucket/query?q&start=0&count=-1&sort=&eager=",status:[200]}),c.AdhocQueryPOST=d.create({method:"POST",path:"/db/:bucket/query?start=0&count=-1&sort=",status:[200]}),c.AdhocCountQuery=d.create({method:"GET",path:"/db/:bucket/count?q",status:[200]}),c.AdhocCountQueryPOST=d.create({method:"POST",path:"/db/:bucket/count",status:[200]}),c.ListQueryResources=d.create({method:"GET",path:"/query",status:[200]}),c.CreateQuery=d.create({method:"POST",path:"/query",status:[201]}),c.ListThisQueryResources=d.create({method:"GET",path:"/query/:qid",status:[200]}),c.GetQueryCode=d.create({method:"GET",path:"/query/:qid/source",status:[200]}),c.RunQuery=d.create({method:"GET",path:"/query/:qid/result?start=0&count=-1",status:[200]}),c.GetQueryParameters=d.create({method:"GET",path:"/query/:qid/parameters",status:[200]}),c.NewTransaction=d.create({method:"POST",path:"/transaction",status:[201]}),c.CommitTransaction=d.create({method:"PUT",path:"/transaction/:tid/committed",status:[200]}),c.GetObjectInExplicitVersion=d.create({method:"GET",path:"/db/:bucket/:oid/:version",status:[200]}),c.UpdatePartially=d.create({method:"POST",path:"/db/:bucket/:oid",status:[204]}),c.UpdateField=d.create({method:"POST",path:"/db/:bucket/:oid/:field",status:[204]}),c.Login=d.create({method:"POST",path:"/db/User/login",status:[200]}),c.Register=d.create({method:"POST",path:"/db/User/register",status:[200,204]}),c.Me=d.create({method:"GET",path:"/db/User/me",status:[200]}),c.ValidateUser=d.create({method:"GET",path:"/db/User/validate",status:[200]}),c.Logout=d.create({method:"GET",path:"/db/User/logout",status:[204]}),c.NewPassword=d.create({method:"POST",path:"/db/User/password",status:[200]}),c.Verify=d.create({method:"GET",path:"/db/User/verify?token=",status:[204]}),c.OAuth2=d.create({method:"GET",path:"/db/User/OAuth/:provider?state=&code=&oauth_verifier=&oauth_token=&error_description=",status:[200]}),c.OAuth1=d.create({method:"GET",path:"/db/User/OAuth1/:provider",status:[200]}),c.GetBaqendCode=d.create({method:"GET",path:"/code/:bucket/:type",status:[200]}),c.SetBaqendCode=d.create({method:"PUT",path:"/code/:bucket/:type",status:[200,202]}),c.DeleteBaqendCode=d.create({method:"DELETE",path:"/code/:bucket/:type",status:[202,204]}),c.PostBaqendModule=d.create({method:"POST",path:"/code/:bucket",status:[200,204]}),c.GetBaqendModule=d.create({method:"GET",path:"/code/:bucket",status:[200,204]}),c.GetAllModules=d.create({method:"GET",path:"/code",status:[200]}),c.ListFiles=d.create({method:"GET",path:"/file/:bucket/ids?path=/&start=&count=-1",status:[200]}),c.ListBuckets=d.create({method:"GET",path:"/file/buckets",
status:[200]}),c.GetFileBucketMetadata=d.create({method:"GET",path:"/file/:bucket",status:[200]}),c.SetFileBucketMetadata=d.create({method:"PUT",path:"/file/:bucket",status:[204]}),c.DeleteFileBucket=d.create({method:"DELETE",path:"/file/:bucket",status:[204]}),c.CreateFile=d.create({method:"POST",path:"/file/:bucket",status:[200]}),c.DownloadFile=d.create({method:"GET",path:"/file/:bucket/*oid",status:[200,304]}),c.UploadFile=d.create({method:"PUT",path:"/file/:bucket/*oid",status:[200]}),c.GetFileMetadata=d.create({method:"HEAD",path:"/file/:bucket/*oid",status:[200]}),c.UpdateFileMetadata=d.create({method:"POST",path:"/file/:bucket/*oid",status:[200]}),c.DeleteFile=d.create({method:"DELETE",path:"/file/:bucket/*oid",status:[204]}),c.ListIndexes=d.create({method:"GET",path:"/index/:bucket",status:[200]}),c.CreateDropIndex=d.create({method:"POST",path:"/index/:bucket",status:[202]}),c.DropAllIndexes=d.create({method:"DELETE",path:"/index/:bucket",status:[202]}),c.DeviceRegister=d.create({method:"POST",path:"/db/Device/register",status:[204]}),c.DevicePush=d.create({method:"POST",path:"/db/Device/push",status:[204]}),c.DeviceRegistered=d.create({method:"GET",path:"/db/Device/registered",status:[200]}),c.UploadAPNSCertificate=d.create({method:"POST",path:"/config/APNSCert",status:[204]}),c.GCMAKey=d.create({method:"POST",path:"/config/GCMKey",status:[204]})},{25:25}],37:[function(a,c,d){"use strict";var e=a(7),f=function(){function a(c,d){b.classCallCheck(this,a),this.isMetadata=!!d,this.isId=!1,this.isVersion=!1,this.isAcl=!1,this.name=c,this.order=null,this.accessor=null,this.declaringType=null}return b.createClass(a,[{key:"persistentAttributeType",get:function(){return-1}},{key:"isAssociation",get:function(){return this.persistentAttributeType>a.PersistentAttributeType.EMBEDDED}},{key:"isCollection",get:function(){return this.persistentAttributeType==a.PersistentAttributeType.ELEMENT_COLLECTION}}]),a.prototype.init=function(a,b){if(this.declaringType)throw new Error("The attribute is already initialized.");this.order=b,this.accessor=new e,this.declaringType=a},a.prototype.getValue=function(a){return this.accessor.getValue(a,this)},a.prototype.setValue=function(a,b){this.accessor.setValue(a,this,b)},a.prototype.getJsonValue=function(a,b){},a.prototype.setJsonValue=function(a,b,c){},a.prototype.toJSON=function(){},a}();f.PersistentAttributeType={BASIC:0,ELEMENT_COLLECTION:1,EMBEDDED:2,MANY_TO_MANY:3,MANY_TO_ONE:4,ONE_TO_MANY:5,ONE_TO_ONE:6},c.exports=f},{7:7}],38:[function(a,c,d){"use strict";function e(a){return a instanceof Date?a.toISOString().replace(/\.?0*Z/,"Z"):null}function f(a,b){var c="string"==typeof a?new Date(a):null;return b&&c&&b.toISOString()==c.toISOString()?b:c}var g=a(51),h=a(5),i=function(a){function c(d,e,f){b.classCallCheck(this,c),0!=d.indexOf("/db/")&&(d="/db/"+d);var g=b.possibleConstructorReturn(this,a.call(this,d,e));return g.noResolving=f,g}return b.inherits(c,a),b.createClass(c,[{key:"persistenceType",get:function(){return g.PersistenceType.BASIC}}]),c.prototype.toJsonValue=function(a,b){return null===b||void 0===b?null:this.typeConstructor(b)},c.prototype.fromJsonValue=function(a,b,c){return null===b||void 0===b?null:b},c.prototype.toString=function(){return"BasicType("+this.ref+")"},c}(g);Object.assign(i,{Boolean:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.fromJsonValue=function(b,c,d){return"string"==typeof c?"false"!==c:a.prototype.fromJsonValue.call(this,b,c,d)},c}(i))("Boolean",Boolean),Double:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.fromJsonValue=function(b,c,d){return"string"==typeof c?parseFloat(c):a.prototype.fromJsonValue.call(this,b,c,d)},c}(i))("Double",Number),Integer:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.fromJsonValue=function(b,c,d){return"string"==typeof c?parseInt(c):a.prototype.fromJsonValue.call(this,b,c,d)},c}(i))("Integer",Number),String:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c}(i))("String",String),DateTime:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.toJsonValue=function(a,b){return e(b)},c.prototype.fromJsonValue=function(a,b,c){return f(b,c)},c}(i))("DateTime",Date),Date:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.toJsonValue=function(a,b){var c=e(b);return c?c.substring(0,c.indexOf("T")):null},c.prototype.fromJsonValue=function(a,b,c){return f(b,c)},c}(i))("Date",Date),Time:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.toJsonValue=function(a,b){var c=e(b);return c?c.substring(c.indexOf("T")+1):null},c.prototype.fromJsonValue=function(a,b,c){return"string"==typeof b?f("1970-01-01T"+b,c):b},c}(i))("Time",Date),GeoPoint:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.toJsonValue=function(a,b){return b instanceof h?b:null},c.prototype.fromJsonValue=function(a,b){return b?new h(b):null},c}(i))("GeoPoint",h),JsonArray:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.init=function(a){this._enhancer=a},c.prototype.toJsonValue=function(a,b){return Array.isArray(b)?b:null},c.prototype.fromJsonValue=function(a,b){return Array.isArray(b)?b:null},c}(i))("JsonArray",Array),JsonObject:new(function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.prototype.init=function(a){this._enhancer=a},c.prototype.toJsonValue=function(a,b){return b&&b.constructor==Object?b:null},c}(i))("JsonObject",Object)}),c.exports=i},{5:5,51:51}],39:[function(a,c,d){"use strict";var e=a(48),f=function(a){function c(d,e){b.classCallCheck(this,c);var f=b.possibleConstructorReturn(this,a.call(this,d,e));return f.typeConstructor=null,f}return b.inherits(c,a),b.createClass(c,[{key:"collectionType",get:function(){return e.CollectionType.COLLECTION}}]),c}(e);c.exports=f},{48:48}],40:[function(a,c,d){"use strict";var e=function(){function a(c,d){if(b.classCallCheck(this,a),Object(c)instanceof String){var e={};e[c]=a.ASC,this.keys=[e]}else if(Object(c)instanceof Array)this.keys=c;else{if(!c)throw new Error("The keys parameter must be an String, Object or Array.");this.keys=[c]}this.drop=!1,this.unique=d===!0}return a.prototype.hasKey=function(a){for(var b=0;b<this.keys.length;b++)if(this.keys[b][a])return!0;return!1},a.prototype.toJSON=function(){return{unique:this.unique,keys:this.keys,drop:this.drop}},b.createClass(a,[{key:"isCompound",get:function(){return this.keys.length>1}},{key:"isUnique",get:function(){return this.unique}}]),a}();Object.assign(e,{ASC:"asc",DESC:"desc",GEO:"geo",fromJSON:function(a){return new e(a.keys,a.unique)}}),c.exports=e},{}],41:[function(a,c,d){"use strict";var e=a(44),f=a(51),g=a(20),h=function(a){function c(d,e){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.call(this,d,e))}return b.inherits(c,a),b.createClass(c,[{key:"persistenceType",get:function(){return f.PersistenceType.EMBEDDABLE}}]),c.prototype.createProxyClass=function(){return this._enhancer.createProxy(g.Managed)},c.prototype.createObjectFactory=function(a){return g.ManagedFactory.create(this,a)},c.prototype.toJsonValue=function(b,c){return b._root&&c instanceof this.typeConstructor&&!c._metadata._root&&(c._metadata._root=b._root),a.prototype.toJsonValue.call(this,b,c)},c.prototype.fromJsonValue=function(b,c,d){return c&&(d instanceof this.typeConstructor||(d=this.create()),b._root&&!d._metadata._root&&(d._metadata._root=b._root)),a.prototype.fromJsonValue.call(this,b,c,d)},c.prototype.toString=function(){return"EmbeddableType("+this.ref+")"},c}(e);c.exports=h},{20:20,44:44,51:51}],42:[function(a,c,d){"use strict";var e=a(20),f=a(50),g=a(38),h=a(51),i=a(44),j=a(71),k=function(a){function c(d,e,f){b.classCallCheck(this,c);var g=b.possibleConstructorReturn(this,a.call(this,d,f));return g.declaredId=null,g.declaredVersion=null,g.declaredAcl=null,g.superType=e,g.loadPermission=new j.Permission,g.updatePermission=new j.Permission,g.deletePermission=new j.Permission,g.queryPermission=new j.Permission,g.schemaSubclassPermission=new j.Permission,g.insertPermission=new j.Permission,g}return b.inherits(c,a),b.createClass(c,[{key:"persistenceType",get:function(){return h.PersistenceType.ENTITY}},{key:"id",get:function(){return this.declaredId||this.superType.id}},{key:"version",get:function(){return this.declaredVersion||this.superType.version}},{key:"acl",get:function(){return this.declaredAcl||this.superType.acl}}]),c.prototype.createProxyClass=function(){var a=this.superType.typeConstructor;if(a===Object)switch(this.name){case"User":a=e.User;break;case"Role":a=e.Role;break;default:a=e.Entity}return this._enhancer.createProxy(a)},c.prototype.createObjectFactory=function(a){switch(this.name){case"User":return e.UserFactory.create(this,a);case"Device":return e.DeviceFactory.create(this,a);case"Object":return}return e.EntityFactory.create(this,a)},c.prototype.fromJsonValue=function(b,c,d,e){return e?a.prototype.fromJsonValue.call(this,b,c,d):c?b.db.getReference(c):null},c.prototype.toJsonValue=function(b,c,d){return d?a.prototype.toJsonValue.call(this,b,c):c instanceof this.typeConstructor?(c.attach(b.db),c.id):null},c.prototype.toString=function(){return"EntityType("+this.ref+")"},c.prototype.toJSON=function(){var b=a.prototype.toJSON.call(this);return b.acl.schemaSubclass=this.schemaSubclassPermission,b.acl.insert=this.insertPermission,b.acl.update=this.updatePermission,b.acl.delete=this.deletePermission,b.acl.query=this.queryPermission,b},c}(i),l=function(a){function c(){b.classCallCheck(this,c);var d=b.possibleConstructorReturn(this,a.call(this,k.Object.ref,null,Object));return d.declaredId=new f("id",g.String,!0),d.declaredId.init(d,0),d.declaredId.isId=!0,d.declaredVersion=new f("version",g.Double,!0),d.declaredVersion.init(d,1),d.declaredVersion.isVersion=!0,d.declaredAcl=new f("acl",g.JsonObject,!0),d.declaredAcl.init(d,2),d.declaredAcl.isAcl=!0,d.declaredAttributes=[d.declaredId,d.declaredVersion,d.declaredAcl],d}return b.inherits(c,a),b.createClass(c,null,[{key:"ref",get:function(){return"/db/Object"}}]),c}(k);k.Object=l,c.exports=k},{20:20,38:38,44:44,50:50,51:51,71:71}],43:[function(a,c,d){"use strict";var e=a(48),f=function(a){function c(d,e){b.classCallCheck(this,c);var f=b.possibleConstructorReturn(this,a.call(this,d,e));return f.typeConstructor=Array,f}return b.inherits(c,a),b.createClass(c,[{key:"collectionType",get:function(){return e.CollectionType.LIST}}],[{key:"ref",get:function(){return"/db/collection.List"}}]),c.prototype.getJsonValue=function(a,b){var c=this.getValue(b);if(c instanceof this.typeConstructor){for(var d=c.length,e=new Array(d),f=c.__persistedState__||[],g=f.length!=d,h=new Array(d),i=0;i<d;++i){var j=c[i];h[i]=this.elementType.toJsonValue(a,j),e[i]=j,g|=f[i]!==j}return a.isReady||(Object.defineProperty(c,"__persistedState__",{value:e,configurable:!0}),a.isPersistent&&g&&a.setDirty()),h}return null},c.prototype.setJsonValue=function(a,b,c){var d=null;if(c){d=this.getValue(b);var e=c.length;d instanceof this.typeConstructor||(d=new this.typeConstructor(e));var f=new Array(e),g=d.__persistedState__||[];e<d.length&&d.splice(e,d.length-e);for(var h=0;h<e;++h){var i=this.elementType.fromJsonValue(a,c[h],g[h]);f[h]=d[h]=i}a.isReady||Object.defineProperty(d,"__persistedState__",{value:f,configurable:!0})}this.setValue(b,d)},c.prototype.toJSON=function(){return{name:this.name,type:c.ref+"["+this.elementType.ref+"]",order:this.order}},c}(e);c.exports=f},{48:48}],44:[function(a,c,d){"use strict";var e=a(51),f=a(66),g=a(70),h=a(20),i=function(a){function c(d,e){b.classCallCheck(this,c);var g=b.possibleConstructorReturn(this,a.call(this,0!=d.indexOf("/db/")?"/db/"+d:d,e));return g._enhancer=null,g.declaredAttributes=[],g.schemaAddPermission=new f,g.schemaReplacePermission=new f,g}return b.inherits(c,a),b.createClass(c,[{key:"validationCode",get:function(){return this._validationCode},set:function(a){a?this._validationCode=g.compile(this,a):this._validationCode=null}},{key:"typeConstructor",get:function(){return this._typeConstructor||(this.typeConstructor=this.createProxyClass()),this._typeConstructor},set:function(a){if(this._typeConstructor)throw new Error("Type constructor has already been set.");var b=a.prototype instanceof h.Entity;if(this.isEntity){if(!b)throw new TypeError("Entity classes must extends the Entity class.")}else if(!(a.prototype instanceof h.Managed)||b)throw new TypeError("Embeddable classes must extends the Managed class.");this._enhancer.enhance(this,a),this._typeConstructor=a}}]),c.prototype.init=function(a){this._enhancer=a,this._typeConstructor&&!this._enhancer.getIdentifier(this._typeConstructor)&&this._enhancer.setIdentifier(this._typeConstructor,this.ref)},c.prototype.createProxyClass=function(){},c.prototype.createObjectFactory=function(a){},c.prototype.create=function(){var a;return a=Object.create(this.typeConstructor.prototype),h.Managed.init(a),a},c.prototype.attributes=function(){var a,b=void 0,c=0,d=this;return this.superType&&(b=this.superType.attributes()),a={},a[Symbol.iterator]=function(){return this},a.next=function(){if(b){var a=b.next();if(!a.done)return a;b=null}return c<d.declaredAttributes.length?{value:d.declaredAttributes[c++],done:!1}:{done:!0}},a},c.prototype.addAttribute=function(a,b){if(this.getAttribute(a.name))throw new Error("An attribute with the name "+a.name+" is already declared.");b=null==a.order?"undefined"==typeof b?this.declaredAttributes.length:b:a.order,a.init(this,b),this.declaredAttributes.push(a),this._typeConstructor&&"Object"!=this.name&&this._enhancer.enhanceProperty(this._typeConstructor,a)},c.prototype.removeAttribute=function(a){var b=this.declaredAttributes.length;if(this.declaredAttributes=this.declaredAttributes.filter(function(b){return b.name!=a}),b==this.declaredAttributes.length)throw new Error("An Attribute with the name "+a+" is not declared.")},c.prototype.getAttribute=function(a){var b=this.getDeclaredAttribute(a);return!b&&this.superType&&(b=this.superType.getAttribute(a)),b},c.prototype.getDeclaredAttribute=function(a){for(var b=this.declaredAttributes,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;if(f.name===a||f.order===a)return f}return null},c.prototype.fromJsonValue=function(a,b,c){if(b)for(var d=this.attributes(),e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;h.isMetadata||h.setJsonValue(a,c,b[h.name])}else c=null;return c},c.prototype.toJsonValue=function(a,b){var c=null;if(b instanceof this.typeConstructor){c={};for(var d=this.attributes(),e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;h.isMetadata||(c[h.name]=h.getJsonValue(a,b))}}return c},c.prototype.toJSON=function(){var a={};a.class=this.ref,this.superType&&(a.superClass=this.superType.ref),this.isEmbeddable&&(a.embedded=!0),a.acl={load:this.loadPermission,schemaAdd:this.schemaAddPermission,schemaReplace:this.schemaReplacePermission};for(var b=a.fields={},c=this.declaredAttributes,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;g.isMetadata||(b[g.name]=g)}return a},c.prototype.references=function(){var a,b=this.attributes(),c=[];return a={},a[Symbol.iterator]=function(){return this},a.next=function(){for(var a=b,d=Array.isArray(a),e=0,a=d?a:a[Symbol.iterator]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{if(e=a.next(),e.done)break;f=e.value}var g=f,h=g.isCollection?g.elementType:g.type;if(h.isEntity)return{done:!1,value:{path:[g.name]}};if(h.isEmbeddable)for(var i=h.references(),j=Array.isArray(i),k=0,i=j?i:i[Symbol.iterator]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{if(k=i.next(),k.done)break;l=k.value}var m=l;c.push({done:!1,value:{path:[g.name].concat(m.path)}})}}return c.length?c.pop():{done:!0}},a},c}(e);c.exports=i},{20:20,51:51,66:66,70:70}],45:[function(a,c,d){"use strict";var e=a(48),f=a(32),g=function(a){function c(d,e,f){b.classCallCheck(this,c);var g=b.possibleConstructorReturn(this,a.call(this,d,f));return g.keyType=e,g.typeConstructor=Map,g}return b.inherits(c,a),b.createClass(c,[{key:"collectionType",get:function(){return e.CollectionType.MAP}}],[{key:"ref",get:function(){return"/db/collection.Map"}}]),c.prototype.getJsonValue=function(a,b){var c=this.getValue(b);if(c instanceof this.typeConstructor){for(var d={},e=c.__persistedState__||{},g=c.__persistedSize__!==c.size,h={},i=c.entries(),j=Array.isArray(i),k=0,i=j?i:i[Symbol.iterator]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{if(k=i.next(),k.done)break;l=k.value}var m=l;if(null===m[0]||void 0===m[0])throw new f("Map keys can't be null nor undefined.");var n=this.keyType.toJsonValue(a,m[0]);h[n]=this.elementType.toJsonValue(a,m[1]),d[n]=[m[0],m[1]],g|=(e[n]||[])[1]!==m[1]}return a.isReady||(Object.defineProperties(c,{__persistedState__:{value:d,configurable:!0},__persistedSize__:{value:c.size,configurable:!0}}),a.isPersistent&&g&&a.setDirty()),h}return null},c.prototype.setJsonValue=function(a,b,c){var d=null;if(c){d=this.getValue(b),d instanceof this.typeConstructor||(d=new this.typeConstructor);var e={},f=d.__persistedState__||{};d.clear();for(var g in c){var h=f[g]||[],i=this.keyType.fromJsonValue(a,g,h[0]),j=this.elementType.fromJsonValue(a,c[g],h[1]);e[g]=[i,d],d.set(i,j)}a.isReady||Object.defineProperties(d,{__persistedState__:{value:e,configurable:!0},__persistedSize__:{value:d.size,configurable:!0}})}this.setValue(b,d)},c.prototype.toJSON=function(){return{name:this.name,type:c.ref+"["+this.keyType.ref+","+this.elementType.ref+"]",order:this.order}},c}(e);c.exports=g},{32:32,48:48}],46:[function(a,c,d){"use strict";var e=(a(38),a(44)),f=a(42),g=a(9),h=a(47),i=a(40),j=a(62),k=a(25).StatusCode,l=a(36),m=function(a){function c(d){b.classCallCheck(this,c);var e=b.possibleConstructorReturn(this,a.call(this));return e.isInitialized=!1,e.entityManagerFactory=d,e.entities=null,e.embeddables=null,e.baseTypes=null,e._enhancer=new g,e}return b.inherits(c,a),c.prototype.init=function(a){if(this.isInitialized)throw new Error("Metamodel is already initialized.");this.fromJSON(a||[]),this.isInitialized=!0},c.prototype._getRef=function(a){var b;return Object(a)instanceof String?(b=a,0!=b.indexOf("/db/")&&(b="/db/"+a)):b=this._enhancer.getIdentifier(a),b},c.prototype.entity=function(a){var b=this._getRef(a);return b?this.entities[b]:null},c.prototype.baseType=function(a){var b=null;if(Object(a)instanceof String)b=this._getRef(a);else for(var c in this.baseTypes){var d=this.baseTypes[c];if(!d.noResolving&&d.typeConstructor==a){b=c;break}}return b?this.baseTypes[b]:null},c.prototype.embeddable=function(a){var b=this._getRef(a);return b?this.embeddables[b]:null},c.prototype.managedType=function(a){return this.baseType(a)||this.entity(a)||this.embeddable(a)},c.prototype.addType=function(a){var b;if(a.isBasic?b=this.baseTypes:a.isEmbeddable?(a.init(this._enhancer),b=this.embeddables):a.isEntity&&(a.init(this._enhancer),b=this.entities,null==a.superType&&a.ref!=f.Object.ref&&(a.superType=this.entity(f.Object.ref))),b[a.ref])throw new Error("The type "+a.ref+" is already declared.");return b[a.ref]=a},c.prototype.load=function(){var a=this;if(this.isInitialized)throw new Error("Metamodel is already initialized.");return this.withLock(function(){var b=new l.GetAllSchemas;return a.entityManagerFactory.send(b).then(function(b){return a.init(b.entity),a})})},c.prototype.save=function(a){var b=this;return this._send(a||this.toJSON()).then(function(){return b})},c.prototype.update=function(a){var b=this;return this._send(a).then(function(a){return b.fromJSON(a.entity),b})},c.prototype._send=function(a){var b=this;if(!this.isInitialized)throw new Error("Metamodel is not initialized.");return this.withLock(function(){var c;return c=a instanceof e?new l.UpdateSchema(a.name,a.toJSON()):new l.UpdateAllSchemas(a),b.entityManagerFactory.send(c)})},c.prototype.toJSON=function(){var a=[];for(var b in this.entities)a.push(this.entities[b]);for(b in this.embeddables)a.push(this.embeddables[b]);return a},c.prototype.fromJSON=function(a){var b=new h,c=b.buildModels(a);this.baseTypes={},this.embeddables={},this.entities={};for(var d in c){var e=c[d];this.addType(e)}},c.prototype.createIndex=function(a,b){b.drop=!1;var c=new l.CreateDropIndex(a,b.toJSON());return this.entityManagerFactory.send(c)},c.prototype.dropIndex=function(a,b){b.drop=!0;var c=new l.CreateDropIndex(a,b.toJSON());return this.entityManagerFactory.send(c)},c.prototype.dropAllIndexes=function(a){var b=new l.DropAllIndexes(a);return this.entityManagerFactory.send(b)},c.prototype.getIndexes=function(a){var b=new l.ListIndexes(a);return this.entityManagerFactory.send(b).then(function(a){return a.entity.map(function(a){return new i(a.keys,a.unique)})},function(a){if(a.status==k.BUCKET_NOT_FOUND||a.status==k.OBJECT_NOT_FOUND)return null;throw a})},c}(j);c.exports=m},{25:25,36:36,38:38,40:40,42:42,44:44,47:47,62:62,9:9}],47:[function(a,c,d){"use strict";var e=a(38),f=a(42),g=a(41),h=a(43),i=a(45),j=a(49),k=a(50),l=a(32),m=function(){function a(){b.classCallCheck(this,a),this.models={},this.modelDescriptors=null;for(var c=Object.keys(e),d=Array.isArray(c),f=0,c=d?c:c[Symbol.iterator]();;){var g;if(d){if(f>=c.length)break;g=c[f++]}else{if(f=c.next(),f.done)break;g=f.value}var h=g,i=e[h];i instanceof e&&(this.models[i.ref]=i)}}return a.prototype.getModel=function(a){return a in this.models?this.models[a]:this.models[a]=this.buildModel(a)},a.prototype.buildModels=function(a){this.modelDescriptors={};for(var b,c=0;b=a[c];++c)this.modelDescriptors[b.class]=b;for(var d in this.modelDescriptors)try{var e=this.getModel(d);this.buildAttributes(e)}catch(a){throw new l("Can't create model for entity class "+d,a)}return this.getModel(f.Object.ref),this.models},a.prototype.buildModel=function(a){var b,c=this.modelDescriptors[a];if(a==f.Object.ref)b=new f.Object;else{if(!c)throw new TypeError("No model available for "+a);if(c.embedded)b=new g(a);else{var d=c.superClass||f.Object.ref;b=new f(a,this.getModel(d))}}if(c){var e=c.acl;for(var h in e)b[h+"Permission"].fromJSON(e[h])}return b},a.prototype.buildAttributes=function(a){var b=this.modelDescriptors[a.ref],c=b.fields;for(var d in c){var e=c[d];a.getAttribute(d)||a.addAttribute(this.buildAttribute(e.name,e.type),e.order)}b.validationCode&&(a.validationCode=b.validationCode)},a.prototype.buildAttribute=function(a,b){if(0!=b.indexOf("/db/collection."))return new k(a,this.getModel(b));var c=b.substring(0,b.indexOf("[")),d=b.substring(b.indexOf("[")+1,b.indexOf("]")).trim();switch(c){case h.ref:return new h(a,this.getModel(d));case j.ref:return new j(a,this.getModel(d));case i.ref:var e=d.substring(0,d.indexOf(",")).trim();return d=d.substring(d.indexOf(",")+1).trim(),new i(a,this.getModel(e),this.getModel(d));default:throw new TypeError("No collection available for "+b)}},a}();c.exports=m},{32:32,38:38,41:41,42:42,43:43,45:45,49:49,50:50}],48:[function(a,c,d){"use strict";var e=a(37),f=function(a){function c(d,e){b.classCallCheck(this,c);var f=b.possibleConstructorReturn(this,a.call(this,d));return f.elementType=e,f.typeConstructor=null,f}return b.inherits(c,a),b.createClass(c,[{key:"persistentAttributeType",get:function(){return e.PersistentAttributeType.ELEMENT_COLLECTION}}]),c}(e);f.CollectionType={COLLECTION:0,LIST:1,MAP:2,SET:3},c.exports=f},{37:37}],49:[function(a,c,d){"use strict";var e=a(48),f=function(a){function c(d,e){b.classCallCheck(this,c);var f=b.possibleConstructorReturn(this,a.call(this,d,e));return f.typeConstructor=Set,f}return b.inherits(c,a),b.createClass(c,[{key:"collectionType",get:function(){return e.CollectionType.SET}}],[{key:"ref",get:function(){return"/db/collection.Set"}}]),c.prototype.getJsonValue=function(a,b){var c=this.getValue(b);if(c instanceof this.typeConstructor){for(var d={},e=c.__persistedState__||{},f=c.__persistedSize__!==c.size,g=[],h=c,i=Array.isArray(h),j=0,h=i?h:h[Symbol.iterator]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{if(j=h.next(),j.done)break;k=j.value}var l=k,m=this.elementType.toJsonValue(a,l);g.push(m),d[m]=l,f|=e[m]!==l}return a.isReady||(Object.defineProperties(c,{__persistedState__:{value:d,configurable:!0},__persistedSize__:{value:c.size,configurable:!0}}),a.isPersistent&&f&&a.setDirty()),g}return null},c.prototype.setJsonValue=function(a,b,c){var d=null;if(c){d=this.getValue(b),d instanceof this.typeConstructor||(d=new this.typeConstructor);var e={},f=d.__persistedState__||{};d.clear();for(var g=0,h=c.length;g<h;++g){var i=c[g],j=this.elementType.fromJsonValue(a,i,f[i]);d.add(j),e[i]=j}a.isReady||Object.defineProperties(d,{__persistedState__:{value:e,configurable:!0},__persistedSize__:{value:d.size,configurable:!0}})}this.setValue(b,d)},c.prototype.toJSON=function(){return{name:this.name,type:c.ref+"["+this.elementType.ref+"]",order:this.order}},c}(e);c.exports=f},{48:48}],50:[function(a,c,d){"use strict";var e=a(37),f=a(51),g=function(a){function c(d,e,f){b.classCallCheck(this,c);var g=b.possibleConstructorReturn(this,a.call(this,d,f));return g.type=e,g}return b.inherits(c,a),b.createClass(c,[{key:"typeConstructor",get:function(){return this.type.typeConstructor}},{key:"persistentAttributeType",get:function(){switch(this.type.persistenceType){case f.PersistenceType.BASIC:return e.PersistentAttributeType.BASIC;case f.PersistenceType.EMBEDDABLE:return e.PersistentAttributeType.EMBEDDED;case f.PersistenceType.ENTITY:return e.PersistentAttributeType.ONE_TO_MANY}}}]),c.prototype.getJsonValue=function(a,b){return this.type.toJsonValue(a,this.getValue(b))},c.prototype.setJsonValue=function(a,b,c){this.setValue(b,this.type.fromJsonValue(a,c,this.getValue(b)))},c.prototype.toJSON=function(){return{name:this.name,type:this.type.ref,order:this.order}},c}(e);c.exports=g},{37:37,51:51}],51:[function(a,c,d){"use strict";var e=function(){function a(c,d){if(b.classCallCheck(this,a),0!=c.indexOf("/db/"))throw new SyntaxError("Type ref "+c+" is invalid.");this.ref=c,this.name=c.substring(4),this._typeConstructor=d}return b.createClass(a,[{key:"persistenceType",get:function(){return-1}},{key:"isBasic",get:function(){return this.persistenceType==a.PersistenceType.BASIC}},{key:"isEmbeddable",get:function(){return this.persistenceType==a.PersistenceType.EMBEDDABLE}},{key:"isEntity",get:function(){return this.persistenceType==a.PersistenceType.ENTITY}},{key:"isMappedSuperclass",get:function(){return this.persistenceType==a.PersistenceType.MAPPED_SUPERCLASS}},{key:"typeConstructor",get:function(){return this._typeConstructor},set:function(a){if(this._typeConstructor)throw new Error("typeConstructor has already been set.");this._typeConstructor=a}}]),a.prototype.fromJsonValue=function(a,b,c){},a.prototype.toJsonValue=function(a,b){},a}();e.PersistenceType={BASIC:0,EMBEDDABLE:1,ENTITY:2,MAPPED_SUPERCLASS:3},c.exports=e},{}],52:[function(a,b,c){"use strict";var d=a(46);d.prototype.Attribute=a(37),d.prototype.BasicType=a(38),d.prototype.CollectionAttribute=a(39),d.prototype.EmbeddableType=a(41),d.prototype.EntityType=a(42),d.prototype.ListAttribute=a(43),d.prototype.ManagedType=a(44),d.prototype.MapAttribute=a(45),d.prototype.Metamodel=a(46),d.prototype.ModelBuilder=a(47),d.prototype.PluralAttribute=a(48),d.prototype.SetAttribute=a(49),d.prototype.SingularAttribute=a(50),d.prototype.Type=a(51),d.prototype.DbIndex=a(40),c=b.exports=new d},{37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51}],53:[function(a,c,d){"use strict";var e=a(55),f=a(54),g=a(57),h=a(58),i=h.varargs,j=function(a){function c(d,e){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.call(this,d,e))}return b.inherits(c,a),c.prototype.and=function(a){return this._addOperator("$and",i(0,arguments))},c.prototype.or=function(a){return this._addOperator("$or",i(0,arguments))},c.prototype.nor=function(a){return this._addOperator("$nor",i(0,arguments))},c.prototype.stream=function(a){return this.where({}).stream(a)},c.prototype.resultList=function(a,b,c){return this.where({}).resultList(a,b,c)},c.prototype.singleResult=function(a,b,c){return this.where({}).singleResult(a,b,c)},c.prototype.count=function(a,b){return this.where({}).count(a,b)},c.prototype._addOperator=function(a,b){if(b.length<2)throw new Error("Only two or more queries can be joined with an "+a+" operator.");return b.forEach(function(a,b){if(!(a instanceof h))throw new Error("Argument at index "+b+" is not a query.")}),new g(this.entityManager,this.resultClass,a,b)},c.prototype._addOrder=function(a,b){return new e(this.entityManager,this.resultClass)._addOrder(a,b)},c.prototype._addFilter=function(a,b,c){return new e(this.entityManager,this.resultClass)._addFilter(a,b,c)},c.prototype._addOffset=function(a){return new e(this.entityManager,this.resultClass)._addOffset(a)},c.prototype._addLimit=function(a){return new e(this.entityManager,this.resultClass)._addLimit(a)},c}(h);Object.assign(j.prototype,f),c.exports=j},{54:54,55:55,57:57,58:58}],54:[function(a,b,c){"use strict";var d=a(58).varargs,e={};Object.assign(e,{where:function(a){return this._addFilter(null,null,a)},equal:function(a,b){return this._addFilter(a,null,b)},notEqual:function(a,b){return this._addFilter(a,"$ne",b)},greaterThan:function(a,b){return this._addFilter(a,"$gt",b)},greaterThanOrEqualTo:function(a,b){return this._addFilter(a,"$gte",b)},lessThan:function(a,b){return this._addFilter(a,"$lt",b)},lessThanOrEqualTo:function(a,b){return this._addFilter(a,"$lte",b)},between:function(a,b,c){return this._addFilter(a,"$gt",b)._addFilter(a,"$lt",c)},in:function(a,b){return this._addFilter(a,"$in",d(1,arguments))},notIn:function(a,b){return this._addFilter(a,"$nin",d(1,arguments))},isNull:function(a){return this.equal(a,null)},isNotNull:function(a){return this._addFilter(a,"$exists",!0)._addFilter(a,"$ne",null)},containsAll:function(a,b){return this._addFilter(a,"$all",d(1,arguments))},mod:function(a,b,c){return this._addFilter(a,"$mod",[b,c])},matches:function(a,b){if(Object(b)instanceof RegExp||(b=new RegExp(b)),b.ignoreCase)throw new Error("RegExp.ignoreCase flag is not supported.");if(b.global)throw new Error("RegExp.global flag is not supported.");if(0!=b.source.indexOf("^"))throw new Error("regExp must be an anchored expression, i.e. it must be started with a ^.");var c=this._addFilter(a,"$regex",b.source);return b.multiline&&c._addFilter(a,"$options","m"),c},size:function(a,b){return this._addFilter(a,"$size",b)},near:function(a,b,c){return this._addFilter(a,"$nearSphere",{$geometry:{type:"Point",coordinates:[b.longitude,b.latitude]},$maxDistance:c})},withinPolygon:function(a,b){return b=d(1,arguments),this._addFilter(a,"$geoWithin",{$geometry:{type:"Polygon",coordinates:[b.map(function(a){return[a.longitude,a.latitude]})]}})}}),Object.assign(e,{lt:e.lessThan,le:e.lessThanOrEqualTo,gt:e.greaterThan,ge:e.greaterThanOrEqualTo,containsAny:e.in}),b.exports=e},{58:58}],55:[function(a,c,d){"use strict";var e=a(56),f=a(54),g=function(a){function c(d,e){
b.classCallCheck(this,c);var f=b.possibleConstructorReturn(this,a.call(this,d,e));return f._filter={},f}return b.inherits(c,a),c.prototype._addFilter=function(a,b,c){if(null!==a){if(!(Object(a)instanceof String))throw new Error("Field must be a string.");if(b){var d=this._filter[a];d instanceof Object&&Object.getPrototypeOf(d)==Object.prototype||(this._filter[a]=d={}),d[b]=c}else this._filter[a]=c}else Object.assign(this._filter,c);return this},c.prototype.toJSON=function(){return this._filter},c}(e);Object.assign(g.prototype,f),c.exports=g},{54:54,56:56}],56:[function(a,c,d){"use strict";var e=a(58),f=a(59),g=a(36),h=a(64),i=a(10),j=function(a){function c(d,e){b.classCallCheck(this,c);var f=b.possibleConstructorReturn(this,a.call(this,d,e));return f.firstResult=0,f.maxResults=-1,f._sort={},f}return b.inherits(c,a),c.prototype.stream=function(a){var b=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!b)throw new Error("Only typed queries can be executed.");void 0===a&&(a=!0);var c=this._serializeSort();return new f(this.entityManager,b.name,this._serializeQuery(),a,c,this.maxResults)},c.prototype.resultList=function(a,b,c){var d=this;a instanceof Function&&(c=b,b=a,a={});var f=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!f)throw new Error("Only typed queries can be executed.");var h,i=this._serializeQuery(),j=this._serializeSort(),k=this.entityManager._connector.host.length+i.length;return h=k>e.MAX_URI_SIZE?new g.AdhocQueryPOST(f.name,this.firstResult,this.maxResults,j).entity(i,"text"):new g.AdhocQuery(f.name,i,this.firstResult,this.maxResults,j),this.entityManager.send(h).then(function(b){return d._createResultList(b.entity,a)}).then(b,c)},c.prototype.singleResult=function(a,b,c){var d=this;a instanceof Function&&(c=b,b=a,a={});var f=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!f)throw new Error("Only typed queries can be executed.");var h,i=this._serializeQuery(),j=this._serializeSort(),k=this.entityManager._connector.host.length+i.length;return h=k>e.MAX_URI_SIZE?new g.AdhocQueryPOST(f.name,i,this.firstResult,1,j).entity(i,"text"):new g.AdhocQuery(f.name,i,this.firstResult,1,j),this.entityManager.send(h).then(function(b){return d._createResultList(b.entity,a)}).then(function(a){return a.length?a[0]:null}).then(b,c)},c.prototype.count=function(a,b){var c=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!c)throw new Error("Only typed queries can be executed.");var d,f=this._serializeQuery(),h=this.entityManager._connector.host.length+f.length;return d=h>e.MAX_URI_SIZE?new g.AdhocCountQueryPOST(c.name).entity(f,"text"):new g.AdhocCountQuery(c.name,f),this.entityManager.send(d).then(function(a){return a.entity.count}).then(a,b)},c.prototype._serializeQuery=function(){return JSON.stringify(this,function(a,b){var c=this[a];return Object(c)instanceof Date?{$date:b}:c instanceof i?c.id:b})},c.prototype._serializeSort=function(){return JSON.stringify(this._sort)},c.prototype._createResultList=function(a,b){return a.length?Promise.all(a.map(function(a){if(a.id){var c=this.entityManager.getReference(this.resultClass,a.id),d=h.get(c);return d.setJson(a),d.setPersistent(),this.entityManager.resolveDepth(c,b)}return this.entityManager.load(Object.keys(a)[0])},this)).then(function(a){return a.filter(function(a){return!!a})}):Promise.resolve([])},c.prototype._addOrder=function(a,b){return b?this._sort[a]=b:this._sort=a,this},c.prototype._addOffset=function(a){return this.firstResult=a,this},c.prototype._addLimit=function(a){return this.maxResults=a,this},c}(e);c.exports=j},{10:10,36:36,58:58,59:59,64:64}],57:[function(a,c,d){"use strict";var e=a(56),f=function(a){function c(d,e,f,g){b.classCallCheck(this,c);var h=b.possibleConstructorReturn(this,a.call(this,d,e));return h._operator=f,h._childs=g,h}return b.inherits(c,a),c.prototype.toJSON=function(){var a={};return a[this._operator]=this._childs,a},c}(e);c.exports=f},{56:56}],58:[function(a,c,d){"use strict";var e=function(){function a(c,d){b.classCallCheck(this,a),this.entityManager=c,this.resultClass=d}return a.prototype.ascending=function(a){return this._addOrder(a,1)},a.prototype.descending=function(a){return this._addOrder(a,-1)},a.prototype.sort=function(a){if(!(a instanceof Object)||Object.getPrototypeOf(a)!=Object.prototype)throw new Error("sort must be an object.");return this._addOrder(a)},a.prototype.offset=function(a){if(a<0)throw new Error("The offset can't be nagative.");return this._addOffset(a)},a.prototype.limit=function(a){if(a<0)throw new Error("The limit can't be nagative.");return this._addLimit(a)},a.prototype.resultList=function(a,b,c){},a.prototype.singleResult=function(a,b,c){},a.prototype.stream=function(a){},a.prototype.count=function(a,b){},a}();e.MAX_URI_SIZE=2e3,e.varargs=function(a,b){return Array.prototype.concat.apply([],Array.prototype.slice.call(b,a))},c.exports=e},{}],59:[function(a,c,d){"use strict";var e=a(64),f=function(){function a(c,d,e,f,g,h){b.classCallCheck(this,a),this.entityManager=c,this.bucket=d,this.fetchQuery=f,this.sort=g,this.limit=h,this.query=e,this.callbacks=[]}return a.prototype.on=function(a,b){var c=[this.bucket,this.getCachableQueryString(this.query,0,this.limit,this.sort),a,"any"].join("/"),d=this._wrapQueryCallback(b);this.entityManager._subscribe(c,d);var e={register:!0,topic:c,query:{bucket:this.bucket,matchTypes:[a],operations:["any"],query:this.query,sort:this.sort,count:this.limit}};this.fetchQuery&&(e.fromstart=!0),this.entityManager._sendOverSocket(e),this.callbacks.push({matchType:a,callback:b,topic:c,wrappedCallback:d,queryMessage:e})},a.prototype.getCachableQueryString=function(a,b,c,d){var e=a;return this.isEmptyJSONString(a)&&(e="{}"),b>0&&(e+="&start="+b),c>0&&(e+="&count="+c),this.isEmptyJSONString(d)||(e+="&sort="+d),e},a.prototype.isEmptyJSONString=function(a){return void 0===a||null===a||/^\s*(\{\s*\})?\s*$/.test(a)},a.prototype.off=function(a,b){var c=this;this.callbacks=this.callbacks.reduce(function(d,e){return b&&e.callback!=b||a&&e.matchType!=a?d.push(e):(c.entityManager._unsubscribe(e.topic,e.wrappedCallback),e.queryMessage.register=!1,c.entityManager._sendOverSocket(e.queryMessage)),d},[])},a.prototype.once=function(a,b){var c=function(d,e,f){this.off(a,c),b(d,e,f)}.bind(this);this.on(a,c)},a.prototype._wrapQueryCallback=function(a){var b=!1;return function(c){var d=c.query.bucket;if(c.match){var e=c.match.object?c.match.object:c.match.update.object?c.match.update.object:void 0,f=this._createObject(d,e,c.match.id),g=this.createCallback(c,c.match.id,f,c.match.update.operation,c.match.matchType,!1);a(g)}else b||(c.result.forEach(function(b){var e=this._createObject(d,b,b.id),f=this.createCallback(c,b.id,e,null,"match",!0);a(f)},this),b=!0)}.bind(this)},a.prototype.createCallback=function(a,b,c,d,e,f){var g={id:b,type:e,data:c,operation:d,date:new Date(a.date),target:this,initial:f,query:this.query};return void 0!==a.query.sort&&(g.sort=a.query.sort),void 0!==a.query.count&&(g.limit=a.query.count),void 0!==a.match&&(void 0!==a.match.index&&(g.index=a.match.index),void 0!==a.match.lastIndex&&(g.lastIndex=a.match.lastIndex),void 0!==a.match.sequenceNumber&&(g.sequenceNumber=a.match.sequenceNumber),void 0!==a.match.lastProcessedObjectVersion&&(g.lastProcessedObjectVersion=a.match.lastProcessedObjectVersion)),g},a.prototype._createObject=function(a,b,c){var d=this.entityManager.getReference(a,c);if(void 0!==b&&b.id===c){var f=e.get(d);f.setJson(b),f.setPersistent()}return d},a}();c.exports=f},{64:64}],60:[function(a,b,c){"use strict";c.Builder=a(53),c.Condition=a(54),c.Filter=a(55),c.Node=a(56),c.Operator=a(57),c.Query=a(58),c.Stream=a(59)},{53:53,54:54,55:55,56:56,57:57,58:58,59:59}],61:[function(a,c,d){"use strict";var e=a(36),f=a(25).StatusCode,g=function(){function a(c,d){b.classCallCheck(this,a),this._metamodel=c,this.entityManagerFactory=d}return a.prototype.functionToString=function(a){if(!a)return"";var b=a.toString();return b=b.substring(b.indexOf("{")+1,b.lastIndexOf("}")),"\n"==b.charAt(0)&&(b=b.substring(1)),"\n"==b.charAt(b.length-1)&&(b=b.substring(0,b.length-1)),b},a.prototype.stringToFunction=function(a,b){return new Function(a,b)},a.prototype.loadModules=function(){var a=new e.GetAllModules;return this.entityManagerFactory.send(a).then(function(a){return a.entity})},a.prototype.loadCode=function(a,b,c){var d=this,g=Object(a)instanceof String?a:a.name,h=new e.GetBaqendCode(g,b).responseType("text");return this.entityManagerFactory.send(h).then(function(a){return d._parseCode(g,b,c,a.entity)},function(a){if(a.status==f.OBJECT_NOT_FOUND)return null;throw a})},a.prototype.saveCode=function(a,b,c){var d=this,f=Object(a)instanceof String?a:a.name,g=c instanceof Function,h=new e.SetBaqendCode(f,b).entity(g?this.functionToString(c):c,"text").responseType("text");return this.entityManagerFactory.send(h).then(function(a){return d._parseCode(f,b,g,a.entity)})},a.prototype.deleteCode=function(a,b){var c=this,d=Object(a)instanceof String?a:a.name,f=new e.DeleteBaqendCode(d,b);return this.entityManagerFactory.send(f).then(function(){return c._parseCode(d,b,!1,null)})},a.prototype._parseCode=function(a,b,c,d){if("validate"==b){var e=this._metamodel.entity(a);return e.validationCode=d,c?e.validationCode:d}return c?this.stringToFunction(["module","exports"],d):d},a}();c.exports=g},{25:25,36:36}],62:[function(a,c,d){"use strict";var e=function(){function a(){b.classCallCheck(this,a),this._isLocked=!1,this._readyPromise=Promise.resolve(this),this._deferred=null}return a.prototype.ready=function(a,b){return this._readyPromise.then(a,b)},a.prototype.withLock=function(a,b){if(this._isLocked)throw new Error("Current operation has not been finished.");var c=this;try{this._isLocked=!0;var d=a().then(function(a){return c._isLocked=!1,a},function(a){throw b||(c._isLocked=!1),a});return this._readyPromise=d.then(function(){return c},function(a){if(!b)return c;throw a}),d}catch(a){throw b?this._readyPromise=Promise.reject(a):this._isLocked=!1,a}},b.createClass(a,[{key:"isReady",get:function(){return!this._isLocked}}]),a}();c.exports=e},{}],63:[function(a,c,d){"use strict";var e=a(36),f=(a(25).StatusCode,function(){function a(){b.classCallCheck(this,a)}return a.create=function(a){function b(){c.log.apply(b,arguments)}for(var c=this.prototype,d=Object.getOwnPropertyNames(c),e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;Object.defineProperty(b,h,Object.getOwnPropertyDescriptor(c,h))}return b._init(a),b},a.prototype.log=function(c,d,e){var f=Array.prototype.slice.call(arguments);if(c=a.LEVELS.indexOf(f[0])==-1?"info":f.shift(),!(this.levelIndex>a.LEVELS.indexOf(c)))return d="string"==typeof f[0]?this._format(f.shift(),f):"[no message]",e=null,f.length&&"object"===b.typeof(f[f.length-1])&&(e=f.pop(),Array.isArray(e)&&(e={data:e})),f.length&&(d+=", "+f.join(", ")),this._log({date:new Date,message:d,level:c,user:this.entityManager.me&&this.entityManager.me.id,data:e})},a.prototype._format=function(b,c){if(0==c.length)return b;var d=String(b).replace(a.FORMAT_REGEXP,function(a){if("%%"===a)return"%";if(!c.length)return a;switch(a){case"%s":return String(c.shift());case"%d":return Number(c.shift());case"%j":try{return JSON.stringify(c.shift())}catch(a){return"[Circular]"}default:return a}});return d},a.prototype._init=function(b){var c=this;this.entityManager=b,this.levelIndex=2,a.LEVELS.forEach(function(a){c[a]=c.log.bind(c,a)})},a.prototype._log=function(a){return this.entityManager.isReady?this.entityManager.send(new e.CreateObject("logs.AppLog",a)):this.entityManager.ready(this._log.bind(this,a))},b.createClass(a,[{key:"level",get:function(){return a.LEVELS[this.levelIndex]},set:function(b){var c=a.LEVELS.indexOf(b);if(c==-1)throw new Error("Unknown logging level "+b);this.levelIndex=c}}]),a}());Object.assign(f,{LEVELS:["trace","debug","info","warn","error"],FORMAT_REGEXP:/%[sdj%]/g}),c.exports=f},{25:25,36:36}],64:[function(a,c,d){"use strict";var e=a(34),f=a(1),g=a(62),h=(a(20),function(c){function d(a,e){b.classCallCheck(this,d);var g=b.possibleConstructorReturn(this,c.call(this));return g._root=a,g._state=d.Type.DIRTY,g._enabled=!0,g.id=null,g.version=null,g.type=e,g.acl=new f(g),g}return b.inherits(d,c),d.create=function(a,b){var c;if(a.isEntity)c=new d(b,a);else{if(!a.isEmbeddable)throw new Error("Illegal type "+a);c={type:a,readAccess:function(){var a=this._root&&this._root._metadata;a&&a.readAccess()},writeAccess:function(){var a=this._root&&this._root._metadata;a&&a.writeAccess()}}}return c},d.get=function(a){return a._metadata},b.createClass(d,[{key:"db",get:function(){return this._db?this._db:this._db=a(6)},set:function(a){if(this._db)throw new Error("DB has already been set.");this._db=a}},{key:"bucket",get:function(){return this.type.name}},{key:"key",get:function(){if(!this._key&&this.id){var a=this.id.lastIndexOf("/");this._key=decodeURIComponent(this.id.substring(a+1))}return this._key},set:function(a){if(a+="",this.id)throw new Error("The id can't be set twice.");this.id="/db/"+this.bucket+"/"+encodeURIComponent(a),this._key=a}},{key:"isAttached",get:function(){return!!this._db}},{key:"isAvailable",get:function(){return this._state>d.Type.UNAVAILABLE}},{key:"isPersistent",get:function(){return this._state==d.Type.PERSISTENT}},{key:"isDirty",get:function(){return this._state==d.Type.DIRTY}}]),d.prototype.readAccess=function(){if(this._enabled&&!this.isAvailable)throw new e.PersistentError("This object "+this.id+" is not available.")},d.prototype.writeAccess=function(){if(this._enabled){if(!this.isAvailable)throw new e.PersistentError("This object "+this.id+" is not available.");this.setDirty()}},d.prototype.setUnavailable=function(){this._state=d.Type.UNAVAILABLE},d.prototype.setPersistent=function(){this._state=d.Type.PERSISTENT},d.prototype.setDirty=function(){this._state=d.Type.DIRTY},d.prototype.setRemoved=function(){this.isAvailable&&(this.setDirty(),this.version=null)},d.prototype.getJsonMetadata=function(){var a={};return this.id&&(a.id=this.id),this.version&&(a.version=this.version),a.acl=this.acl,a},d.prototype.setJsonMetadata=function(a){this.id||(this.id=a.id),a.version&&(this.version=a.version),this.acl.fromJSON(a.acl||{})},d.prototype.getJson=function(a){this._enabled=!1;var b=this.type.toJsonValue(this,this._root,!0);return this._enabled=!0,this.isAttached&&!a&&Object.assign(b,this.getJsonMetadata()),b},d.prototype.setJson=function(a){(a.id||a.version||a.acl)&&this.setJsonMetadata(a),this._enabled=!1,this.type.fromJsonValue(this,a,this._root,!0),this._enabled=!0},d}(g));h.Type={UNAVAILABLE:-1,PERSISTENT:0,DIRTY:1},c.exports=h},{1:1,20:20,34:34,6:6,62:62}],65:[function(a,c,d){"use strict";var e=a(36),f=function(){function a(c,d){b.classCallCheck(this,a),this._entityManager=c,this._connector=d}return a.prototype.get=function(a,b,c,d,f){b instanceof Function&&(f=c,d=b,c={},b=null),c instanceof Function&&(f=d,d=c,c={}),c=c||{};var g=new e.GetBaqendModule(a).addQueryString(b).responseType(c.responseType||null);return this._send(g,d,f)},a.prototype.post=function(a,b,c,d,f){c instanceof Function&&(f=d,d=c,c={}),c=c||{};var g=new e.PostBaqendModule(a).entity(b,c.requestType).mimeType(c.mimeType||null).responseType(c.responseType||null);return this._send(g,d,f)},a.prototype._send=function(a,b,c){return this._entityManager.send(a).then(function(a){return a.entity}).then(b,c)},a}();c.exports=f},{36:36}],66:[function(a,c,d){"use strict";var e=function(){function a(c){b.classCallCheck(this,a),this._rules={},this._metadata=c}return a.prototype.allRules=function(){return Object.keys(this._rules)},a.prototype.clear=function(){this._metadata&&this._metadata.writeAccess(),this._rules={}},a.prototype.copy=function(a){return this._metadata&&this._metadata.writeAccess(),this._rules=Object.assign({},a._rules),this},a.prototype.isPublicAllowed=function(){if("*"in this._rules)return!1;for(var a in this._rules)if("allow"==this._rules[a])return!1;return!0},a.prototype.setPublicAllowed=function(){this._metadata&&this._metadata.writeAccess();for(var a in this._rules)"allow"==this._rules[a]&&delete this._rules[a]},a.prototype.getRule=function(a){return this._rules[this._getRef(a)]},a.prototype.isAllowed=function(a){return"allow"==this._rules[this._getRef(a)]},a.prototype.isDenied=function(a){return"deny"==this._rules[this._getRef(a)]},a.prototype.allowAccess=function(a){var b=arguments;this._metadata&&this._metadata.writeAccess();for(var c=0;c<b.length;c++)this._rules[this._getRef(b[c])]="allow";return this},a.prototype.denyAccess=function(a){var b=arguments;this._metadata&&this._metadata.writeAccess();for(var c=0;c<b.length;c++)this._rules[this._getRef(b[c])]="deny";return this},a.prototype.deleteAccess=function(a){var b=arguments;this._metadata&&this._metadata.writeAccess();for(var c=0;c<b.length;c++)delete this._rules[this._getRef(b[c])];return this},a.prototype.toJSON=function(){return this._rules},a.prototype.fromJSON=function(a){this._rules=a},a.fromJSON=function(a){var b=new this;return b.fromJSON(a),b},a.prototype._getRef=function(a){if("string"!=typeof a&&(a=a._metadata.id),0==a.indexOf("/db/User/")||0==a.indexOf("/db/Role/"))return a;throw new TypeError("The given object isn't a user, role or a valid reference.")},a}();e.BASE_PERMISSIONS=["load","update","delete","query","insert"],c.exports=e},{}],67:[function(a,c,d){"use strict";var e=a(10),f=function(){function a(c,d,f,g,h,i){if(b.classCallCheck(this,a),this.devices=null,c instanceof Set)this.devices=c;else if(!c||c[Symbol.iterator])this.devices=new Set(c);else{if(!(c instanceof e))throw new Error("Only Sets, Lists and Arrays can be used as devices.");this.devices=new Set,this.devices.add(c)}this.message=d,this.subject=f,this.sound=g,this.badge=h,this.data=i}return a.prototype.addDevice=function(a){this.devices||(this.devices=new Set),this.devices.add(a)},a.prototype.toJSON=function(){if(!this.devices||!this.devices.size)throw new Error("Set of devices is empty.");return Object.assign({},this,{devices:Array.from(this.devices,function(a){return a.id})})},a}();c.exports=f},{10:10}],68:[function(a,c,d){"use strict";var e=a(72).hmac,f=function(){function a(c,d,e){b.classCallCheck(this,a),this._token=d||null,this._origin=c,this.temporary=e}return a.create=function(b){return Promise.resolve(new a(b))},b.createClass(a,[{key:"token",get:function(){return this._token}}]),a.prototype._saveToken=function(a,b,c){},a.prototype.update=function(a){this._token=a,this._saveToken(this._origin,this._token,this.temporary)},a.prototype.signPath=function(a){var b=this.token;if(b){var c=b.substring(0,b.length-40),d=b.substring(c.length),f=a.split("/").map(encodeURIComponent).join("/");return f+"?BAT="+(c+e(a+c,d))}return a},a}(),g={},h=function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.create=function(a){return Promise.resolve(new c(a,g[a]))},c.prototype._saveToken=function(a,b,c){c||(b?g[a]=b:delete g[a])},c}(f);f.GLOBAL=h;var i=function(a){function c(){return b.classCallCheck(this,c),b.possibleConstructorReturn(this,a.apply(this,arguments))}return b.inherits(c,a),c.isAvailable=function(){try{return"undefined"!=typeof localStorage}catch(a){}return!1},c.create=function(a){var b=!1,d=localStorage.getItem("BAT:"+a);return d||(d=sessionStorage.getItem("BAT:"+a),b=!!d),Promise.resolve(new c(a,d,b))},c.prototype._saveToken=function(a,b,c){var d=c?sessionStorage:localStorage;b?d.setItem("BAT:"+a,b):d.removeItem("BAT:"+a)},c}(f);i.isAvailable()&&(f.WEB_STORAGE=i),c.exports=f},{72:72}],69:[function(a,c,d){"use strict";var e=function(){function a(){b.classCallCheck(this,a),this.fields={}}return b.createClass(a,[{key:"isValid",get:function(){for(var a in this.fields)if(!this.fields[a].isValid)return!1;return!0}}]),a.prototype.toJSON=function(){var a={};for(var b in this.fields)a[b]=this.fields[b].toJSON();return a},a}();c.exports=e},{}],70:[function(a,c,d){"use strict";var e=a(161),f=(a(69),function(){function a(c,d){b.classCallCheck(this,a),this.key=c,this._entity=d,this.errors=[]}return a.compile=function(a,b){for(var c=[],d=a.attributes(),e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;c.push(h.name)}var i=new Function(c,b);return function(a){var b=c.map(function(b){return a[b]});return i.apply({},b)}},a.prototype.is=function(a,b){return a instanceof Function&&(b=a,a="is"),b(this.value,e)===!1&&this.errors.push(a),this},b.createClass(a,[{key:"value",get:function(){return this._entity[this.key]}},{key:"isValid",get:function(){return 0==this.errors.length}}]),a.prototype._callMethod=function(a,b,c){return c=c||[],c.unshift(this.value),e[a].apply(this,c)===!1&&this.errors.push(b),this},a.prototype.toString=function(){return this.value},a.prototype.toJSON=function(){return{isValid:this.isValid,errors:this.errors}},a}());Object.keys(e).forEach(function(a){"function"==typeof e[a]&&"toString"!==a&&"toDate"!==a&&"extend"!==a&&"init"!==a&&(f.prototype[a]=function(b){return this._callMethod(a,b||a,Array.prototype.slice.call(arguments,b?1:0))})}),c.exports=f},{161:161,69:69}],71:[function(a,b,c){"use strict";b.exports=c=a(72),c.Metadata=a(64),c.Permission=a(66),c.Validator=a(70),c.ValidationResult=a(69),c.Code=a(61),c.Modules=a(65),c.Lockable=a(62),c.Logger=a(63),c.PushMessage=a(67),c.TokenStorage=a(68),c.uuid=a(159).v4},{159:159,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,72:72}],72:[function(a,b,c){"use strict";c.hmac=a(156),c.atob=window.atob,c.WebSocket=window.WebSocket,c.isNode=!1},{156:156}],73:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],74:[function(a,b,c){var d=a(145)("unscopables"),e=Array.prototype;void 0==e[d]&&a(95)(e,d,{}),b.exports=function(a){e[d][a]=!0}},{145:145,95:95}],75:[function(a,b,c){b.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},{}],76:[function(a,b,c){var d=a(103);b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{103:103}],77:[function(a,b,c){var d=a(138),e=a(139),f=a(136);b.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},{136:136,138:138,139:139}],78:[function(a,b,c){var d=a(79),e=a(145)("toStringTag"),f="Arguments"==d(function(){return arguments}()),g=function(a,b){try{return a[b]}catch(a){}};b.exports=function(a){var b,c,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=g(b=Object(a),e))?c:f?d(b):"Object"==(h=d(b))&&"function"==typeof b.callee?"Arguments":h}},{145:145,79:79}],79:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],80:[function(a,b,c){"use strict";var d=a(116).f,e=a(115),f=a(127),g=a(84),h=a(75),i=a(85),j=a(92),k=a(106),l=a(108),m=a(130),n=a(86),o=a(112).fastKey,p=n?"_s":"size",q=function(a,b){var c,d=o(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};b.exports={getConstructor:function(a,b,c,k){var l=a(function(a,d){h(a,l,b,"_i"),a._i=e(null),a._f=void 0,a._l=void 0,a[p]=0,void 0!=d&&j(d,c,a[k],a)});return f(l.prototype,{clear:function(){for(var a=this,b=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete b[c.i];a._f=a._l=void 0,a[p]=0},delete:function(a){var b=this,c=q(b,a);if(c){var d=c.n,e=c.p;delete b._i[c.i],c.r=!0,e&&(e.n=d),d&&(d.p=e),b._f==c&&(b._f=d),b._l==c&&(b._l=e),b[p]--}return!!c},forEach:function(a){h(this,l,"forEach");for(var b,c=g(a,arguments.length>1?arguments[1]:void 0,3);b=b?b.n:this._f;)for(c(b.v,b.k,this);b&&b.r;)b=b.p},has:function(a){return!!q(this,a)}}),n&&d(l.prototype,"size",{get:function(){return i(this[p])}}),l},def:function(a,b,c){var d,e,f=q(a,b);return f?f.v=c:(a._l=f={i:e=o(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[p]++,"F"!==e&&(a._i[e]=f)),a},getEntry:q,setStrong:function(a,b,c){k(a,b,function(a,b){this._t=a,this._k=b,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?l(0,c.k):"values"==b?l(0,c.v):l(0,[c.k,c.v]):(a._t=void 0,l(1))},c?"entries":"values",!c,!0),m(b)}}},{106:106,108:108,112:112,115:115,116:116,127:127,130:130,75:75,84:84,85:85,86:86,92:92}],81:[function(a,b,c){"use strict";var d=a(93),e=a(90),f=a(128),g=a(127),h=a(112),i=a(92),j=a(75),k=a(103),l=a(91),m=a(107),n=a(131),o=a(98);b.exports=function(a,b,c,p,q,r){var s=d[a],t=s,u=q?"set":"add",v=t&&t.prototype,w={},x=function(a){var b=v[a];f(v,a,"delete"==a?function(a){return!(r&&!k(a))&&b.call(this,0===a?0:a)}:"has"==a?function(a){return!(r&&!k(a))&&b.call(this,0===a?0:a)}:"get"==a?function(a){return r&&!k(a)?void 0:b.call(this,0===a?0:a)}:"add"==a?function(a){return b.call(this,0===a?0:a),this}:function(a,c){return b.call(this,0===a?0:a,c),this})};if("function"==typeof t&&(r||v.forEach&&!l(function(){(new t).entries().next()}))){var y=new t,z=y[u](r?{}:-0,1)!=y,A=l(function(){y.has(1)}),B=m(function(a){new t(a)}),C=!r&&l(function(){for(var a=new t,b=5;b--;)a[u](b,b);return!a.has(-0)});B||(t=b(function(b,c){j(b,t,a);var d=o(new s,b,t);return void 0!=c&&i(c,q,d[u],d),d}),t.prototype=v,v.constructor=t),(A||C)&&(x("delete"),x("has"),q&&x("get")),(C||z)&&x(u),r&&v.clear&&delete v.clear}else t=p.getConstructor(b,a,q,u),g(t.prototype,c),h.NEED=!0;return n(t,a),w[a]=t,e(e.G+e.W+e.F*(t!=s),w),r||p.setStrong(t,a,q),t}},{103:103,107:107,112:112,127:127,128:128,131:131,75:75,90:90,91:91,92:92,93:93,98:98}],82:[function(a,b,c){var d=b.exports={version:"2.4.0"};"number"==typeof __e&&(__e=d)},{}],83:[function(a,b,c){"use strict";var d=a(116),e=a(126);b.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},{116:116,126:126}],84:[function(a,b,c){var d=a(73);b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{73:73}],85:[function(a,b,c){b.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},{}],86:[function(a,b,c){b.exports=!a(91)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{91:91}],87:[function(a,b,c){var d=a(103),e=a(93).document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{103:103,93:93}],88:[function(a,b,c){b.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],89:[function(a,b,c){var d=a(124),e=a(121),f=a(125);b.exports=function(a){var b=d(a),c=e.f;if(c)for(var g,h=c(a),i=f.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}},{121:121,124:124,125:125}],90:[function(a,b,c){var d=a(93),e=a(82),f=a(95),g=a(128),h=a(84),i="prototype",j=function(a,b,c){var k,l,m,n,o=a&j.F,p=a&j.G,q=a&j.S,r=a&j.P,s=a&j.B,t=p?d:q?d[b]||(d[b]={}):(d[b]||{})[i],u=p?e:e[b]||(e[b]={}),v=u[i]||(u[i]={});p&&(c=b);for(k in c)l=!o&&t&&void 0!==t[k],m=(l?t:c)[k],n=s&&l?h(m,d):r&&"function"==typeof m?h(Function.call,m):m,t&&g(t,k,m,a&j.U),u[k]!=m&&f(u,k,n),r&&v[k]!=m&&(v[k]=m)};d.core=e,j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,j.U=64,j.R=128,b.exports=j},{128:128,82:82,84:84,93:93,95:95}],91:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(a){return!0}}},{}],92:[function(a,b,c){var d=a(84),e=a(104),f=a(101),g=a(76),h=a(139),i=a(146),j={},k={},c=b.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if(q=b?s(g(o=a[t])[0],o[1]):s(a[t]),q===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if(q=e(p,s,o.value,b),q===j||q===k)return q};c.BREAK=j,c.RETURN=k},{101:101,104:104,139:139,146:146,76:76,84:84}],93:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],94:[function(a,b,c){var d={}.hasOwnProperty;b.exports=function(a,b){return d.call(a,b)}},{}],95:[function(a,b,c){var d=a(116),e=a(126);b.exports=a(86)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{116:116,126:126,86:86}],96:[function(a,b,c){b.exports=a(93).document&&document.documentElement},{93:93}],97:[function(a,b,c){b.exports=!a(86)&&!a(91)(function(){return 7!=Object.defineProperty(a(87)("div"),"a",{get:function(){return 7}}).a})},{86:86,87:87,91:91}],98:[function(a,b,c){var d=a(103),e=a(129).set;b.exports=function(a,b,c){var f,g=b.constructor;return g!==c&&"function"==typeof g&&(f=g.prototype)!==c.prototype&&d(f)&&e&&e(a,f),a}},{103:103,129:129}],99:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],100:[function(a,b,c){var d=a(79);b.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},{79:79}],101:[function(a,b,c){var d=a(109),e=a(145)("iterator"),f=Array.prototype;b.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},{109:109,145:145}],102:[function(a,b,c){var d=a(79);b.exports=Array.isArray||function(a){return"Array"==d(a)}},{79:79}],103:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],104:[function(a,b,c){var d=a(76);b.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}},{76:76}],105:[function(a,b,c){"use strict";var d=a(115),e=a(126),f=a(131),g={};a(95)(g,a(145)("iterator"),function(){return this}),b.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},{115:115,126:126,131:131,145:145,95:95}],106:[function(a,b,c){"use strict";var d=a(111),e=a(90),f=a(128),g=a(95),h=a(94),i=a(109),j=a(105),k=a(131),l=a(122),m=a(145)("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};b.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y,z=function(a){if(!n&&a in D)return D[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},A=b+" Iterator",B=t==q,C=!1,D=a.prototype,E=D[m]||D[o]||t&&D[t],F=E||z(t),G=t?B?z("entries"):F:void 0,H="Array"==b?D.entries||E:E;if(H&&(y=l(H.call(new a)),y!==Object.prototype&&(k(y,A,!0),d||h(y,m)||g(y,m,r))),B&&E&&E.name!==q&&(C=!0,F=function(){return E.call(this)}),d&&!v||!n&&!C&&D[m]||g(D,m,F),i[b]=F,i[A]=r,t)if(w={values:B?F:z(q),keys:u?F:z(p),entries:G},v)for(x in w)x in D||f(D,x,w[x]);else e(e.P+e.F*(n||C),b,w);return w}},{105:105,109:109,111:111,122:122,128:128,131:131,145:145,90:90,94:94,95:95}],107:[function(a,b,c){var d=a(145)("iterator"),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}b.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}},{145:145}],108:[function(a,b,c){b.exports=function(a,b){return{value:b,done:!!a}}},{}],109:[function(a,b,c){b.exports={}},{}],110:[function(a,b,c){var d=a(124),e=a(138);b.exports=function(a,b){for(var c,f=e(a),g=d(f),h=g.length,i=0;h>i;)if(f[c=g[i++]]===b)return c}},{124:124,138:138}],111:[function(a,b,c){b.exports=!1},{}],112:[function(a,b,c){var d=a(142)("meta"),e=a(103),f=a(94),g=a(116).f,h=0,i=Object.isExtensible||function(){return!0;
},j=!a(91)(function(){return i(Object.preventExtensions({}))}),k=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},l=function(a,b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!i(a))return"F";if(!b)return"E";k(a)}return a[d].i},m=function(a,b){if(!f(a,d)){if(!i(a))return!0;if(!b)return!1;k(a)}return a[d].w},n=function(a){return j&&o.NEED&&i(a)&&!f(a,d)&&k(a),a},o=b.exports={KEY:d,NEED:!1,fastKey:l,getWeak:m,onFreeze:n}},{103:103,116:116,142:142,91:91,94:94}],113:[function(a,b,c){var d=a(93),e=a(135).set,f=d.MutationObserver||d.WebKitMutationObserver,g=d.process,h=d.Promise,i="process"==a(79)(g);b.exports=function(){var a,b,c,j=function(){var d,e;for(i&&(d=g.domain)&&d.exit();a;){e=a.fn,a=a.next;try{e()}catch(d){throw a?c():b=void 0,d}}b=void 0,d&&d.enter()};if(i)c=function(){g.nextTick(j)};else if(f){var k=!0,l=document.createTextNode("");new f(j).observe(l,{characterData:!0}),c=function(){l.data=k=!k}}else if(h&&h.resolve){var m=h.resolve();c=function(){m.then(j)}}else c=function(){e.call(d,j)};return function(d){var e={fn:d,next:void 0};b&&(b.next=e),a||(a=e,c()),b=e}}},{135:135,79:79,93:93}],114:[function(a,b,c){"use strict";var d=a(124),e=a(121),f=a(125),g=a(140),h=a(100),i=Object.assign;b.exports=!i||a(91)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=i({},a)[c]||Object.keys(i({},b)).join("")!=d})?function(a,b){for(var c=g(a),i=arguments.length,j=1,k=e.f,l=f.f;i>j;)for(var m,n=h(arguments[j++]),o=k?d(n).concat(k(n)):d(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:i},{100:100,121:121,124:124,125:125,140:140,91:91}],115:[function(a,b,c){var d=a(76),e=a(117),f=a(88),g=a(132)("IE_PROTO"),h=function(){},i="prototype",j=function(){var b,c=a(87)("iframe"),d=f.length,e="<",g=">";for(c.style.display="none",a(96).appendChild(c),c.src="javascript:",b=c.contentWindow.document,b.open(),b.write(e+"script"+g+"document.F=Object"+e+"/script"+g),b.close(),j=b.F;d--;)delete j[i][f[d]];return j()};b.exports=Object.create||function(a,b){var c;return null!==a?(h[i]=d(a),c=new h,h[i]=null,c[g]=a):c=j(),void 0===b?c:e(c,b)}},{117:117,132:132,76:76,87:87,88:88,96:96}],116:[function(a,b,c){var d=a(76),e=a(97),f=a(141),g=Object.defineProperty;c.f=a(86)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{141:141,76:76,86:86,97:97}],117:[function(a,b,c){var d=a(116),e=a(76),f=a(124);b.exports=a(86)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},{116:116,124:124,76:76,86:86}],118:[function(a,b,c){var d=a(125),e=a(126),f=a(138),g=a(141),h=a(94),i=a(97),j=Object.getOwnPropertyDescriptor;c.f=a(86)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(a){}if(h(a,b))return e(!d.f.call(a,b),a[b])}},{125:125,126:126,138:138,141:141,86:86,94:94,97:97}],119:[function(a,b,c){var d=a(138),e=a(120).f,f={}.toString,g="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(a){try{return e(a)}catch(a){return g.slice()}};b.exports.f=function(a){return g&&"[object Window]"==f.call(a)?h(a):e(d(a))}},{120:120,138:138}],120:[function(a,b,c){var d=a(123),e=a(88).concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},{123:123,88:88}],121:[function(a,b,c){c.f=Object.getOwnPropertySymbols},{}],122:[function(a,b,c){var d=a(94),e=a(140),f=a(132)("IE_PROTO"),g=Object.prototype;b.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},{132:132,140:140,94:94}],123:[function(a,b,c){var d=a(94),e=a(138),f=a(77)(!1),g=a(132)("IE_PROTO");b.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},{132:132,138:138,77:77,94:94}],124:[function(a,b,c){var d=a(123),e=a(88);b.exports=Object.keys||function(a){return d(a,e)}},{123:123,88:88}],125:[function(a,b,c){c.f={}.propertyIsEnumerable},{}],126:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],127:[function(a,b,c){var d=a(128);b.exports=function(a,b,c){for(var e in b)d(a,e,b[e],c);return a}},{128:128}],128:[function(a,b,c){var d=a(93),e=a(95),f=a(94),g=a(142)("src"),h="toString",i=Function[h],j=(""+i).split(h);a(82).inspectSource=function(a){return i.call(a)},(b.exports=function(a,b,c,h){var i="function"==typeof c;i&&(f(c,"name")||e(c,"name",b)),a[b]!==c&&(i&&(f(c,g)||e(c,g,a[b]?""+a[b]:j.join(String(b)))),a===d?a[b]=c:h?a[b]?a[b]=c:e(a,b,c):(delete a[b],e(a,b,c)))})(Function.prototype,h,function(){return"function"==typeof this&&this[g]||i.call(this)})},{142:142,82:82,93:93,94:94,95:95}],129:[function(a,b,c){var d=a(103),e=a(76),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};b.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,d){try{d=a(84)(Function.call,a(118).f(Object.prototype,"__proto__").set,2),d(b,[]),c=!(b instanceof Array)}catch(a){c=!0}return function(a,b){return f(a,b),c?a.__proto__=b:d(a,b),a}}({},!1):void 0),check:f}},{103:103,118:118,76:76,84:84}],130:[function(a,b,c){"use strict";var d=a(93),e=a(116),f=a(86),g=a(145)("species");b.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.f(b,g,{configurable:!0,get:function(){return this}})}},{116:116,145:145,86:86,93:93}],131:[function(a,b,c){var d=a(116).f,e=a(94),f=a(145)("toStringTag");b.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},{116:116,145:145,94:94}],132:[function(a,b,c){var d=a(133)("keys"),e=a(142);b.exports=function(a){return d[a]||(d[a]=e(a))}},{133:133,142:142}],133:[function(a,b,c){var d=a(93),e="__core-js_shared__",f=d[e]||(d[e]={});b.exports=function(a){return f[a]||(f[a]={})}},{93:93}],134:[function(a,b,c){var d=a(76),e=a(73),f=a(145)("species");b.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},{145:145,73:73,76:76}],135:[function(a,b,c){var d,e,f,g=a(84),h=a(99),i=a(96),j=a(87),k=a(93),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==a(79)(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),b.exports={set:m,clear:n}},{79:79,84:84,87:87,93:93,96:96,99:99}],136:[function(a,b,c){var d=a(137),e=Math.max,f=Math.min;b.exports=function(a,b){return a=d(a),a<0?e(a+b,0):f(a,b)}},{137:137}],137:[function(a,b,c){var d=Math.ceil,e=Math.floor;b.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}},{}],138:[function(a,b,c){var d=a(100),e=a(85);b.exports=function(a){return d(e(a))}},{100:100,85:85}],139:[function(a,b,c){var d=a(137),e=Math.min;b.exports=function(a){return a>0?e(d(a),9007199254740991):0}},{137:137}],140:[function(a,b,c){var d=a(85);b.exports=function(a){return Object(d(a))}},{85:85}],141:[function(a,b,c){var d=a(103);b.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{103:103}],142:[function(a,b,c){var d=0,e=Math.random();b.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}},{}],143:[function(a,b,c){var d=a(93),e=a(82),f=a(111),g=a(144),h=a(116).f;b.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},{111:111,116:116,144:144,82:82,93:93}],144:[function(a,b,c){c.f=a(145)},{145:145}],145:[function(a,b,c){var d=a(133)("wks"),e=a(142),f=a(93).Symbol,g="function"==typeof f,h=b.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))};h.store=d},{133:133,142:142,93:93}],146:[function(a,b,c){var d=a(78),e=a(145)("iterator"),f=a(109);b.exports=a(82).getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}},{109:109,145:145,78:78,82:82}],147:[function(a,b,c){"use strict";var d=a(84),e=a(90),f=a(140),g=a(104),h=a(101),i=a(139),j=a(83),k=a(146);e(e.S+e.F*!a(107)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,l,m=f(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=k(m);if(q&&(p=d(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&h(s))for(b=i(m.length),c=new n(b);b>r;r++)j(c,r,q?p(m[r],r):m[r]);else for(l=s.call(m),c=new n;!(e=l.next()).done;r++)j(c,r,q?g(l,p,[e.value,r],!0):e.value);return c.length=r,c}})},{101:101,104:104,107:107,139:139,140:140,146:146,83:83,84:84,90:90}],148:[function(a,b,c){"use strict";var d=a(74),e=a(108),f=a(109),g=a(138);b.exports=a(106)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},{106:106,108:108,109:109,138:138,74:74}],149:[function(a,b,c){"use strict";var d=a(80);b.exports=a(81)("Map",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(this,a);return b&&b.v},set:function(a,b){return d.def(this,0===a?0:a,b)}},d,!0)},{80:80,81:81}],150:[function(a,b,c){var d=a(90);d(d.S+d.F,"Object",{assign:a(114)})},{114:114,90:90}],151:[function(a,b,c){var d=a(90);d(d.S,"Object",{setPrototypeOf:a(129).set})},{129:129,90:90}],152:[function(a,b,c){"use strict";var d,e,f,g=a(111),h=a(93),i=a(84),j=a(78),k=a(90),l=a(103),m=a(73),n=a(75),o=a(92),p=a(134),q=a(135).set,r=a(113)(),s="Promise",t=h.TypeError,u=h.process,v=h[s],u=h.process,w="process"==j(u),x=function(){},y=!!function(){try{var b=v.resolve(1),c=(b.constructor={})[a(145)("species")]=function(a){a(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&b.then(x)instanceof c}catch(a){}}(),z=function(a,b){return a===b||a===v&&b===f},A=function(a){var b;return!(!l(a)||"function"!=typeof(b=a.then))&&b},B=function(a){return z(v,a)?new C(a):new e(a)},C=e=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw t("Bad Promise constructor");b=a,c=d}),this.resolve=m(b),this.reject=m(c)},D=function(a){try{a()}catch(a){return{error:a}}},E=function(a,b){if(!a._n){a._n=!0;var c=a._c;r(function(){for(var d=a._v,e=1==a._s,f=0,g=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject,j=b.domain;try{g?(e||(2==a._h&&H(a),a._h=1),g===!0?c=d:(j&&j.enter(),c=g(d),j&&j.exit()),c===b.promise?i(t("Promise-chain cycle")):(f=A(c))?f.call(c,h,i):h(c)):i(d)}catch(a){i(a)}};c.length>f;)g(c[f++]);a._c=[],a._n=!1,b&&!a._h&&F(a)})}},F=function(a){q.call(h,function(){var b,c,d,e=a._v;if(G(a)&&(b=D(function(){w?u.emit("unhandledRejection",e,a):(c=h.onunhandledrejection)?c({promise:a,reason:e}):(d=h.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=w||G(a)?2:1),a._a=void 0,b)throw b.error})},G=function(a){if(1==a._h)return!1;for(var b,c=a._a||a._c,d=0;c.length>d;)if(b=c[d++],b.fail||!G(b.promise))return!1;return!0},H=function(a){q.call(h,function(){var b;w?u.emit("rejectionHandled",a):(b=h.onrejectionhandled)&&b({promise:a,reason:a._v})})},I=function(a){var b=this;b._d||(b._d=!0,b=b._w||b,b._v=a,b._s=2,b._a||(b._a=b._c.slice()),E(b,!0))},J=function(a){var b,c=this;if(!c._d){c._d=!0,c=c._w||c;try{if(c===a)throw t("Promise can't be resolved itself");(b=A(a))?r(function(){var d={_w:c,_d:!1};try{b.call(a,i(J,d,1),i(I,d,1))}catch(a){I.call(d,a)}}):(c._v=a,c._s=1,E(c,!1))}catch(a){I.call({_w:c,_d:!1},a)}}};y||(v=function(a){n(this,v,s,"_h"),m(a),d.call(this);try{a(i(J,this,1),i(I,this,1))}catch(a){I.call(this,a)}},d=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},d.prototype=a(127)(v.prototype,{then:function(a,b){var c=B(p(this,v));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=w?u.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&E(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),C=function(){var a=new d;this.promise=a,this.resolve=i(J,a,1),this.reject=i(I,a,1)}),k(k.G+k.W+k.F*!y,{Promise:v}),a(131)(v,s),a(130)(s),f=a(82)[s],k(k.S+k.F*!y,s,{reject:function(a){var b=B(this),c=b.reject;return c(a),b.promise}}),k(k.S+k.F*(g||!y),s,{resolve:function(a){if(a instanceof v&&z(a.constructor,this))return a;var b=B(this),c=b.resolve;return c(a),b.promise}}),k(k.S+k.F*!(y&&a(107)(function(a){v.all(a).catch(x)})),s,{all:function(a){var b=this,c=B(b),d=c.resolve,e=c.reject,f=D(function(){var c=[],f=0,g=1;o(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f&&e(f.error),c.promise},race:function(a){var b=this,c=B(b),d=c.reject,e=D(function(){o(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})},{103:103,107:107,111:111,113:113,127:127,130:130,131:131,134:134,135:135,145:145,73:73,75:75,78:78,82:82,84:84,90:90,92:92,93:93}],153:[function(a,b,c){"use strict";var d=a(80);b.exports=a(81)("Set",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(this,a=0===a?0:a,a)}},d)},{80:80,81:81}],154:[function(a,b,c){"use strict";var d=a(93),e=a(94),f=a(86),g=a(90),h=a(128),i=a(112).KEY,j=a(91),k=a(133),l=a(131),m=a(142),n=a(145),o=a(144),p=a(143),q=a(110),r=a(89),s=a(102),t=a(76),u=a(138),v=a(141),w=a(126),x=a(115),y=a(119),z=a(118),A=a(116),B=a(124),C=z.f,D=A.f,E=y.f,F=d.Symbol,G=d.JSON,H=G&&G.stringify,I="prototype",J=n("_hidden"),K=n("toPrimitive"),L={}.propertyIsEnumerable,M=k("symbol-registry"),N=k("symbols"),O=k("op-symbols"),P=Object[I],Q="function"==typeof F,R=d.QObject,S=!R||!R[I]||!R[I].findChild,T=f&&j(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=C(P,b);d&&delete P[b],D(a,b,c),d&&a!==P&&D(P,b,d)}:D,U=function(a){var b=N[a]=x(F[I]);return b._k=a,b},V=Q&&"symbol"==typeof F.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof F},W=function(a,b,c){return a===P&&W(O,b,c),t(a),b=v(b,!0),t(c),e(N,b)?(c.enumerable?(e(a,J)&&a[J][b]&&(a[J][b]=!1),c=x(c,{enumerable:w(0,!1)})):(e(a,J)||D(a,J,w(1,{})),a[J][b]=!0),T(a,b,c)):D(a,b,c)},X=function(a,b){t(a);for(var c,d=r(b=u(b)),e=0,f=d.length;f>e;)W(a,c=d[e++],b[c]);return a},Y=function(a,b){return void 0===b?x(a):X(x(a),b)},Z=function(a){var b=L.call(this,a=v(a,!0));return!(this===P&&e(N,a)&&!e(O,a))&&(!(b||!e(this,a)||!e(N,a)||e(this,J)&&this[J][a])||b)},$=function(a,b){if(a=u(a),b=v(b,!0),a!==P||!e(N,b)||e(O,b)){var c=C(a,b);return!c||!e(N,b)||e(a,J)&&a[J][b]||(c.enumerable=!0),c}},_=function(a){for(var b,c=E(u(a)),d=[],f=0;c.length>f;)e(N,b=c[f++])||b==J||b==i||d.push(b);return d},aa=function(a){for(var b,c=a===P,d=E(c?O:u(a)),f=[],g=0;d.length>g;)!e(N,b=d[g++])||c&&!e(P,b)||f.push(N[b]);return f};Q||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var a=m(arguments.length>0?arguments[0]:void 0),b=function(c){this===P&&b.call(O,c),e(this,J)&&e(this[J],a)&&(this[J][a]=!1),T(this,a,w(1,c))};return f&&S&&T(P,a,{configurable:!0,set:b}),U(a)},h(F[I],"toString",function(){return this._k}),z.f=$,A.f=W,a(120).f=y.f=_,a(125).f=Z,a(121).f=aa,f&&!a(111)&&h(P,"propertyIsEnumerable",Z,!0),o.f=function(a){return U(n(a))}),g(g.G+g.W+g.F*!Q,{Symbol:F});for(var ba="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ca=0;ba.length>ca;)n(ba[ca++]);for(var ba=B(n.store),ca=0;ba.length>ca;)p(ba[ca++]);g(g.S+g.F*!Q,"Symbol",{for:function(a){return e(M,a+="")?M[a]:M[a]=F(a)},keyFor:function(a){if(V(a))return q(M,a);throw TypeError(a+" is not a symbol!")},useSetter:function(){S=!0},useSimple:function(){S=!1}}),g(g.S+g.F*!Q,"Object",{create:Y,defineProperty:W,defineProperties:X,getOwnPropertyDescriptor:$,getOwnPropertyNames:_,getOwnPropertySymbols:aa}),G&&g(g.S+g.F*(!Q||j(function(){var a=F();return"[null]"!=H([a])||"{}"!=H({a:a})||"{}"!=H(Object(a))})),"JSON",{stringify:function(a){if(void 0!==a&&!V(a)){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);return b=d[1],"function"==typeof b&&(c=b),!c&&s(b)||(b=function(a,b){if(c&&(b=c.call(this,a,b)),!V(b))return b}),d[1]=b,H.apply(G,d)}}}),F[I][K]||a(95)(F[I],K,F[I].valueOf),l(F,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)},{102:102,110:110,111:111,112:112,115:115,116:116,118:118,119:119,120:120,121:121,124:124,125:125,126:126,128:128,131:131,133:133,138:138,141:141,142:142,143:143,144:144,145:145,76:76,86:86,89:89,90:90,91:91,93:93,94:94,95:95}],155:[function(b,c,d){!function(b,e){"object"==typeof d?c.exports=d=e():"function"==typeof a&&a.amd?a([],e):b.CryptoJS=e()}(this,function(){var a=a||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],c!=b?this.sigBytes=c:this.sigBytes=4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;f<e;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else for(var f=0;f<e;f+=4)b[d+f>>>2]=c[f>>>2];return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c,d=[],e=function(b){var b=b,c=987654321,d=4294967295;return function(){c=36969*(65535&c)+(c>>16)&d,b=18e3*(65535&b)+(b>>16)&d;var e=(c<<16)+b&d;return e/=4294967296,e+=.5,e*(a.random()>.5?1:-1)}},g=0;g<b;g+=4){var h=e(4294967296*(c||a.random()));c=987654071*h(),d.push(4294967296*h()|0)}return new f.init(d,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;e<c;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;e<c;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(a){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;l<j;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),l=(d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}}),c.algo={});return c}(Math);return a})},{}],156:[function(b,c,d){!function(e,f,g){"object"==typeof d?c.exports=d=f(b(155),b(158),b(157)):"function"==typeof a&&a.amd?a(["./core","./sha1","./hmac"],f):f(e.CryptoJS)}(this,function(a){return a.HmacSHA1})},{155:155,157:157,158:158}],157:[function(b,c,d){!function(e,f){"object"==typeof d?c.exports=d=f(b(155)):"function"==typeof a&&a.amd?a(["./core"],f):f(e.CryptoJS)}(this,function(a){!function(){var b=a,c=b.lib,d=c.Base,e=b.enc,f=e.Utf8,g=b.algo;g.HMAC=d.extend({init:function(a,b){a=this._hasher=new a.init,"string"==typeof b&&(b=f.parse(b));var c=a.blockSize,d=4*c;b.sigBytes>d&&(b=a.finalize(b)),b.clamp();for(var e=this._oKey=b.clone(),g=this._iKey=b.clone(),h=e.words,i=g.words,j=0;j<c;j++)h[j]^=1549556828,i[j]^=909522486;e.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher,c=b.finalize(a);b.reset();var d=b.finalize(this._oKey.clone().concat(c));return d}})}()})},{155:155}],158:[function(b,c,d){!function(e,f){"object"==typeof d?c.exports=d=f(b(155)):"function"==typeof a&&a.amd?a(["./core"],f):f(e.CryptoJS)}(this,function(a){return function(){var b=a,c=b.lib,d=c.WordArray,e=c.Hasher,f=b.algo,g=[],h=f.SHA1=e.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=0;j<80;j++){if(j<16)g[j]=0|a[b+j];else{var k=g[j-3]^g[j-8]^g[j-14]^g[j-16];g[j]=k<<1|k>>>31}var l=(d<<5|d>>>27)+i+g[j];l+=j<20?(e&f|~e&h)+1518500249:j<40?(e^f^h)+1859775393:j<60?(e&f|e&h|f&h)-1894007588:(e^f^h)-899497514,i=h,h=f,f=e<<30|e>>>2,e=d,d=l}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA1=e._createHelper(h),b.HmacSHA1=e._createHmacHelper(h)}(),a.SHA1})},{155:155}],159:[function(b,c,d){!function(d){"use strict";function e(){var a=d.crypto||d.msCrypto;if(!k&&a&&a.getRandomValues)try{var b=new Uint8Array(16);n=k=function(){return a.getRandomValues(b),b},k()}catch(a){}if(!k){var c=new Array(16);l=k=function(){for(var a,b=0;b<16;b++)0===(3&b)&&(a=4294967296*Math.random()),c[b]=a>>>((3&b)<<3)&255;return c},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function f(){if("function"==typeof b)try{var a=b("crypto").randomBytes;m=k=a&&function(){return a(16)},k()}catch(a){}}function g(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){e<16&&(b[d+e++]=r[a])});e<16;)b[d+e++]=0;return b}function h(a,b){var c=b||0,d=q;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function i(a,b,c){var d=b&&c||0,e=b||[];a=a||{};var f=null!=a.clockseq?a.clockseq:v,g=null!=a.msecs?a.msecs:(new Date).getTime(),i=null!=a.nsecs?a.nsecs:x+1,j=g-w+(i-x)/1e4;if(j<0&&null==a.clockseq&&(f=f+1&16383),(j<0||g>w)&&null==a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");w=g,x=i,v=f,g+=122192928e5;var k=(1e4*(268435455&g)+i)%4294967296;e[d++]=k>>>24&255,e[d++]=k>>>16&255,e[d++]=k>>>8&255,e[d++]=255&k;var l=g/4294967296*1e4&268435455;e[d++]=l>>>8&255,e[d++]=255&l,e[d++]=l>>>24&15|16,e[d++]=l>>>16&255,e[d++]=f>>>8|128,e[d++]=255&f;for(var m=a.node||u,n=0;n<6;n++)e[d+n]=m[n];return b?b:h(e)}function j(a,b,c){var d=b&&c||0;"string"==typeof a&&(b="binary"===a?new p(16):null,a=null),a=a||{};var e=a.random||(a.rng||k)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,b)for(var f=0;f<16;f++)b[d+f]=e[f];return b||h(e)}var k,l,m,n,o;d?e():f();for(var p="function"==typeof Buffer?Buffer:Array,q=[],r={},s=0;s<256;s++)q[s]=(s+256).toString(16).substr(1),r[q[s]]=s;var t=k(),u=[1|t[0],t[1],t[2],t[3],t[4],t[5]],v=16383&(t[6]<<8|t[7]),w=0,x=0,y=j;y.v1=i,y.v4=j,y.parse=g,y.unparse=h,y.BufferClass=p,y._rng=k,y._mathRNG=l,y._nodeRNG=m,y._whatwgRNG=n,"undefined"!=typeof c&&c.exports?c.exports=y:"function"==typeof a&&a.amd?a(function(){return y}):(o=d.uuid,y.noConflict=function(){return d.uuid=o,y},d.uuid=y)}("undefined"!=typeof window?window:null)},{undefined:void 0}],160:[function(a,b,c){"use strict";function d(a){function b(a){}if(!a)throw new TypeError("argument namespace is required");return b._file=void 0,b._ignored=!0,b._namespace=a,b._traced=!1,b._warned=Object.create(null),b.function=e,b.property=f,b}function e(a,b){if("function"!=typeof a)throw new TypeError("argument fn must be a function");return a}function f(a,b,c){if(!a||"object"!=typeof a&&"function"!=typeof a)throw new TypeError("argument obj must be object");var d=Object.getOwnPropertyDescriptor(a,b);if(!d)throw new TypeError("must call property on owner object");if(!d.configurable)throw new TypeError("property must be configurable")}b.exports=d},{}],161:[function(b,c,d){!function(b,e){"undefined"!=typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&"object"==typeof a.amd?a(e):"function"==typeof a&&"object"==typeof a.petal?a(b,[],e):this[b]=e()}("validator",function(a){"use strict";function d(a){var b,c,d,e,f=a.match(L);if(f){if(b=f[21],!b)return f[12]?null:0;if("z"===b||"Z"===b)return 0;c=f[22],b.indexOf(":")!==-1?(d=parseInt(f[23]),e=parseInt(f[24])):(d=0,e=parseInt(f[23]))}else{if(a=a.toLowerCase(),b=a.match(/(?:\s|gmt\s*)(-|\+)(\d{1,4})(\s|$)/),!b)return a.indexOf("gmt")!==-1?0:null;c=b[1];var g=b[2];3===g.length&&(g="0"+g),g.length<=2?(d=0,e=parseInt(g)):(d=parseInt(g.slice(0,2)),e=parseInt(g.slice(2,4)))}return(60*d+e)*("-"===c?1:-1)}function e(a,b){a=a||{};for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a}function f(a){var b="(\\"+a.symbol.replace(/\./g,"\\.")+")"+(a.require_symbol?"":"?"),c="-?",d="[1-9]\\d*",e="[1-9]\\d{0,2}(\\"+a.thousands_separator+"\\d{3})*",f=["0",d,e],g="("+f.join("|")+")?",h="(\\"+a.decimal_separator+"\\d{2})?",i=g+h;return a.allow_negatives&&!a.parens_for_negatives&&(a.negative_sign_after_digits?i+=c:a.negative_sign_before_digits&&(i=c+i)),a.allow_negative_sign_placeholder?i="( (?!\\-))?"+i:a.allow_space_after_symbol?i=" ?"+i:a.allow_space_after_digits&&(i+="( (?!$))?"),a.symbol_after_digits?i+=b:i=b+i,a.allow_negatives&&(a.parens_for_negatives?i="(\\("+i+"\\)|"+i+")":a.negative_sign_before_digits||a.negative_sign_after_digits||(i=c+i)),new RegExp("^(?!-? )(?=.*\\d)"+i+"$")}a={version:"4.9.0",coerce:!0};for(var g,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,i=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,j=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,k=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,l=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,m=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,n=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,o=/^(?:[0-9]{9}X|[0-9]{10})$/,p=/^(?:[0-9]{13})$/,q=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,r=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,s=/^[0-9A-F]{1,4}$/i,t={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},u={"en-US":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"es-ES":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[--]+$/i},v={"en-US":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9--]+$/i},w=["AU","GB","HK","IN","NZ","ZA","ZM"],x=0;x<w.length;x++)g="en-"+w[x],u[g]=u["en-US"],v[g]=v["en-US"];var y=/^[-+]?[0-9]+$/,z=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,A=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,B=/^[0-9A-F]+$/i,C=/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,D=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,E=/^[\x00-\x7F]+$/,F=/[^\x00-\x7F]/,G=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,H=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,I=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,J=/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,K={"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"de-DE":/^(\+?49[ \.\-])?([\(]{1}[0-9]{1,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,"el-GR":/^(\+?30)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"en-IN":/^(\+?91|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)2\d{7,9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5)?|50)\s?(\d\s?){4,8}\d$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pt-BR":/^(\+?55|0)\-?[1-9]{2}\-?[2-9]{1}\d{3,4}\-?\d{4}$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"vi-VN":/^(\+?84|0)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,"zh-CN":/^(\+?0?86\-?)?((13\d|14[57]|15[^4,\D]|17[678]|18\d)\d{8}|170[059]\d{7})$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/},L=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;a.extend=function(b,c){a[b]=function(){var b=Array.prototype.slice.call(arguments);return b[0]=a.toString(b[0]),c.apply(a,b)}},a.init=function(){for(var b in a)"function"==typeof a[b]&&"toString"!==b&&"toDate"!==b&&"extend"!==b&&"init"!==b&&"isServerSide"!==b&&a.extend(b,a[b])},a.isServerSide=function(){return"object"==typeof c&&c&&"object"==typeof c.exports&&"object"==typeof process&&"function"==typeof b};var M=null;a.deprecation=function(c){if(null===M){if(!a.isServerSide())return;M=b(160)("validator")}M(c)},a.toString=function(b){if("string"!=typeof b){if(!a.coerce)throw new Error("this library validates strings only");a.deprecation("you tried to validate a "+typeof b+" but this library (validator.js) validates strings only. Please update your code as this will be an error soon.");
}return"object"==typeof b&&null!==b?b="function"==typeof b.toString?b.toString():"[object Object]":(null===b||"undefined"==typeof b||isNaN(b)&&!b.length)&&(b=""),""+b},a.toDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)?a:(a=Date.parse(a),isNaN(a)?null:new Date(a))},a.toFloat=function(a){return parseFloat(a)},a.toInt=function(a,b){return parseInt(a,b||10)},a.toBoolean=function(a,b){return b?"1"===a||"true"===a:"0"!==a&&"false"!==a&&""!==a},a.equals=function(b,c){return b===a.toString(c)},a.contains=function(b,c){return b.indexOf(a.toString(c))>=0},a.matches=function(a,b,c){return"[object RegExp]"!==Object.prototype.toString.call(b)&&(b=new RegExp(b,c)),b.test(a)};var N={allow_display_name:!1,allow_utf8_local_part:!0,require_tld:!0};a.isEmail=function(b,c){if(c=e(c,N),c.allow_display_name){var d=b.match(l);d&&(b=d[1])}var f=b.split("@"),g=f.pop(),m=f.join("@"),n=g.toLowerCase();if("gmail.com"!==n&&"googlemail.com"!==n||(m=m.replace(/\./g,"").toLowerCase()),!a.isByteLength(m,{max:64})||!a.isByteLength(g,{max:256}))return!1;if(!a.isFQDN(g,{require_tld:c.require_tld}))return!1;if('"'===m[0])return m=m.slice(1,m.length-1),c.allow_utf8_local_part?k.test(m):i.test(m);for(var o=c.allow_utf8_local_part?j:h,p=m.split("."),q=0;q<p.length;q++)if(!o.test(p[q]))return!1;return!0};var O={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};a.isURL=function(b,c){if(!b||b.length>=2083||/\s/.test(b))return!1;if(0===b.indexOf("mailto:"))return!1;c=e(c,O);var d,f,g,h,i,j,k;if(k=b.split("://"),k.length>1){if(d=k.shift(),c.require_valid_protocol&&c.protocols.indexOf(d)===-1)return!1}else{if(c.require_protocol)return!1;c.allow_protocol_relative_urls&&"//"===b.substr(0,2)&&(k[0]=b.substr(2))}return b=k.join("://"),k=b.split("#"),b=k.shift(),k=b.split("?"),b=k.shift(),k=b.split("/"),b=k.shift(),k=b.split("@"),!(k.length>1&&(f=k.shift(),f.indexOf(":")>=0&&f.split(":").length>2))&&(h=k.join("@"),k=h.split(":"),g=k.shift(),!(k.length&&(j=k.join(":"),i=parseInt(j,10),!/^[0-9]+$/.test(j)||i<=0||i>65535))&&(!(!a.isIP(g)&&!a.isFQDN(g,c)&&"localhost"!==g)&&((!c.host_whitelist||c.host_whitelist.indexOf(g)!==-1)&&(!c.host_blacklist||c.host_blacklist.indexOf(g)===-1))))},a.isMACAddress=function(a){return q.test(a)},a.isIP=function(b,c){if(c=c?c+"":"",!c)return a.isIP(b,4)||a.isIP(b,6);if("4"===c){if(!r.test(b))return!1;var d=b.split(".").sort(function(a,b){return a-b});return d[3]<=255}if("6"===c){var e=b.split(":"),f=!1,g=a.isIP(e[e.length-1],4),h=g?7:8;if(e.length>h)return!1;if("::"===b)return!0;"::"===b.substr(0,2)?(e.shift(),e.shift(),f=!0):"::"===b.substr(b.length-2)&&(e.pop(),e.pop(),f=!0);for(var i=0;i<e.length;++i)if(""===e[i]&&i>0&&i<e.length-1){if(f)return!1;f=!0}else if(g&&i==e.length-1);else if(!s.test(e[i]))return!1;return f?e.length>=1:e.length===h}return!1};var P={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};a.isFQDN=function(a,b){b=e(b,P),b.allow_trailing_dot&&"."===a[a.length-1]&&(a=a.substring(0,a.length-1));var c=a.split(".");if(b.require_tld){var d=c.pop();if(!c.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(d))return!1}for(var f,g=0;g<c.length;g++){if(f=c[g],b.allow_underscores){if(f.indexOf("__")>=0)return!1;f=f.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(f))return!1;if(/[\uff01-\uff5e]/.test(f))return!1;if("-"===f[0]||"-"===f[f.length-1])return!1}return!0},a.isBoolean=function(a){return["true","false","1","0"].indexOf(a)>=0},a.isAlpha=function(a,b){if(b=b||"en-US",b in u)return u[b].test(a);throw new Error("Invalid locale '"+b+"'")},a.isAlphanumeric=function(a,b){if(b=b||"en-US",b in v)return v[b].test(a);throw new Error("Invalid locale '"+b+"'")},a.isNumeric=function(a){return y.test(a)},a.isDecimal=function(a){return""!==a&&C.test(a)},a.isHexadecimal=function(a){return B.test(a)},a.isHexColor=function(a){return D.test(a)},a.isLowercase=function(a){return a===a.toLowerCase()},a.isUppercase=function(a){return a===a.toUpperCase()},a.isInt=function(a,b){return b=b||{},z.test(a)&&(!b.hasOwnProperty("min")||a>=b.min)&&(!b.hasOwnProperty("max")||a<=b.max)},a.isFloat=function(a,b){return b=b||{},""!==a&&"."!==a&&(A.test(a)&&(!b.hasOwnProperty("min")||a>=b.min)&&(!b.hasOwnProperty("max")||a<=b.max))},a.isDivisibleBy=function(b,c){return a.toFloat(b)%parseInt(c,10)===0},a.isNull=function(a){return 0===a.length},a.isLength=function(a,b){var c,d;"object"==typeof b?(c=b.min||0,d=b.max):(c=arguments[1],d=arguments[2]);var e=a.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],f=a.length-e.length;return f>=c&&("undefined"==typeof d||f<=d)},a.isByteLength=function(a,b){var c,d;"object"==typeof b?(c=b.min||0,d=b.max):(c=arguments[1],d=arguments[2]);var e=encodeURI(a).split(/%..|./).length-1;return e>=c&&("undefined"==typeof d||e<=d)},a.isUUID=function(a,b){var c=t[b?b:"all"];return c&&c.test(a)},a.isDate=function(a){var b=new Date(Date.parse(a));if(isNaN(b))return!1;var c=d(a);if(null!==c){var e=b.getTimezoneOffset()-c;b=new Date(b.getTime()+6e4*e)}var f,g,h,i=String(b.getDate());return!(g=a.match(/(^|[^:\d])[23]\d([^:\d]|$)/g))||(f=g.map(function(a){return a.match(/\d+/g)[0]}).join("/"),h=String(b.getFullYear()).slice(-2),f===i||f===h||(f===i+"/"+h||f===h+"/"+i))},a.isAfter=function(b,c){var d=a.toDate(c||new Date),e=a.toDate(b);return!!(e&&d&&e>d)},a.isBefore=function(b,c){var d=a.toDate(c||new Date),e=a.toDate(b);return!!(e&&d&&e<d)},a.isIn=function(b,c){var d;if("[object Array]"===Object.prototype.toString.call(c)){var e=[];for(d in c)e[d]=a.toString(c[d]);return e.indexOf(b)>=0}return"object"==typeof c?c.hasOwnProperty(b):!(!c||"function"!=typeof c.indexOf)&&c.indexOf(b)>=0},a.isWhitelisted=function(a,b){for(var c=a.length-1;c>=0;c--)if(b.indexOf(a[c])===-1)return!1;return!0},a.isCreditCard=function(a){var b=a.replace(/[^0-9]+/g,"");if(!m.test(b))return!1;for(var c,d,e,f=0,g=b.length-1;g>=0;g--)c=b.substring(g,g+1),d=parseInt(c,10),e?(d*=2,f+=d>=10?d%10+1:d):f+=d,e=!e;return!(f%10!==0||!b)},a.isISIN=function(a){if(!n.test(a))return!1;for(var b,c,d=a.replace(/[A-Z]/g,function(a){return parseInt(a,36)}),e=0,f=!0,g=d.length-2;g>=0;g--)b=d.substring(g,g+1),c=parseInt(b,10),f?(c*=2,e+=c>=10?c+1:c):e+=c,f=!f;return parseInt(a.substr(a.length-1),10)===(1e4-e)%10},a.isISBN=function(b,c){if(c=c?c+"":"",!c)return a.isISBN(b,10)||a.isISBN(b,13);var d,e=b.replace(/[\s-]+/g,""),f=0;if("10"===c){if(!o.test(e))return!1;for(d=0;d<9;d++)f+=(d+1)*e.charAt(d);if(f+="X"===e.charAt(9)?100:10*e.charAt(9),f%11===0)return!!e}else if("13"===c){if(!p.test(e))return!1;var g=[1,3];for(d=0;d<12;d++)f+=g[d%2]*e.charAt(d);if(e.charAt(12)-(10-f%10)%10===0)return!!e}return!1},a.isMobilePhone=function(a,b){return b in K&&K[b].test(a)};var Q={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};a.isCurrency=function(a,b){return b=e(b,Q),f(b).test(a)},a.isJSON=function(a){try{var b=JSON.parse(a);return!!b&&"object"==typeof b}catch(a){}return!1},a.isMultibyte=function(a){return F.test(a)},a.isAscii=function(a){return E.test(a)},a.isFullWidth=function(a){return G.test(a)},a.isHalfWidth=function(a){return H.test(a)},a.isVariableWidth=function(a){return G.test(a)&&H.test(a)},a.isSurrogatePair=function(a){return I.test(a)},a.isBase64=function(a){return J.test(a)},a.isMongoId=function(b){return a.isHexadecimal(b)&&24===b.length},a.isISO8601=function(a){return L.test(a)},a.ltrim=function(a,b){var c=b?new RegExp("^["+b+"]+","g"):/^\s+/g;return a.replace(c,"")},a.rtrim=function(a,b){var c=b?new RegExp("["+b+"]+$","g"):/\s+$/g;return a.replace(c,"")},a.trim=function(a,b){var c=b?new RegExp("^["+b+"]+|["+b+"]+$","g"):/^\s+|\s+$/g;return a.replace(c,"")},a.escape=function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},a.stripLow=function(b,c){var d=c?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return a.blacklist(b,d)},a.whitelist=function(a,b){return a.replace(new RegExp("[^"+b+"]+","g"),"")},a.blacklist=function(a,b){return a.replace(new RegExp("["+b+"]+","g"),"")};var R={lowercase:!0,remove_dots:!0,remove_extension:!0};return a.normalizeEmail=function(b,c){if(c=e(c,R),!a.isEmail(b))return!1;var d=b.split("@",2);if(d[1]=d[1].toLowerCase(),"gmail.com"===d[1]||"googlemail.com"===d[1]){if(c.remove_extension&&(d[0]=d[0].split("+")[0]),c.remove_dots&&(d[0]=d[0].replace(/\./g,"")),!d[0].length)return!1;d[0]=d[0].toLowerCase(),d[1]="gmail.com"}else c.lowercase&&(d[0]=d[0].toLowerCase());return d.join("@")},a.init(),a})},{160:160}]},{},[35])(35)});